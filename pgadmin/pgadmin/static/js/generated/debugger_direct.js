define(["translations","pgadmin.browser.endpoints","pgadmin.browser.utils","pgadmin.browser.messages"],function(e,t,r,a){return webpackJsonp([2,3],{153:function(e,t,r){"use strict";var a,i;a=[r(0),r(1),r(4)],void 0!==(i=function(e,t,r){return function(e,a){if(t.isUndefined(a)||t.isNull(a))return!0;r.startsWith(a,"coll-")&&(a=a.replace("coll-",""));var i=["server_group","server","catalog_object_column"];if(t.indexOf(i,a)>=0)return!0;var n=e.get_preference("browser","show_node_"+a);return!n||n.value}}.apply(t,a))&&(e.exports=i)},157:function(e,t,r){"use strict";var a,i;a=[r(2),r(5),r(0),r(1),r(4),r(15),r(3),r(6),r(10),r(11),r(28),r(17),r(97),r(29),r(22),r(26)],void 0!==(i=function(e,t,r,a,i,n,o,s,l,d,u,c,g){var _=u.default;null!=o.Browser.tree&&(o=o||window.pgAdmin||{});var b=o.Tools=o.Tools||{};if(b.DirectDebug)return b.DirectDebug;var p=new function(){};a.extend(p,l.Events,{enable:function(e,t){this.trigger("pgDebugger:button:state:"+e,t)},set_breakpoint:function(a,i,o){var s=t("debugger.set_breakpoint",{trans_id:a,line_no:i,set_type:o});r.ajax({url:s,method:"GET",success:function(e){e.data.status},error:function(t){n.alert(e("Debugger Error"),e("Error while setting debugging breakpoint."))}})},UpdateBreakpoint:function(e){var t=this,r=t.GetBreakpointInformation(e);if(1!=r.length||-1!=r[0].linenumber){for(var a=new Array,i=0;i<r.length;i++)-1!=r[i].linenumber&&a.push(r[i].linenumber);for(var i=0;i<a.length;i++){void 0!=b.DirectDebug.editor.lineInfo(a[i]-1).gutterMarkers?b.DirectDebug.editor.setGutterMarker(a[i]-1,"breakpoints",null):b.DirectDebug.editor.setGutterMarker(a[i]-1,"breakpoints",function(){var e=document.createElement("div");return e.style.color="#822",e.innerHTML="●",e}())}}},GetBreakpointInformation:function(a){var i="",o=t("debugger.execute_query",{trans_id:a,query_type:"get_breakpoints"});return r.ajax({url:o,method:"GET",async:!1,success:function(t){"Success"===t.data.status?i=t.data.result:"NotConnected"===t.data.status&&n.alert(e("Debugger Error"),e("Error while fetching breakpoint information."))},error:function(t){n.alert(e("Debugger Error"),e("Error while fetching breakpoint information."))}}),i},start_execution:function(a,i){var o=this,s=t("debugger.start_execution",{trans_id:a,port_num:i});r.ajax({url:s,method:"GET",success:function(t){"Success"===t.data.status?o.execute_query(a):"NotConnected"===t.data.status&&n.alert(e("Debugger Error"),e("Error while starting debugging session."))},error:function(t){n.alert(e("Debugger Error"),e("Error while starting debugging session."))}})},execute_query:function(a){var i=this,o=t("debugger.execute_query",{trans_id:a,query_type:"wait_for_breakpoint"});r.ajax({url:o,method:"GET",success:function(t){if("Success"===t.data.status){if(null!=t.data.result[0].src&&null!=t.data.result[0].linenumber){b.DirectDebug.editor.setValue(t.data.result[0].src);i.active_line_no=t.data.result[0].linenumber-2;b.DirectDebug.editor.addLineClass(t.data.result[0].linenumber-2,"wrap","CodeMirror-activeline-background")}i.GetStackInformation(a),b.DirectDebug.debug_type&&i.poll_end_execution_result(a)}else"NotConnected"===t.data.status&&n.alert(e("Debugger Error"),e("Error while executing requested debugging information."))},error:function(t){n.alert(e("Debugger Error"),e("Error while executing requested debugging information."))}})},GetLocalVariables:function(a){var i=this,o=t("debugger.execute_query",{trans_id:a,query_type:"get_variables"});r.ajax({url:o,method:"GET",success:function(t){"Success"===t.data.status?(i.AddLocalVariables(t.data.result),i.AddParameters(t.data.result),b.DirectDebug.debug_restarted&&(b.DirectDebug.debug_type&&i.poll_end_execution_result(a),b.DirectDebug.debug_restarted=!1)):"NotConnected"===t.data.status&&n.alert(e("Debugger Error"),e("Error while fetching variable information."))},error:function(t){n.alert(e("Debugger Error"),e("Error while fetching variable information."))}})},GetStackInformation:function(a){var i=this,o=t("debugger.execute_query",{trans_id:a,query_type:"get_stack_info"});r.ajax({url:o,method:"GET",success:function(t){"Success"===t.data.status?(i.AddStackInformation(t.data.result),i.GetLocalVariables(b.DirectDebug.trans_id)):"NotConnected"===t.data.status&&n.alert(e("Debugger Error"),e("Error while fetching stack information."))},error:function(t){n.alert(e("Debugger Error"),e("Error while fetching stack information."))}})},poll_result:function(a){var i=this;if(b.DirectDebug.is_polling_required){var o=t("debugger.poll_result",{trans_id:a});if(b.DirectDebug.polling_timeout_idle)var s=1e3;else var s=200;setTimeout(function(){r.ajax({url:o,method:"GET",beforeSend:function(e,t){r(".debugger-container").addClass("show_progress")},success:function(t){r(".debugger-container").removeClass("show_progress"),"Success"===t.data.status?null==t.data.result||0==t.data.result.length?i.poll_result(a):(void 0!=t.data.result[0].src||null!=t.data.result[0].src?(b.DirectDebug.polling_timeout_idle=!1,b.DirectDebug.docker.finishLoading(50),b.DirectDebug.editor.setValue(t.data.result[0].src),i.UpdateBreakpoint(a),b.DirectDebug.editor.removeLineClass(i.active_line_no,"wrap","CodeMirror-activeline-background"),b.DirectDebug.editor.addLineClass(t.data.result[0].linenumber-2,"wrap","CodeMirror-activeline-background"),i.active_line_no=t.data.result[0].linenumber-2,i.GetStackInformation(a)):b.DirectDebug.debug_type||b.DirectDebug.first_time_indirect_debug?(b.DirectDebug.polling_timeout_idle=!1,b.DirectDebug.docker.finishLoading(50),t.data.result[0].src!=b.DirectDebug.editor.getValue()&&(b.DirectDebug.editor.setValue(t.data.result[0].src),i.UpdateBreakpoint(a)),b.DirectDebug.editor.removeLineClass(i.active_line_no,"wrap","CodeMirror-activeline-background"),b.DirectDebug.editor.addLineClass(t.data.result[0].linenumber-2,"wrap","CodeMirror-activeline-background"),i.active_line_no=t.data.result[0].linenumber-2,i.GetStackInformation(a)):(b.DirectDebug.docker.finishLoading(50),void 0!=i.active_line_no&&b.DirectDebug.editor.removeLineClass(i.active_line_no,"wrap","CodeMirror-activeline-background"),i.clear_all_breakpoint(a),i.execute_query(a),b.DirectDebug.first_time_indirect_debug=!0,b.DirectDebug.polling_timeout_idle=!1),i.enable("stop",!0),i.enable("step_over",!0),i.enable("step_into",!0),i.enable("continue",!0),i.enable("toggle_breakpoint",!0),i.enable("clear_all_breakpoints",!0)):"Busy"===t.data.status?(b.DirectDebug.polling_timeout_idle=!0,b.DirectDebug.debug_type?i.poll_result(a):(b.DirectDebug.docker.startLoading(e("Waiting for another session to invoke the target...")),i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("continue",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),b.DirectDebug.first_time_indirect_debug=!1,i.poll_result(a))):"NotConnected"===t.data.status&&n.alert(e("Debugger Error"),e("Error while polling result."))},error:function(t){n.alert(e("Debugger Error"),e("Error while polling result."))}})},s)}},update_messages:function(e){e=a.escape(e);var t="",r="";t=b.DirectDebug.messages_panel.$container.find(".messages").html(),r=t?(t+"\n"+e).replace(/(?:\r\n|\r|\n)/g,"<br />").replace(/(<br\ ?\/?>)+/g,"<br />"):e,b.DirectDebug.messages_panel.$container.find(".messages").html(r)},poll_end_execution_result:function(a){var i=this;if(b.DirectDebug.is_polling_required){var o=t("debugger.poll_end_execution_result",{trans_id:a});if(b.DirectDebug.polling_timeout_idle)var s=1200;else var s=250;setTimeout(function(){r.ajax({url:o,method:"GET",success:function(t){"Success"===t.data.status?void 0==t.data.result?(b.DirectDebug.editor.removeLineClass(i.active_line_no,"wrap","CodeMirror-activeline-background"),b.DirectDebug.direct_execution_completed=!0,b.DirectDebug.polling_timeout_idle=!0,n.success(t.info,3),t.data.status_message&&i.update_messages(t.data.status_message),r(".debugger-container").removeClass("show_progress"),i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!0),b.DirectDebug.is_polling_required=!1):null!=t.data.result&&(b.DirectDebug.editor.removeLineClass(i.active_line_no,"wrap","CodeMirror-activeline-background"),i.AddResults(t.data.col_info,t.data.result),b.DirectDebug.results_panel.focus(),b.DirectDebug.direct_execution_completed=!0,b.DirectDebug.polling_timeout_idle=!0,n.success(t.info,3),t.data.status_message&&i.update_messages(t.data.status_message),r(".debugger-container").removeClass("show_progress"),i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!0),b.DirectDebug.is_polling_required=!1):"Busy"===t.data.status?(i.poll_end_execution_result(a),t.data.status_message&&i.update_messages(t.data.status_message)):"NotConnected"===t.data.status?n.alert(e("Debugger poll end execution error"),t.data.result):"ERROR"===t.data.status&&(b.DirectDebug.direct_execution_completed=!0,b.DirectDebug.editor.removeLineClass(i.active_line_no,"wrap","CodeMirror-activeline-background"),b.DirectDebug.is_user_aborted_debugging||n.error(t.info,3),t.data.status_message&&i.update_messages(t.data.status_message),b.DirectDebug.messages_panel.focus(),r(".debugger-container").removeClass("show_progress"),i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),b.DirectDebug.is_user_aborted_debugging||(i.enable("continue",!0),b.DirectDebug.is_user_aborted_debugging=!1),b.DirectDebug.is_polling_required=!1)},error:function(t){n.alert(e("Debugger Error"),e("Error while polling result."))}})},s)}},Restart:function(a){var i=this,o=t("debugger.restart",{trans_id:a});i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!1),b.DirectDebug.messages_panel.$container.find(".messages").html(""),r.ajax({url:o,success:function(o){var s=o.data.restart_debug?1:0;if(b.DirectDebug.polling_timeout_idle=!1,b.DirectDebug.is_polling_required=!0,i.poll_end_execution_result(a),i.poll_result(a),s&&(b.DirectDebug.debug_restarted=!0),o.data.result.require_input){g(o.data.result,s)}else{var l=t("debugger.start_listener",{trans_id:a});r.ajax({url:l,method:"GET",success:function(e){b.DirectDebug.debug_type&&i.poll_end_execution_result(a)},error:function(t){n.alert(e("Debugger Error"),e("Error while polling result."))}})}},error:function(t,a,i){try{var o=r.parseJSON(t.responseText);0==o.success&&n.alert(e("Debugger Error"),o.errormsg)}catch(e){}}})},Continue:function(a){var i=this;if(i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!1),b.DirectDebug.direct_execution_completed&&b.DirectDebug.direct_execution_completed==b.DirectDebug.polling_timeout_idle)i.Restart(a);else{var o=t("debugger.execute_query",{trans_id:a,query_type:"continue"});r.ajax({url:o,method:"GET",success:function(t){t.data.status?i.poll_result(a):n.alert(e("Debugger Error"),e("Error while executing continue in debugging session."))},error:function(t){n.alert(e("Debugger Error"),e("Error while executing continue in debugging session."))}})}},Step_over:function(a){var i=this;i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!1);var o=t("debugger.execute_query",{trans_id:a,query_type:"step_over"});r.ajax({url:o,method:"GET",success:function(t){t.data.status?i.poll_result(a):n.alert(e("Debugger Error"),e("Error while executing step over in debugging session."))},error:function(t){n.alert(e("Debugger Error"),e("Error while executing step over in debugging session."))}})},Step_into:function(a){var i=this;i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!1);var o=t("debugger.execute_query",{trans_id:a,query_type:"step_into"});r.ajax({url:o,method:"GET",success:function(t){t.data.status?i.poll_result(a):n.alert(e("Debugger Error"),e("Error while executing step into in debugging session."))},error:function(t){n.alert(e("Debugger Error"),e("Error while executing step into in debugging session."))}})},Stop:function(a){var i=this;i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!1);var o=t("debugger.execute_query",{trans_id:a,query_type:"abort_target"});r.ajax({url:o,method:"GET",success:function(t){t.data.status?(b.DirectDebug.editor.removeLineClass(i.active_line_no,"wrap","CodeMirror-activeline-background"),b.DirectDebug.direct_execution_completed=!0,b.DirectDebug.is_user_aborted_debugging=!0,b.DirectDebug.is_polling_required=!1,i.enable("continue",!1),n.success(t.info,3)):"NotConnected"===t.data.status&&n.alert(e("Debugger Error"),e("Error while executing stop in debugging session."))},error:function(t){n.alert(e("Debugger Error"),e("Error while executing stop in debugging session."))}})},toggle_breakpoint:function(a){var i=this;i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!1);var o=b.DirectDebug.editor.lineInfo(i.active_line_no),s="";s=void 0==o.gutterMarkers?t("debugger.set_breakpoint",{trans_id:a,line_no:i.active_line_no+1,set_type:"1"}):t("debugger.set_breakpoint",{trans_id:a,line_no:i.active_line_no+1,set_type:"0"}),r.ajax({url:s,method:"GET",success:function(t){if(t.data.status){void 0!=b.DirectDebug.editor.lineInfo(i.active_line_no).gutterMarkers?b.DirectDebug.editor.setGutterMarker(i.active_line_no,"breakpoints",null):b.DirectDebug.editor.setGutterMarker(i.active_line_no,"breakpoints",function(){var e=document.createElement("div");return e.style.color="#822",e.innerHTML="●",e}()),i.enable("stop",!0),i.enable("step_over",!0),i.enable("step_into",!0),i.enable("toggle_breakpoint",!0),i.enable("clear_all_breakpoints",!0),i.enable("continue",!0)}else"NotConnected"===t.data.status&&n.alert(e("Debugger Error"),e("Error while toggling breakpoint."))},error:function(t){n.alert(e("Debugger Error"),e("Error while toggling breakpoint."))}})},clear_all_breakpoint:function(a){var i=this,o=i.GetBreakpointInformation(a);if(1!=o.length||-1!=o[0].linenumber){i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!1);for(var s=new Array,l=0;l<o.length;l++)-1!=o[l].linenumber&&s.push(o[l].linenumber);var d=t("debugger.clear_all_breakpoint",{trans_id:a});r.ajax({url:d,method:"POST",data:{breakpoint_list:s.join()},success:function(e){if(e.data.status)for(var t=0;t<s.length;t++){var r=b.DirectDebug.editor.lineInfo(s[t]-1);r&&void 0!=r.gutterMarkers&&b.DirectDebug.editor.setGutterMarker(s[t]-1,"breakpoints",null)}i.enable("stop",!0),i.enable("step_over",!0),i.enable("step_into",!0),i.enable("toggle_breakpoint",!0),i.enable("clear_all_breakpoints",!0),i.enable("continue",!0)},error:function(t){n.alert(e("Debugger Error"),e("Error while clearing all breakpoint."))}})}},AddStackInformation:function(t){var r=this;r.stack_grid&&(r.stack_grid.remove(),r.stack_grid=null);for(var a=l.Model.extend({defaults:{frame_id:0,name:void 0,value:void 0,line_no:void 0}}),i=l.Collection.extend({model:a}),n=[{name:"name",label:e("Name"),type:"text",editable:!1,cell:"string"},{name:"value",label:e("Value"),type:"text",editable:!1,cell:"string"},{name:"line_no",label:e("Line No."),type:"text",editable:!1,cell:"string"}],o=[],s=0;s<t.length;s++)o.push({frame_id:s,name:t[s].targetname,value:t[s].args,line_no:t[s].linenumber});var u=this.stackColl=new i(o);this.stackColl.on("backgrid:row:selected",r.select_frame,r);var c=this.stack_grid=new d.Grid({columns:n,row:d.Row.extend({highlightColor:"#D9EDF7",disabledColor:"#F1F1F1",events:{click:"rowClick"},rowClick:function(e){r.frame_id=this.model.get("frame_id"),this.model.trigger("backgrid:row:selected",this),r.stack_grid.$el.find("td").css("background-color",this.disabledColor),this.$el.find("td").css("background-color",this.highlightColor)}}),collection:u,className:"backgrid table-bordered"});c.render(),b.DirectDebug.stack_pane_panel.$container.find(".stack_pane").append(c.el)},AddResults:function(e,t){var r=this;r.result_grid&&(r.result_grid.remove(),r.result_grid=null);var i=l.Model.extend({defaults:{name:void 0}}),n=l.Collection.extend({model:i}),o=[];a.size(e)&&a.each(e,function(e){var t={type:"text",editable:!1,cell:"string"};t.name=t.label=e.name,o.push(t)});var s=this.result_grid=new d.Grid({columns:o,collection:new n(t),className:"backgrid table-bordered"});s.render(),b.DirectDebug.results_panel.$container.find(".debug_results").append(s.el)},AddLocalVariables:function(t){var r=this;r.variable_grid&&(r.variable_grid.remove(),r.variable_grid=null);var a=l.Model.extend({defaults:{name:void 0,type:void 0,value:void 0}}),i=l.Collection.extend({model:a}),n=[{name:"name",label:e("Name"),type:"text",editable:!1,cell:"string"},{name:"type",label:e("Type"),type:"text",editable:!1,cell:"string"},{name:"value",label:e("Value"),type:"text",cell:"string"}],o=[];if(0!=t.length)for(var s=0;s<t.length;s++)"L"==t[s].varclass&&o.push({name:t[s].name,type:t[s].dtype,value:t[s].value});var u=this.variable_grid=new d.Grid({columns:n,collection:new i(o),className:"backgrid table-bordered"});u.render(),b.DirectDebug.local_variables_panel.$container.find(".local_variables").append(u.el)},AddParameters:function(t){var r=this;r.param_grid&&(r.param_grid.remove(),r.param_grid=null);var a=l.Model.extend({defaults:{name:void 0,type:void 0,value:void 0}}),i=r.ParametersCollection=l.Collection.extend({model:a});r.ParametersCollection.prototype.on("change",r.deposit_parameter_value,r);var n=[{name:"name",label:e("Name"),type:"text",editable:!1,cell:"string"},{name:"type",label:e("Type"),type:"text",editable:!1,cell:"string"},{name:"value",label:e("Value"),type:"text",cell:"string"}],o=[];if(0!=t.length)for(var s=0;s<t.length;s++)"A"==t[s].varclass&&o.push({name:t[s].name,type:t[s].dtype,value:t[s].value});var u=this.param_grid=new d.Grid({columns:n,collection:new i(o),className:"backgrid table-bordered"});u.render(),b.DirectDebug.parameters_panel.$container.find(".parameters").append(u.el)},deposit_parameter_value:function(a){var i=this,o=[];o.push({name:a.get("name"),type:a.get("type"),value:a.get("value")});var s=t("debugger.deposit_value",{trans_id:b.DirectDebug.trans_id});r.ajax({url:s,method:"POST",data:{data:JSON.stringify(o)},success:function(e){e.data.status&&(i.GetLocalVariables(b.DirectDebug.trans_id),e.data.result?n.success(e.data.info,3):n.error(e.data.info,3))},error:function(t){n.alert(e("Debugger Error"),e("Error while depositing variable value."))}})},select_frame:function(a,i){var o=this,s=t("debugger.select_frame",{trans_id:b.DirectDebug.trans_id,frame_id:o.frame_id});r.ajax({url:s,method:"GET",success:function(e){e.data.status&&(b.DirectDebug.editor.setValue(e.data.result[0].src),o.UpdateBreakpoint(b.DirectDebug.trans_id),b.DirectDebug.editor.addLineClass(e.data.result[0].linenumber-2,"wrap","CodeMirror-activeline-background"),o.GetLocalVariables(b.DirectDebug.trans_id))},error:function(t){n.alert(e("Debugger Error"),e("Error while selecting frame."))}})}});var f=l.View.extend({el:"#btn-toolbar",initialize:function(){p.on("pgDebugger:button:state:stop",this.enable_stop,this),p.on("pgDebugger:button:state:step_over",this.enable_step_over,this),p.on("pgDebugger:button:state:step_into",this.enable_step_into,this),p.on("pgDebugger:button:state:continue",this.enable_continue,this),p.on("pgDebugger:button:state:toggle_breakpoint",this.enable_toggle_breakpoint,this),p.on("pgDebugger:button:state:clear_all_breakpoints",this.enable_clear_all_breakpoints,this)},events:{"click .btn-stop":"on_stop","click .btn-clear-breakpoint":"on_clear_all_breakpoint","click .btn-toggle-breakpoint":"on_toggle_breakpoint","click .btn-continue":"on_continue","click .btn-step-over":"on_step_over","click .btn-step-into":"on_step_into"},enable_stop:function(e){var t=this.$el.find(".btn-stop");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_step_over:function(e){var t=this.$el.find(".btn-step-over");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_step_into:function(e){var t=this.$el.find(".btn-step-into");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_continue:function(e){var t=this.$el.find(".btn-continue");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_toggle_breakpoint:function(e){var t=this.$el.find(".btn-toggle-breakpoint");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_clear_all_breakpoints:function(e){var t=this.$el.find(".btn-clear-breakpoint");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},on_stop:function(){p.Stop(b.DirectDebug.trans_id)},on_clear_all_breakpoint:function(){p.clear_all_breakpoint(b.DirectDebug.trans_id)},on_toggle_breakpoint:function(){p.toggle_breakpoint(b.DirectDebug.trans_id)},on_continue:function(){p.Continue(b.DirectDebug.trans_id)},on_step_over:function(){p.Step_over(b.DirectDebug.trans_id)},on_step_into:function(){p.Step_into(b.DirectDebug.trans_id)}}),v=function(){};return a.extend(v.prototype,{init:function(i,o){var s=this;if(a.bindAll(b.DirectDebug,"messages"),!this.initialized){this.initialized=!0,this.trans_id=i,this.debug_type=o,this.first_time_indirect_debug=!1,this.direct_execution_completed=!1,this.polling_timeout_idle=!1,this.debug_restarted=!1,this.is_user_aborted_debugging=!1,this.is_polling_required=!0;this.docker=new wcDocker("#container",{allowContextMenu:!1,allowCollapse:!1,themePath:t("static",{filename:"css"}),theme:"webcabin.overrides.css"});if(this.panels=[],void 0==i||o)if(void 0!=i&&o){var l=t("debugger.start_listener",{trans_id:i});r.ajax({url:l,method:"GET",success:function(e){e.data.status&&s.messages(i)},error:function(t){n.alert(e("Debugger Error"),e("Error while starting debugging listener."))}})}else this.intializePanels();else{var l=t("debugger.start_listener",{trans_id:i});r.ajax({url:l,method:"GET",success:function(e){e.data.status&&(s.intializePanels(),p.poll_result(i))},error:function(t){n.alert(e("Debugger Error"),e("Error while starting debugging listener."))}})}}},messages:function(a){var i=this,o=t("debugger.messages",{trans_id:a});r.ajax({url:o,method:"GET",success:function(t){"Success"===t.data.status?(i.intializePanels(),p.start_execution(a,t.data.result)):"Busy"===t.data.status?i.messages(a):"NotConnected"===t.data.status&&n.alert(e("Not connected to server or connection with the server has been closed."),t.data.result)},error:function(t){n.alert(e("Debugger Error"),e("Error while fetching messages information."))}})},onBreakPoint:function(e,t,r){var a=this;if("breakpoints"==r&&!b.DirectDebug.polling_timeout_idle){var i=e.lineInfo(t);void 0==i.gutterMarkers?p.set_breakpoint(a.trans_id,t+1,1):void 0==i.gutterMarkers.breakpoints?p.set_breakpoint(a.trans_id,t+1,1):p.set_breakpoint(a.trans_id,t+1,0);var n=i.gutterMarkers;void 0!=n&&void 0==i.gutterMarkers.breakpoints&&(n=i.gutterMarkers.breakpoints),e.setGutterMarker(t,"breakpoints",n?null:function(){var e=document.createElement("div");return e.style.color="#822",e.innerHTML="●",e}())}},intializePanels:function(){var t=this;this.registerPanel("code",!1,"100%","50%",function(r){var a=new o.Browser.Panel({name:"parameters",title:e("Parameters"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id ="parameters" class="parameters"></div>'}),i=new o.Browser.Panel({name:"local_variables",title:e("Local variables"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id ="local_variables" class="local_variables"></div>'}),n=new o.Browser.Panel({name:"messages",title:e("Messages"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id="messages" class="messages"></div>'}),s=new o.Browser.Panel({name:"results",title:e("Results"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id="debug_results" class="debug_results"></div>'}),l=new o.Browser.Panel({name:"stack_pane",title:e("Stack"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id="stack_pane" class="stack_pane"></div>'});a.load(t.docker),i.load(t.docker),n.load(t.docker),s.load(t.docker),l.load(t.docker)}),t.code_editor_panel=t.docker.addPanel("code",wcDocker.DOCK.TOP),t.parameters_panel=t.docker.addPanel("parameters",wcDocker.DOCK.BOTTOM,t.code_editor_panel),t.local_variables_panel=t.docker.addPanel("local_variables",wcDocker.DOCK.STACKED,t.parameters_panel,{tabOrientation:wcDocker.TAB.TOP}),t.messages_panel=t.docker.addPanel("messages",wcDocker.DOCK.STACKED,t.parameters_panel),t.results_panel=t.docker.addPanel("results",wcDocker.DOCK.STACKED,t.parameters_panel),t.stack_pane_panel=t.docker.addPanel("stack_pane",wcDocker.DOCK.STACKED,t.parameters_panel);var a=r('<div id="stack_editor_pane" class="full-container-pane info"></div>'),i=r('<textarea id="debugger-editor-textarea"></textarea>').append(a);t.code_editor_panel.layout().addItem(i);var n=(t.editor=_.fromTextArea(i.get(0),{lineNumbers:!0,foldOptions:{widget:"…"},foldGutter:{rangeFinder:_.fold.combine(_.pgadminBeginRangeFinder,_.pgadminIfRangeFinder,_.pgadminLoopRangeFinder,_.pgadminCaseRangeFinder)},gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","breakpoints"],mode:"text/x-pgsql",readOnly:!0,extraKeys:o.Browser.editor_shortcut_keys,indentWithTabs:o.Browser.editor_options.indent_with_tabs,indentUnit:o.Browser.editor_options.tabSize,tabSize:o.Browser.editor_options.tabSize,lineWrapping:o.Browser.editor_options.wrapCode,autoCloseBrackets:o.Browser.editor_options.insert_pair_brackets,matchBrackets:o.Browser.editor_options.brace_matching}),function(){t.docker.finishLoading(100),t.docker.off(wcDocker.EVENT.LOADED),t.editor.on("gutterClick",t.onBreakPoint.bind(t),t)});t.docker.startLoading(e("Loading...")),t.docker.on(wcDocker.EVENT.LOADED,n),this.toolbarView=new f},registerPanel:function(e,t,a,i,n){var o=this;this.docker.registerPanelType(e,{title:t,isPrivate:!0,onCreate:function(s){o.panels[e]=s,s.initSize(a,i),t?s.title(t):s.title(!1),s.closeable(!1),s.layout().addItem(r("<div>",{class:"pg-debugger-panel"})),n&&n.apply(o,[s])}})}}),b.DirectDebug=new v,b.DirectDebug.jquery=r,b.DirectDebug}.apply(t,a))&&(e.exports=i)},2:function(e,t,r){"use strict";var a,i;a=[r(43)],void 0!==(i=function(e){return function(t,r){var a,i=e[t]?e[t]:t,n=/([^%]*)%\(([^\)]+)\)s(.*)/,o=i;do{a=!1,o=o.replace(n,function(e,t,i,n){return a=!0,t+r[i]+n})}while(a);return o}}.apply(t,a))&&(e.exports=i)},28:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(13),i=function(e){return e&&e.__esModule?e:{default:e}}(a);r(49),r(84),r(85),r(74),r(86),r(87),r(88),r(89),r(50),r(90),r(75),r(91),r(92),r(93),r(94),r(37),t.default=i.default},3:function(e,t,r){"use strict";var a,i,n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(r){i=[],a=r,void 0!==(n="function"==typeof a?a.apply(t,i):a)&&(e.exports=n)}(function(){var e=window.pgAdmin=window.pgAdmin||{};return function(e,t,r){function a(e,t,a,n){a=a||"width";var o,l,d,g=(t.match(u)||[])[2],_="px"===g?1:c[g+"toPx"],b=/r?em/i;if(_||b.test(g)&&!n)e=_?e:"rem"===g?s:"fontSize"===a?e.parentNode||e:e,_=_||parseFloat(i(e,"fontSize")),d=parseFloat(t)*_;else{o=e.style,l=o[a];try{o[a]=t}catch(e){return 0}d=o[a]?parseFloat(i(e,a)):0,o[a]=l!==r?l:null}return d}function i(e,t){var r,o,s,l,c,g=/^top|bottom/,_=["paddingTop","paddingBottom","borderTop","borderBottom"],b=4;if(r=d?d(e)[t]:(o=e.style["pixel"+t.charAt(0).toUpperCase()+t.slice(1)])?o+"px":"fontSize"===t?a(e,"1em","left",1)+"px":e.currentStyle[t],"%"===(s=(r.match(u)||[])[2])&&n)if(g.test(t)){for(l=(c=e.parentNode||e).offsetHeight;b--;)l-=parseFloat(i(c,_[b]));r=parseFloat(r)/100*l+"px"}else r=a(e,r);else("auto"===r||s&&"px"!==s)&&d?r=0:s&&"px"!==s&&!d&&(r=a(e,r)+"px");return r}var n,o=t.createElement("test"),s=t.documentElement,l=t.defaultView,d=l&&l.getComputedStyle,u=/^(-?[\d+\.\-]+)([a-z]+|%)$/i,c={},g=[1/25.4,1/2.54,1/72,1/6],_=["mm","cm","pt","pc","in","mozmm"],b=6;for(s.appendChild(o),d&&(o.style.marginTop="1%",n="1%"===d(o).marginTop);b--;)c[_[b]+"toPx"]=g[b]?g[b]*c.inToPx:a(o,"1"+_[b]);s.removeChild(o),o=r,e.toPx=a}(e,window.document),e.natural_sort=function(e,t,r){var a,i,n=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,s=/(^[ ]*|[ ]*$)/g,l=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,d=/^0x[0-9a-f]+$/i,u=/^0/,r=r||{},c=function(e){return r.insensitive&&(""+e).toLowerCase()||""+e},g=c(e).replace(s,"")||"",_=c(t).replace(s,"")||"",b=g.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),p=_.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),f=parseInt(g.match(d))||1!==b.length&&g.match(l)&&Date.parse(g),v=parseInt(_.match(d))||f&&_.match(l)&&Date.parse(_)||null,m=r.desc?-1:1;if(v){if(f<v)return-1*m;if(f>v)return 1*m}for(var h=0,D=Math.max(b.length,p.length);h<D;h++){if(a=!(b[h]||"").match(u)&&parseFloat(b[h])||b[h]||0,i=!(p[h]||"").match(u)&&parseFloat(p[h])||p[h]||0,isNaN(a)!==isNaN(i))return(isNaN(a)?1:-1)*m;if((void 0===a?"undefined":o(a))!==(void 0===i?"undefined":o(i))&&(a+="",i+=""),a<i)return-1*m;if(a>i)return 1*m}return 0},e})},37:function(e,t,r){"use strict";(function(e){var a,i,n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s){"object"==o(t)&&"object"==o(e)?s(r(13)):(i=[r(13)],a=s,void 0!==(n="function"==typeof a?a.apply(t,i):a)&&(e.exports=n))}(function(e){e.pgadminKeywordRangeFinder=function(t,r,a,i){for(var n,o,s=r.line,l=t.getLine(s),d=l.length;d>0;){var u=l.lastIndexOf(a,d),c=a,g=i;if(u<r.ch){var u=l.lastIndexOf("[",d);if(u<r.ch)break;var c="[",g="]"}if(o=t.getTokenAt(e.Pos(s,u+1)).type,!/^(comment|string)/.test(o)){n=u;break}d=u-1}if(!(null==n||l.lastIndexOf(c)>n)){var _,b,p=1,f=t.lineCount();e:for(var v=s+1;v<f;++v)for(var m=t.getLine(v),h=0;;){var D=m.indexOf(c,h),k=m.indexOf(g,h);if(D<0&&(D=m.length),k<0&&(k=m.length),(h=Math.min(D,k))==m.length)break;if(t.getTokenAt(e.Pos(v,h+1)).type==o)if(h==D)++p;else if(!--p){_=v,b=h;break e}++h}if(null!=_&&_!=s+1)return{from:e.Pos(s,n+a.length),to:e.Pos(_,b)}}},e.pgadminBeginRangeFinder=function(t,r){return e.pgadminKeywordRangeFinder(t,r,"BEGIN","END;")},e.pgadminIfRangeFinder=function(t,r){return e.pgadminKeywordRangeFinder(t,r,"IF","END IF")},e.pgadminLoopRangeFinder=function(t,r){return e.pgadminKeywordRangeFinder(t,r,"LOOP","END LOOP")},e.pgadminCaseRangeFinder=function(t,r){return e.pgadminKeywordRangeFinder(t,r,"CASE","END CASE")}})}).call(t,r(45)(e))},43:function(t,r){t.exports=e},44:function(e,r){e.exports=t},5:function(e,t,r){"use strict";var a,i;a=[r(44)],void 0!==(i=function(e){return function(t,r){var a=e[t],i=/([<])([^:^>]*:)?([^>]+)([>])/g,n=a;return a?n=n.replace(i,function(e,t,a,i){return i in r?r[i]:e}):a}}.apply(t,a))&&(e.exports=i)},76:function(e,t){e.exports=r},95:function(e,t){e.exports=a},96:function(e,t,r){"use strict";function a(e,t,r,a,i,o){var s="";return n.default.each(n.default.sortBy(n.default.pick(t,i),function(e){return e.priority}),function(e){s=s+"/"+encodeURI(e._id)}),s=o?s+"/"+o:s+"/",""+e+a+"/"+r+s}var i=r(1),n=function(e){return e&&e.__esModule?e:{default:e}}(i);e.exports={generate_url:a}},97:function(e,t,r){"use strict";var a,i;a=[r(2),r(5),r(0),r(1),r(4),r(15),r(3),r(6),r(10),r(11),r(13),r(17),r(29),r(22),r(26),r(154)],void 0!==(i=function(e,t,r,a,i,n,o,s,l,d,u,c){var g=function(e){var t=e.get("type");if(-1!=t.indexOf("[]"))return-1!=t.indexOf("integer")?d.Extension.InputIntegerArrayCell:d.Extension.InputStringArrayCell;switch(t){case"bool":return d.BooleanCell;case"integer":return void 0!=e.get("value")&&e.set({value:parseInt(e.get("value"))},{silent:!0}),d.IntegerCell;case"real":return void 0!=e.get("value")&&e.set({value:parseFloat(e.get("value"))},{silent:!0}),d.NumberCell;case"string":return d.StringCell;case"date":return d.DateCell;default:return d.Cell}},_=function(e){return-1!=e.get("type").indexOf("[]")?d.StringCell:d.BooleanCell},b=l.Model.extend({defaults:{name:void 0,type:void 0,is_null:void 0,expr:void 0,value:void 0,use_default:void 0,default_value:void 0},validate:function(){if(a.isUndefined(this.get("value"))||a.isNull(this.get("value"))||""==String(this.get("value")).replace(/^\s+|\s+$/g,"")){var t=e("Please enter a value for the parameter.");return this.errorModel.set("value",t),t}return this.errorModel.unset("value"),null}}),p=l.Collection.extend({model:b}),f=function(e){return e instanceof l.Model&&e.get("use_default")},v=function(e){e.get("type");if(e instanceof l.Model){return-1==e.get("type").indexOf("[]")}};return function(i,o){n.debuggerInputArgsDialog||n.dialog("debuggerInputArgsDialog",function(){return{main:function(i,o,l){this.set("title",i),this.data=o,this.restart_debug=l;var u=this.func_args_data=[];if(0==l){var c=s.tree,b=c.selected(),m=b&&1==b.length?c.itemData(b):void 0,h=m&&s.Nodes[m._type];if(!m)return;var D=h.getTreeNodeHierarchy.apply(h,[b]);if("function"==m._type)var k=t("debugger.get_arguments",{sid:D.server._id,did:D.database._id,scid:D.schema._id,func_id:D.function._id});else if("procedure"==m._type)var k=t("debugger.get_arguments",{sid:D.server._id,did:D.database._id,scid:D.schema._id,func_id:D.procedure._id});else if("edbfunc"==m._type)var k=t("debugger.get_arguments",{sid:D.server._id,did:D.database._id,scid:D.schema._id,func_id:D.edbfunc._id});else if("edbproc"==m._type)var k=t("debugger.get_arguments",{sid:D.server._id,did:D.database._id,scid:D.schema._id,func_id:D.edbproc._id})}else var k=t("debugger.get_arguments",{sid:this.data.server_id,did:this.data.database_id,scid:this.data.schema_id,func_id:this.data.function_id});r.ajax({url:k,method:"GET",async:!1,success:function(e){if(0!=e.data.args_count)for(b=0;b<e.data.result.length;b++)u.push({arg_id:e.data.result[b].arg_id,is_null:e.data.result[b].is_null,is_expression:e.data.result[b].is_expression,use_default:e.data.result[b].use_default,value:e.data.result[b].value})},error:function(t){n.alert(e("Debugger Error"),e("Unable to fetch the arguments from server"))}});var y,x,w,E,C,N,T=d.HeaderCell.extend({className:"width_percent_25"}),S=[],P=[{name:"name",label:e("Name"),type:"text",editable:!1,cell:"string"},{name:"type",label:e("Type"),type:"text",editable:!1,cell:"string"},{name:"is_null",label:e("Null?"),type:"boolean",cell:"boolean"},{name:"expr",label:e("Expression?"),type:"boolean",cellFunction:_,editable:v},{name:"value",label:e("Value"),type:"text",editable:!0,cellFunction:g,headerCell:T},{name:"use_default",label:e("Use Default?"),type:"boolean",cell:"boolean",editable:f},{name:"default_value",label:e("Default value"),type:"text",editable:!1,cell:"string"}],O=[],M=[],L=this.input_arg_id=[];if(null!=this.data.proargmodes)for(var A=this.data.proargmodes.split(","),G=0;G<A.length;G++)"i"!=A[G]&&"b"!=A[G]||L.push(G);else for(var I=this.data.proargtypenames.split(","),G=0;G<I.length;G++)L.push(G);if(x=this.data.proargtypenames.split(","),null!=this.data.proargmodes&&(w=this.data.proargmodes.split(",")),this.data.pronargdefaults&&(E=this.data.pronargdefaults,C=this.data.proargdefaults.split(","),N=E),null!=this.data.proargnames){y=this.data.proargnames.split(",");for(var B=y.length-1;B>=0;B--)null!=this.data.proargmodes?!N||"i"!=w[B]&&"b"!=w[B]?S[B]="<No default value>":(N-=1,S[B]=C[N]):N?(N-=1,S[B]=C[N]):S[B]="<No default value>";if(0!=x.length)for(b=0;b<x.length;b++)if(null!=this.data.proargmodes){if("i"==w[b]||"b"==w[b]){var j=!1;"<No default value>"!=S[b]&&(j=!0),O.push({name:y[b],type:x[b],use_default:j,default_value:S[b]})}}else{var j=!1;"<No default value>"!=S[b]&&(j=!0),O.push({name:y[b],type:x[b],use_default:j,default_value:S[b]})}if(0!=u.length)for(b=0;b<u.length;b++){var q=u[b].arg_id,F=[];if(-1!=x[q].indexOf("[]")){var z=u[b].value.split(",");-1!=x[q].indexOf("integer")&&a.each(z,function(e){F.push({value:parseInt(e)})}),a.each(z,function(e){F.push({value:e})})}else F=u[b].value;M.push({name:y[q],type:x[q],is_null:!!u[b].is_null,expr:!!u[b].is_expression,value:F,use_default:!!u[b].use_default,default_value:S[q]})}}else{var $=[];for(b=0;b<x.length;b++)$[b]="dbgparam"+(b+1);if(this.data.pronargdefaults){for(var B=$.length-1;B>=0;B--)null==this.data.proargmodes?N?(N-=1,S[B]=C[N]):S[B]="<No default value>":!N||"i"!=w[B]&&"b"!=w[B]?S[B]="<No default value>":(N-=1,S[B]=C[N]);for(b=0;b<x.length;b++)if(null==this.data.proargmodes){var j=!1;"<No default value>"!=S[b]&&(j=!0),O.push({name:$[b],type:x[b],use_default:j,default_value:S[b]})}else if("i"==w[b]||"b"==w[b]){var j=!1;"<No default value>"!=S[b]&&(j=!0),O.push({name:$[b],type:x[b],use_default:j,default_value:S[b]})}}else for(b=0;b<x.length;b++)O.push({name:$[b],type:x[b],use_default:!1,default_value:"<No default value>"}),S[b]="<No default value>";if(0!=u.length)for(b=0;b<u.length;b++){var q=u[b].arg_id,F=[];if(-1!=x[q].indexOf("[]")){var z=u[b].value.split(",");-1!=x[q].indexOf("integer")&&a.each(z,function(e){F.push({value:parseInt(e)})}),a.each(z,function(e){F.push({value:e})})}else F=u[b].value;M.push({name:$[q],type:x[q],is_null:!!u[b].is_null,expr:!!u[b].is_expression,value:F,use_default:!!u[b].use_default,default_value:S[q]})}}if(0==u.length)var R=this.debuggerInputArgsColl=new p(O);else var R=this.debuggerInputArgsColl=new p(M);this.grid&&(this.grid.remove(),this.grid=null);var V=this.grid=new d.Grid({columns:P,collection:R,className:"backgrid table-bordered"});V.render(),r(this.elements.content).html(V.el);var K=r(V.el).find("input:checkbox").first();K.length&&setTimeout(function(){K.click()},250)},setup:function(){return{buttons:[{text:"Debug",key:13,className:"btn btn-primary"},{text:"Cancel",key:27,className:"btn btn-primary"}],options:{padding:!1,overflow:!1,model:0,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1,modal:!1}}},callback:function(a){if("Debug"===a.button.text){var i=this;if(0==i.restart_debug){var o=s.tree,l=o.selected(),d=l&&1==l.length?o.itemData(l):void 0,u=d&&s.Nodes[d._type];if(!d)return;var c=u.getTreeNodeHierarchy.apply(u,[l])}var g=[],_=this.sqlite_func_args_list=[],b=0;if(this.grid.collection.each(function(e){if(e.get("is_null")?g.push({name:e.get("name"),type:e.get("type"),value:"NULL"}):e.get("use_default")?g.push({name:e.get("name"),type:e.get("type"),value:e.get("default_value")}):g.push({name:e.get("name"),type:e.get("type"),value:e.get("value")}),0==i.restart_debug){var t;"function"==d._type?t=c.function._id:"procedure"==d._type?t=c.procedure._id:"edbfunc"==d._type?t=c.edbfunc._id:"edbproc"==d._type&&(t=c.edbproc._id),_.push({server_id:c.server._id,database_id:c.database._id,schema_id:c.schema._id,function_id:t,arg_id:i.input_arg_id[b],is_null:e.get("is_null")?1:0,is_expression:e.get("expr")?1:0,use_default:e.get("use_default")?1:0,value:e.get("value")})}else _.push({server_id:i.data.server_id,database_id:i.data.database_id,schema_id:i.data.schema_id,function_id:i.data.function_id,arg_id:i.input_arg_id[b],is_null:e.get("is_null")?1:0,is_expression:e.get("expr")?1:0,use_default:e.get("use_default")?1:0,value:e.get("value")});b+=1}),0==i.restart_debug){var p;"function"==d._type?p=t("debugger.initialize_target_for_function",{debug_type:"direct",sid:c.server._id,did:c.database._id,scid:c.schema._id,func_id:c.function._id}):"procedure"==d._type?p=t("debugger.initialize_target_for_function",{debug_type:"direct",sid:c.server._id,did:c.database._id,scid:c.schema._id,func_id:c.procedure._id}):"edbfunc"==d._type?p=t("debugger.initialize_target_for_function",{debug_type:"direct",sid:c.server._id,did:c.database._id,scid:c.schema._id,func_id:c.edbfunc._id}):"edbproc"==d._type&&(p=t("debugger.initialize_target_for_function",{debug_type:"direct",sid:c.server._id,did:c.database._id,scid:c.schema._id,func_id:c.edbproc._id})),r.ajax({url:p,method:"POST",data:{data:JSON.stringify(g)},success:function(a){var i=t("debugger.direct",{trans_id:a.data.debuggerTransId});if(a.data.newBrowserTab)window.open(i,"_blank");else{s.Events.once("pgadmin-browser:frame:urlloaded:frm_debugger",function(e){e.openURL(i)});var o=s.docker.findPanels("properties"),l=s.docker.addPanel("frm_debugger",wcDocker.DOCK.STACKED,o[0]);l.focus(),l.on(wcDocker.EVENT.CLOSED,function(){var e=t("debugger.close",{trans_id:a.data.debuggerTransId});r.ajax({url:e,method:"DELETE"})})}if("function"==d._type)var u=t("debugger.set_arguments",{sid:c.server._id,did:c.database._id,scid:c.schema._id,func_id:c.function._id});else if("procedure"==d._type)var u=t("debugger.set_arguments",{sid:c.server._id,did:c.database._id,scid:c.schema._id,func_id:c.procedure._id});else if("edbfunc"==d._type)var u=t("debugger.set_arguments",{sid:c.server._id,did:c.database._id,scid:c.schema._id,func_id:c.edbfunc._id});else if("edbproc"==d._type)var u=t("debugger.set_arguments",{sid:c.server._id,did:c.database._id,scid:c.schema._id,func_id:c.edbproc._id});r.ajax({url:u,method:"POST",data:{data:JSON.stringify(_)},success:function(e){},error:function(t){n.alert(e("Debugger Error"),e("Unable to set the arguments on the server"))}})},error:function(t){n.alert(e("Debugger Target Initialization Error"),t.responseJSON.errormsg)}})}else{var p=t("debugger.start_listener",{trans_id:i.data.trans_id});r.ajax({url:p,method:"POST",data:{data:JSON.stringify(g)},success:function(e){},error:function(t){n.alert(e("Debugger Listener Startup Error"),t.responseJSON.errormsg)}});var f=t("debugger.set_arguments",{sid:i.data.server_id,did:i.data.database_id,scid:i.data.schema_id,func_id:i.data.function_id});r.ajax({url:f,method:"POST",data:{data:JSON.stringify(_)},success:function(e){},error:function(t){n.alert(e("Debugger Error"),e("Unable to set the arguments on the server"))}})}return!0}if("Cancel"===a.button.text)return!1},build:function(){n.pgDialogBuild.apply(this)},prepare:function(){r(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties obj_properties"),0==this.func_args_data.length?this.__internal.buttons[0].element.disabled=!0:this.__internal.buttons[0].element.disabled=!1,this.grid.listenTo(this.debuggerInputArgsColl,"backgrid:edited",function(e){return function(){for(var t=!1,r=0;r<this.collection.length;r++)if(""==this.collection.models[r].get("value")||null==this.collection.models[r].get("value")||void 0==this.collection.models[r].get("value")){if(t=!0,!this.collection.models[r].get("use_default")){e.__internal.buttons[0].element.disabled=!0;break}e.__internal.buttons[0].element.disabled=!1}t||(e.__internal.buttons[0].element.disabled=!1)}}(this))}}}),n.debuggerInputArgsDialog("Debugger",i,o).resizeTo("60%","60%")}}.apply(t,a))&&(e.exports=i)}},[157]).default});