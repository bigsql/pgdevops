{"version":3,"file":"pgadmin_commons.js","sources":["webpack:///pgadmin/browser/static/js/panel.js","webpack:///pgadmin/static/js/alertify.pgadmin.defaults.js?90ca","webpack:///pgadmin/browser/static/js/menu.js","webpack:///pgadmin/browser/static/js/frame.js","webpack:///pgadmin/misc/file_manager/static/js/file_manager.js","webpack:///pgadmin/browser/server_groups/servers/static/js/variable.js","webpack:///pgadmin/browser/server_groups/servers/static/js/privilege.js","webpack:///pgadmin/static/js/backform.pgadmin.js","webpack:///pgadmin/preferences/static/js/preferences.js","webpack:///pgadmin/browser/static/js/error.js","webpack:///pgadmin/browser/static/js/datamodel.js","webpack:///pgadmin/settings/static/js/settings.js","webpack:///pgadmin/browser/static/js/wizard.js","webpack:///pgadmin/static/js/backgrid.pgadmin.js","webpack:///pgadmin/browser/static/js/node.js","webpack:///pgadmin/static/js/slickgrid/formatters.js","webpack:///pgadmin/static/js/slickgrid/editors.js","webpack:///pgadmin/browser/static/js/node.ui.js","webpack:///pgadmin/browser/static/js/browser.js","webpack:///pgadmin/browser/static/js/collection.js"],"sourcesContent":["define(\n    ['underscore', 'sources/pgadmin', 'wcdocker'],\nfunction(_, pgAdmin) {\n\n  var pgBrowser = pgAdmin.Browser = pgAdmin.Browser || {};\n\n  pgAdmin.Browser.Panel = function(options) {\n    var defaults = [\n      'name', 'title', 'width', 'height', 'showTitle', 'isCloseable',\n      'isPrivate', 'content', 'icon', 'events', 'onCreate', 'elContainer',\n      'canHide', 'limit'\n    ];\n    _.extend(this, _.pick(options, defaults));\n  }\n\n  _.extend(pgAdmin.Browser.Panel.prototype, {\n    name:'',\n    title: '',\n    width: 300,\n    height: 600,\n    showTitle: true,\n    isCloseable: true,\n    isPrivate: false,\n    content: '',\n    icon: '',\n    panel: null,\n    onCreate: null,\n    elContainer: false,\n    limit: null,\n    load: function(docker, title) {\n      var that = this;\n      if (!that.panel) {\n        docker.registerPanelType(that.name, {\n          title: that.title,\n          isPrivate: that.isPrivate,\n          limit: that.limit,\n          onCreate: function(myPanel) {\n            $(myPanel).data('pgAdminName', that.name);\n            myPanel.initSize(that.width, that.height);\n\n            if (!that.showTitle)\n              myPanel.title(false);\n            else {\n              myPanel.title(title || that.title);\n              if (that.icon != '')\n                myPanel.icon(that.icon)\n            }\n\n            var $container = $('<div>', {\n              'class': 'pg-panel-content'\n            }).append($(that.content));\n\n            myPanel.closeable(!!that.isCloseable);\n            myPanel.layout().addItem($container);\n            that.panel = myPanel;\n            if (that.events && _.isObject(that.events)) {\n              _.each(that.events, function(v, k) {\n                if (v && _.isFunction(v)) {\n                  myPanel.on(k, v);\n                }\n              });\n            }\n            _.each([\n                wcDocker.EVENT.UPDATED, wcDocker.EVENT.VISIBILITY_CHANGED,\n                wcDocker.EVENT.BEGIN_DOCK, wcDocker.EVENT.END_DOCK,\n                wcDocker.EVENT.GAIN_FOCUS, wcDocker.EVENT.LOST_FOCUS,\n                wcDocker.EVENT.CLOSED, wcDocker.EVENT.BUTTON,\n                wcDocker.EVENT.ATTACHED, wcDocker.EVENT.DETACHED,\n                wcDocker.EVENT.MOVE_STARTED, wcDocker.EVENT.MOVE_ENDED,\n                wcDocker.EVENT.MOVED, wcDocker.EVENT.RESIZE_STARTED,\n                wcDocker.EVENT.RESIZE_ENDED, wcDocker.EVENT.RESIZED,\n                wcDocker.EVENT.SCROLLED], function(ev) {\n                  myPanel.on(ev, that.eventFunc.bind(myPanel, ev));\n                });\n\n            if (that.onCreate && _.isFunction(that.onCreate)) {\n              that.onCreate.apply(that, [myPanel, $container]);\n            }\n\n            if (that.elContainer) {\n              myPanel.pgElContainer = $container;\n              $container.addClass('pg-el-container');\n              _.each([\n                wcDocker.EVENT.RESIZED, wcDocker.EVENT.ATTACHED,\n                wcDocker.EVENT.DETACHED, wcDocker.EVENT.VISIBILITY_CHANGED\n              ], function(ev) {\n                myPanel.on(ev, that.resizedContainer.bind(myPanel));\n              });\n              that.resizedContainer.apply(myPanel);\n            }\n\n            // Bind events only if they are configurable\n            if (that.canHide) {\n              _.each([wcDocker.EVENT.CLOSED, wcDocker.EVENT.VISIBILITY_CHANGED],\n                function(ev) {\n                  myPanel.on(ev, that.handleVisibility.bind(myPanel, ev));\n                });\n            }\n          }\n        });\n      }\n    },\n    eventFunc: function(eventName) {\n      var name = $(this).data('pgAdminName');\n\n      try {\n        pgBrowser.Events.trigger('pgadmin-browser:panel', eventName, this, arguments);\n        pgBrowser.Events.trigger('pgadmin-browser:panel:' + eventName, this, arguments);\n\n        if (name) {\n          pgBrowser.Events.trigger('pgadmin-browser:panel-' + name, eventName, this, arguments);\n          pgBrowser.Events.trigger('pgadmin-browser:panel-' + name + ':' + eventName, this, arguments);\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    },\n    resizedContainer: function() {\n      var p = this;\n\n      if (p.pgElContainer && !p.pgResizeTimeout) {\n        if (!p.isVisible()) {\n          clearTimeout(p.pgResizeTimeout);\n          p.pgResizeTimeout = null;\n\n          return;\n        }\n        p.pgResizeTimeout = setTimeout(\n          function() {\n            var w = p.width();\n            p.pgResizeTimeout = null;\n\n            if (w <= 480) {\n              w = 'xs';\n            } else if (w < 600) {\n              w = 'sm';\n            } else if (w < 768) {\n              w = 'md';\n            } else {\n              w = 'lg';\n            }\n\n            p.pgElContainer.attr('el', w);\n          },\n          100\n        );\n      }\n    },\n    handleVisibility: function(eventName) {\n      // Currently this function only works with dashboard panel but\n      // as per need it can be extended\n      if (this._type != 'dashboard' || _.isUndefined(pgAdmin.Dashboard))\n        return;\n\n      if (eventName == 'panelClosed') {\n        pgBrowser.save_current_layout(pgBrowser);\n        pgAdmin.Dashboard.toggleVisibility(false);\n      }\n      else if (eventName == 'panelVisibilityChanged') {\n        if (pgBrowser.tree) {\n          pgBrowser.save_current_layout(pgBrowser);\n          var selectedNode = pgBrowser.tree.selected();\n          // Discontinue this event after first time visible\n          this.off(wcDocker.EVENT.VISIBILITY_CHANGED);\n          if (!_.isUndefined(pgAdmin.Dashboard))\n            pgAdmin.Dashboard.toggleVisibility(true);\n          // Explicitly trigger tree selected event when we add the tab.\n          pgBrowser.Events.trigger('pgadmin-browser:tree:selected', selectedNode,\n          pgBrowser.tree.itemData(selectedNode), pgBrowser.Node);\n        }\n      }\n    }\n\n  });\n\n  return pgAdmin.Browser.Panel;\n});\n\n\n\n// WEBPACK FOOTER //\n// pgadmin/browser/static/js/panel.js","define(\n    ['sources/gettext', 'alertify', 'underscore.string'],\nfunction(gettext, alertify, S) {\n  alertify.defaults.transition = \"zoom\";\n  alertify.defaults.theme.ok = \"btn btn-primary\";\n  alertify.defaults.theme.cancel = \"btn btn-danger\";\n  alertify.defaults.theme.input = \"form-control\";\n  alertify.pgIframeDialog || alertify.dialog('pgIframeDialog', function() {\n    var iframe;\n    return {\n        // dialog constructor function, this will be called when the user calls\n        // alertify.pgIframeDialog(message)\n        main:function(message){\n            //set the videoId setting and return current instance for chaining.\n            return this.set({\n                'pg_msg': message\n            });\n        },\n        // we only want to override two options (padding and overflow).\n        setup: function(){\n            return {\n                options:{\n                    //disable both padding and overflow control.\n                    padding : !1,\n                    overflow: !1,\n                }\n            };\n        },\n        // This will be called once the DOM is ready and will never be invoked\n        // again. Here we create the iframe to embed the video.\n        build:function() {\n            // create the iframe element\n            iframe = document.createElement('iframe');\n\n            iframe.src = \"\";\n            iframe.frameBorder = \"no\";\n            iframe.width = \"100%\";\n            iframe.height = \"100%\";\n\n            // add it to the dialog\n            this.elements.content.appendChild(iframe);\n\n            //give the dialog initial height (half the screen height).\n            this.elements.body.style.minHeight = screen.height * .5 + 'px';\n        },\n        // dialog custom settings\n        settings:{\n            pg_msg: undefined\n        },\n        // listen and respond to changes in dialog settings.\n        settingUpdated: function(key, oldValue, newValue){\n            switch(key){\n               case 'pg_msg':\n                  var doc = iframe.contentWindow || iframe.contentDocument;\n                  if (doc.document) {\n                    doc = doc.document;\n                  }\n\n                  doc.open();\n                  doc.write(newValue);\n                  doc.close();\n\n                  break;\n            }\n        },\n        // listen to internal dialog events.\n        hooks: {\n            // triggered when a dialog option gets update.\n            // warning! this will not be triggered for settings updates.\n            onupdate: function(option,oldValue, newValue){\n                switch(option){\n                    case 'resizable':\n                        if(newValue){\n                            this.elements.content.removeAttribute('style');\n                            iframe && iframe.removeAttribute('style');\n                        }else{\n                            this.elements.content.style.minHeight = 'inherit';\n                            iframe && (iframe.style.minHeight = 'inherit');\n                        }\n                    break;\n                }\n            }\n        }\n    };\n  });\n  alertify.pgNotifier = function(type, xhr, promptmsg, onJSONResult) {\n      var msg = xhr.responseText,\n          contentType = xhr.getResponseHeader('Content-Type');\n\n      if (xhr.status == 0) {\n        msg = gettext('Connection to the server has been lost.');\n        promptmsg = gettext('Connection Lost');\n      } else {\n        if (contentType) {\n          try {\n            if (contentType.indexOf('application/json') == 0) {\n              var resp = $.parseJSON(msg);\n\n              if (resp.result != null && (!resp.errormsg || resp.errormsg == '') &&\n                  onJSONResult && typeof(onJSONResult) == 'function') {\n                return onJSONResult(resp.result);\n              }\n              msg = _.escape(resp.result) || _.escape(resp.errormsg) || \"Unknown error\";\n            }\n            if (contentType.indexOf('text/html') == 0) {\n              var alertMessage = promptmsg;\n              if (type === 'error') {\n                alertMessage = '\\\n                  <div class=\"media font-red-3 text-14\">\\\n                    <div class=\"media-body media-middle\">\\\n                      <div class=\"alert-text\">' + promptmsg + '</div><br/>\\\n                      <div class=\"alert-text\">' + gettext('Click for details.') + '</div>\\\n                    </div>\\\n                  </div>';\n              }\n\n              alertify.notify(\n                alertMessage, type, 0, function() {\n                  alertify.pgIframeDialog().show().set({frameless: false}).set(\n                    'pg_msg', msg\n                  );\n                });\n                return;\n            }\n          } catch (e) {\n            alertify.alert().show().set('message', e.message).set('title', \"Error\");\n          }\n        }\n      }\n      alertify.alert().show().set(\n        'message', msg.replace(new RegExp('\\r?\\n','g'), '<br />')\n        ).set('title', promptmsg);\n  };\n\n  var alertifyDialogResized = function(stop) {\n    var self = this;\n\n    if (stop) {\n      self.pgResizeRecursion = false;\n    }\n\n    if(self.pgResizeTimeout) {\n      return;\n    }\n\n    self.pgResizeTimeout = setTimeout(\n      function() {\n        var $el = $(this.elements.dialog),\n            w = $el.width();\n\n        this.pgResizeTimeout = null;\n\n        if (w <= 480) {\n          w = 'xs';\n        } else if (w < 600) {\n          w = 'sm';\n        } else if (w < 768) {\n          w = 'md';\n        } else {\n          w = 'lg';\n        }\n\n        $el.attr('el', w);\n      }.bind(self),\n      100\n    );\n  };\n\n  var alertifyDialogStartResizing = function(start) {\n    var self = this;\n\n    if (start) {\n      self.pgResizeRecursion = true;\n    }\n\n    setTimeout(\n      function() {\n        alertifyDialogResized.apply(self);\n\n        if (self.pgResizeRecursion) {\n          alertifyDialogStartResizing.apply(self, [false]);\n        }\n      }, 100\n    );\n  };\n\n  alertify.pgDialogBuild = function() {\n    this.set('onshow', function() {\n      this.elements.dialog.classList.add('pg-el-container')\n      alertifyDialogResized.apply(this, arguments);\n    });\n    this.set('onresize', alertifyDialogStartResizing.bind(this, true));\n    this.set('onresized', alertifyDialogResized.bind(this, true));\n    this.set('onmaximized', alertifyDialogResized);\n    this.set('onrestored', alertifyDialogResized);\n  };\n\n  alertify.pgHandleItemError = function(xhr, error, message, args) {\n    var pgBrowser = window.pgAdmin.Browser;\n\n    if (!xhr || !pgBrowser) {\n      return;\n    }\n\n    var msg = xhr.responseText,\n        contentType = xhr.getResponseHeader('Content-Type'),\n        msg = xhr.responseText,\n        jsonResp = contentType &&\n          contentType.indexOf('application/json') == 0 &&\n            $.parseJSON(xhr.responseText);\n\n    if (\n      jsonResp && (\n        xhr.status == 503 ? (\n          jsonResp.info == 'CONNECTION_LOST' &&\n            'server' in args.info && jsonResp.data.sid >= 0 &&\n              jsonResp.data.sid == args.info.server._id\n        ) : (\n        xhr.status == 428 &&\n          jsonResp.errormsg &&\n            jsonResp.errormsg == gettext(\"Connection to the server has been lost.\")\n        )\n      )\n    ) {\n      if (\n        args.preHandleConnectionLost &&\n        typeof(args.preHandleConnectionLost) == 'function'\n      ) {\n        args.preHandleConnectionLost.apply(this, arguments);\n      }\n\n      // Check the status of the maintenance server connection.\n      var server = pgBrowser.Nodes['server'],\n          ctx = {\n            resp: jsonResp,\n            xhr: xhr,\n            args: args\n          },\n          reconnectServer = function() {\n            var ctx = this,\n                onServerConnect = function(_sid, _i, _d) {\n                  // Yay - server is reconnected.\n                  if (this.args.info.server._id == _sid) {\n                    pgBrowser.Events.off(\n                      'pgadmin:server:connected', onServerConnect\n                    );\n                    pgBrowser.Events.off(\n                      'pgadmin:server:connect:cancelled', onConnectCancel\n                    );\n\n                    // Do we need to connect the disconnected server now?\n                    if (\n                      this.resp.data.database &&\n                      this.resp.data.database != _d.db\n                    ) {\n                      // Server is connected now, we will need to inform the\n                      // database to connect it now.\n                      pgBrowser.Events.trigger(\n                        'pgadmin:database:connection:lost', this.args.item,\n                        this.resp, true\n                      );\n                    }\n                  }\n                }.bind(ctx),\n                onConnectCancel = function(_sid, _item, _data) {\n                  // User has cancelled the operation in between.\n                  if (_sid == this.args.info.server.id) {\n                    pgBrowser.Events.off('pgadmin:server:connected', onServerConnect);\n                    pgBrowser.Events.off('pgadmin:server:connect:cancelled', onConnectCancel);\n\n                    // Connection to the database will also be cancelled\n                    pgBrowser.Events.trigger(\n                      'pgadmin:database:connect:cancelled', _sid,\n                      this.resp.data.database || _data.db, _item, _data\n                    );\n                  }\n                }.bind(ctx);\n\n            pgBrowser.Events.on('pgadmin:server:connected', onServerConnect);\n            pgBrowser.Events.on('pgadmin:server:connect:cancelled', onConnectCancel);\n\n            // Connection to the server has been lost, we need to inform the\n            // server first to take the action first.\n            pgBrowser.Events.trigger(\n              'pgadmin:server:connection:lost', this.args.item, this.resp\n            );\n          }.bind(ctx);\n\n      $.ajax({\n        url: server.generate_url(\n          null, 'connect', args.info.server, true, args.info\n        ),\n        dataType: 'json',\n        success: function(res) {\n          if (res.success && 'connected' in res.data) {\n            if (res.data.connected) {\n              // Server is connected, but - the connection with the\n              // particular database has been lost.\n              pgBrowser.Events.trigger(\n                'pgadmin:database:connection:lost', args.item, jsonResp\n              );\n              return;\n            }\n          }\n\n          // Serever was not connected, we should first try to connect\n          // the server.\n          reconnectServer();\n        },\n        error: function() {\n          reconnectServer();\n        }\n      });\n      return true;\n    }\n    return false;\n  };\n\n  var alertifySuccess = alertify.success,\n      alertifyError   = alertify.error;\n\n  /*\n  For adding the jasmine test cases, we needed to refer the original success,\n   and error functions, as orig_success and orig_error respectively.\n  */\n  _.extend(alertify, {\n    orig_success: alertifySuccess, orig_error: alertifyError\n  });\n\n  _.extend(alertify, {\n    success: function (message, timeout, callback) {\n      var alertMessage = '\\\n      <div class=\"media font-green-3 text-14\">\\\n        <div class=\"media-body media-middle\">\\\n          <div class=\"alert-icon success-icon\">\\\n            <i class=\"fa fa-check\" aria-hidden=\"true\"></i>\\\n          </div>\\\n            <div class=\"alert-text\">' + message + '</div>\\\n        </div>\\\n      </div>';\n      return alertify.orig_success(alertMessage, timeout, callback);\n    },\n    error: function(message, timeout, callback) {\n      var alertMessage = '\\\n      <div class=\"media font-red-3 text-14\">\\\n        <div class=\"media-body media-middle\">\\\n          <div class=\"alert-icon error-icon\">\\\n            <i class=\"fa fa-exclamation-triangle\" aria-hidden=\"true\"></i>\\\n          </div>\\\n            <div class=\"alert-text\">' + message + '</div>\\\n        </div>\\\n      </div>';\n      return alertify.orig_error(alertMessage, timeout, callback);\n    },\n    info: function(message, timeout) {\n      var alertMessage = '\\\n      <div class=\"media alert-info font-blue text-14\">\\\n        <div class=\"media-body media-middle\">\\\n          <div class=\"alert-icon info-icon\">\\\n            <i class=\"fa fa-info\" aria-hidden=\"true\"></i>\\\n          </div>\\\n            <div class=\"alert-text\">' + message + '</div>\\\n        </div>\\\n      </div>';\n      var alert = alertify.notify(alertMessage, timeout);\n      return alert;\n    }\n  });\n\n  return alertify;\n});\n\n\n\n// WEBPACK FOOTER //\n// pgadmin/static/js/alertify.pgadmin.defaults.js","define(\n   ['underscore', 'underscore.string', 'sources/pgadmin', 'jquery'],\nfunction(_, S, pgAdmin, $) {\n  'use strict';\n\n  pgAdmin.Browser = pgAdmin.Browser || {};\n\n  // Individual menu-item class\n  var MenuItem = pgAdmin.Browser.MenuItem = function(opts) {\n    var menu_opts = [\n      'name', 'label', 'priority', 'module', 'callback', 'data', 'enable',\n      'category', 'target', 'url'/* Do not show icon in the menus, 'icon' */, 'node'\n    ],\n    defaults = {\n      url: '#',\n      target: '_self',\n      enable: true\n    };\n    _.extend(this, defaults, _.pick(opts, menu_opts));\n  };\n\n  _.extend(pgAdmin.Browser.MenuItem.prototype, {\n    /*\n     *  Keeps track of the jQuery object representing this menu-item. This will\n     *  be used by the update function to enable/disable the individual item.\n     */\n    $el: null,\n    /*\n     * Generate the UI for this menu-item. enable/disable, based on the\n     * currently selected object.\n     */\n    generate: function(node, item) {\n      this.create_el(node, item);\n\n      this.context = {\n        name: this.label,\n        /* icon: this.icon || this.module && (this.module.type), */\n        disabled: this.is_disabled,\n        callback: this.context_menu_callback.bind(this, item)\n      };\n\n      return this.$el;\n    },\n\n    /*\n     * Create the jquery element for the menu-item.\n     */\n    create_el: function(node, item) {\n      var url = $('<a></a>', {\n          'id': this.name,\n          'href': this.url,\n          'target': this.target,\n          'data-toggle': 'pg-menu'\n        }).data('pgMenu', {\n          module: this.module || pgAdmin.Browser,\n          cb: this.callback,\n          data: this.data\n        }).addClass('menu-link');\n\n      this.is_disabled = this.disabled(node, item);\n      if (this.icon) {\n        url.append($('<i></i>', {'class': this.icon}));\n      }\n\n      var textSpan = $('<span data-test=\"menu-item-text\"></span>').text('  ' + this.label);\n\n      url.append(textSpan);\n\n      this.$el = $('<li/>')\n        .addClass('menu-item' + (this.is_disabled ? ' disabled' : ''))\n        .append(url);\n\n      this.applyStyle();\n    },\n\n    applyDisabledStyle: function () {\n      var span = this.$el.find('span');\n      var icon = this.$el.find('i');\n\n\n      span.addClass('font-gray-4');\n      span.removeClass('font-white');\n      icon.addClass('font-gray-4');\n      icon.removeClass('font-white');\n    },\n\n    applyEnabledStyle: function () {\n      var element = this.$el;\n      var span = this.$el.find('span');\n\n      span.addClass('font-white');\n      span.removeClass('font-gray-4');\n      element.find('i').addClass('font-white');\n      element.find('i').removeClass('font-gray-4');\n\n      span.mouseover(function () { element.addClass('bg-gray-5'); });\n      span.mouseout(function () { element.removeClass('bg-gray-5'); });\n    },\n\n    applyStyle: function () {\n      if (this.is_disabled) {\n        this.applyDisabledStyle();\n      } else {\n        this.applyEnabledStyle();\n      }\n    },\n\n    /*\n     * Updates the enable/disable state of the menu-item based on the current\n     * selection using the disabled function. This also creates a object\n     * for this menu, which can be used in the context-menu.\n     */\n    update: function(node, item) {\n\n      if (this.$el && !this.$el.hasClass('disabled')) {\n        this.$el.addClass('disabled');\n      }\n\n      this.is_disabled = this.disabled(node, item);\n      if (this.$el && !this.is_disabled) {\n        this.$el.removeClass('disabled');\n      }\n\n      if(this.$el) {\n        this.applyStyle();\n      }\n\n      this.context = {\n        name: this.label,\n        /* icon: this.icon || (this.module && this.module.type), */\n        disabled: this.is_disabled,\n        callback: this.context_menu_callback.bind(this, item)\n      };\n    },\n\n    /*\n     * This will be called when context-menu is clicked.\n     */\n    context_menu_callback: function(item) {\n      var o = this, cb;\n\n      if (o.module['callbacks'] && (\n        o.callback in o.module['callbacks']\n      )) {\n        cb = o.module['callbacks'][o.callback];\n      } else if (o.callback in o.module) {\n        cb = o.module[o.callback];\n      }\n      if (cb) {\n        cb.apply(o.module, [o.data, item]);\n      } else {\n        pgAdmin.Browser.report_error(\n          S('Developer Warning: Callback - \"%s\" not found!').\n            sprintf(o.cb).value()\n        );\n      }\n    },\n\n    /*\n     * Checks this menu enable/disable state based on the selection.\n     */\n    disabled: function(node, item) {\n      if (this.enable == undefined) {\n        return false;\n      }\n\n      if (this.node) {\n        if (!node) {\n          return true;\n        }\n        if (_.isArray(this.node) ? (\n          _.indexOf(this.node, node) == -1\n        ) : (this.node != node._type)) {\n          return true;\n        }\n      }\n\n      if (_.isBoolean(this.enable)) return !this.enable;\n      if (_.isFunction(this.enable)) return !this.enable.apply(this.module, [node, item, this.data]);\n      if (this.module && _.isBoolean(this.module[this.enable])) return !this.module[this.enable];\n      if (this.module && _.isFunction(this.module[this.enable])) return !(this.module[this.enable]).apply(this.module, [node, item, this.data]);\n\n      return false;\n    }\n  });\n\n  /*\n   * This a class for creating a menu group, mainly used by the submenu\n   * creation logic.\n   *\n   * Arguments:\n   * 1. Options to render the submenu DOM Element.\n   *    i.e. label, icon, above (separator), below (separator)\n   * 2. List of menu-items comes under this submenu.\n   * 3. Did we rendered separator after the menu-item/submenu?\n   * 4. A unique-id for this menu-item.\n   *\n   * Returns a object, similar to the menu-item, which has his own jQuery\n   * Element, context menu representing object, etc.\n   *\n   */\n\n  pgAdmin.Browser.MenuGroup = function(opts, items, prev, ctx) {\n    var template = _.template([\n          '<% if (above) { %><hr><% } %>',\n          '<li class=\"menu-item dropdown dropdown-submenu\">',\n          ' <a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">',\n          '  <% if (icon) { %><i class=\"<%= icon %>\"></i><% } %>',\n          '  <span><%= label %></span>',\n          ' </a>',\n          ' <ul class=\"dropdown-menu navbar-inverse\">',\n          ' </ul>',\n          '</li>',\n          '<% if (below) { %><hr><% } %>',].join('\\n')),\n          data = {\n            'label': opts.label,\n            'icon': opts.icon,\n            'above': opts.above && !prev,\n            'below': opts.below,\n          }, m,\n          $el = $(template(data)),\n          $menu = $el.find('.dropdown-menu'),\n          submenus = {},\n          ctxId = 1;\n\n      ctx = _.uniqueId(ctx + '_sub_');\n\n      // Sort by alphanumeric ordered first\n      items.sort(function(a, b) {return a.label.localeCompare(b.label);});\n      // Sort by priority\n      items.sort(function(a, b) {return a.priority - b.priority;});\n\n      for (var idx in items) {\n        m = items[idx];\n        $menu.append(m.$el);\n        if (!m.is_disabled) {\n          submenus[ctx + ctxId] = m.context;\n        }\n        ctxId++;\n      }\n\n      var is_disabled = (_.size(submenus) == 0);\n\n      return {\n        $el: $el,\n        priority: opts.priority || 10,\n        label: opts.label,\n        above: data['above'],\n        below: opts.below,\n        is_disabled: is_disabled,\n        context: {\n          name: opts.label,\n          icon: opts.icon,\n          items: submenus,\n          disabled: is_disabled\n        }\n      };\n  };\n\n  /*\n   * A function to generate menus (submenus) based on the categories.\n   * Attach the current selected browser tree node to each of the generated\n   * menu-items.\n   *\n   * Arguments:\n   * 1. jQuery Element on which you may want to created the menus\n   * 2. list of menu-items\n   * 3. categories - metadata information about the categories, based on which\n   *                 the submenu (menu-group) will be created (if any).\n   * 4. d - Data object for the selected browser tree item.\n   * 5. item - The selected browser tree item\n   * 6. menu_items - A empty object on which the context menu for the given\n   *                 list of menu-items.\n   *\n   * Returns if any menu generated for the given input.\n   */\n  pgAdmin.Browser.MenuCreator = function($mnu, menus, categories, d, item, menu_items) {\n    var groups = {'common': []},\n        common, idx = 0, j, item,\n        ctxId = _.uniqueId('ctx_'),\n        update_menuitem = function(m) {\n          if (m instanceof MenuItem) {\n            if (m.$el) {\n              m.$el.remove();\n              delete m.$el;\n            }\n            m.generate(d, item);\n            var group = groups[m.category || 'common'] =\n              groups[m.category || 'common'] || [];\n            group.push(m);\n          } else {\n            for (var key in m) {\n              update_menuitem(m[key]);\n            }\n          }\n        }, ctxIdx = 1;\n\n    for (idx in menus) {\n      update_menuitem(menus[idx]);\n    }\n\n    // Not all menu creator requires the context menu structure.\n    menu_items = menu_items || {};\n\n    common = groups['common'];\n    delete groups['common'];\n\n    var prev = true;\n\n    for (name in groups) {\n      var g = groups[name],\n          c = categories[name] || {'label': name, single: false},\n          menu_group = pgAdmin.Browser.MenuGroup(c, g, prev, ctxId);\n\n      if (g.length <= 1 && !c.single) {\n        prev = false;\n        for (idx in g) {\n          common.push(g[idx]);\n        }\n      } else {\n        prev = g.below;\n        common.push(menu_group);\n      }\n    }\n\n    // The menus will be created based on the priority given.\n    // Menu with lowest value has the highest priority. If the priority is\n    // same, then - it will be ordered by label.\n    // Sort by alphanumeric ordered first\n    common.sort(function(a, b) {return a.label.localeCompare(b.label);});\n    // Sort by priority\n    common.sort(function(a, b) {return a.priority - b.priority;});\n    var len = _.size(common);\n\n    for (idx in common) {\n      item = common[idx];\n\n      item.priority = (item.priority || 10);\n      $mnu.append(item.$el);\n      var prefix = ctxId + '_' + item.priority + '_' + ctxIdx;\n\n      if (ctxIdx != 1 && item.above && !item.is_disabled) {\n        // For creatign the seprator any string will do.\n        menu_items[prefix + '_ma'] = '----';\n      }\n\n      if (!item.is_disabled) {\n        menu_items[prefix + '_ms'] = item.context;\n      }\n\n      if (ctxId != len && item.below && !item.is_disabled) {\n        menu_items[prefix + '_mz'] = '----';\n      }\n      ctxIdx++;\n    }\n\n    return (len > 0);\n  };\n\n\n  // MENU PUBLIC CLASS DEFINITION\n  // ==============================\n  var Menu = function (element, options) {\n    this.$element  = $(element);\n    this.options   = $.extend({}, Menu.DEFAULTS, options);\n    this.isLoading = false;\n  }\n\n  Menu.DEFAULTS = {}\n\n  Menu.prototype.toggle = function (ev) {\n    var $parent = this.$element.closest('.menu-item');\n    if ($parent.hasClass('disabled')) {\n      ev.preventDefault();\n      return false;\n    }\n    var d = this.$element.data('pgMenu');\n    if (d.cb) {\n      var cb = d.module && d.module['callbacks'] && d.module['callbacks'][d.cb] || d.module && d.module[d.cb];\n      if (cb) {\n        cb.apply(d.module, [d.data, pgAdmin.Browser.tree.selected()]);\n        ev.preventDefault();\n      } else {\n        pgAdmin.Browser.report_error('Developer Warning: Callback - \"' + d.cb + '\" not found!');\n      }\n    }\n  }\n\n\n  // BUTTON PLUGIN DEFINITION\n  // ========================\n\n  function Plugin(option, ev) {\n    return this.each(function () {\n      var $this   = $(this);\n      var data  = $this.data('pg.menu');\n      var options = typeof option == 'object' && option;\n\n      if (!data) $this.data('pg.menu', (data = new Menu(this, options)));\n\n      data.toggle(ev);\n    })\n  }\n\n  var old = $.fn.button;\n\n  $.fn.pgmenu       = Plugin;\n  $.fn.pgmenu.Constructor = Menu;\n\n\n  // BUTTON NO CONFLICT\n  // ==================\n\n  $.fn.pgmenu.noConflict = function () {\n    $.fn.pgmenu = old;\n    return this;\n  }\n\n  // MENU DATA-API\n  // =============\n\n  $(document)\n    .on('click.pg.menu.data-api', '[data-toggle^=\"pg-menu\"]', function (ev) {\n      var $menu = $(ev.target);\n      if (!$menu.hasClass('menu-link'))\n        $menu = $menu.closest('.menu-link');\n      Plugin.call($menu, 'toggle', ev);\n    })\n    .on(\n      'focus.pg.menu.data-api blur.pg.menu.data-api',\n      '[data-toggle^=\"pg-menu\"]',\n      function (e) {\n        $(e.target).closest('.menu').toggleClass(\n          'focus', /^focus(in)?$/.test(e.type)\n        );\n      });\n\n  return pgAdmin.Browser.MenuItem;\n});\n\n\n\n// WEBPACK FOOTER //\n// pgadmin/browser/static/js/menu.js","define(\n    ['underscore', 'sources/pgadmin', 'wcdocker'],\nfunction(_, pgAdmin) {\n\n  var pgBrowser = pgAdmin.Browser = pgAdmin.Browser || {};\n\n  pgAdmin.Browser.Frame = function(options) {\n    var defaults = [\n      'name', 'title', 'width', 'height', 'showTitle', 'isCloseable',\n      'isPrivate', 'url', 'icon', 'onCreate'];\n    _.extend(this, _.pick(options, defaults));\n  }\n\n  _.extend(pgAdmin.Browser.Frame.prototype, {\n    name:'',\n    title: '',\n    width: 300,\n    height: 600,\n    showTitle: true,\n    isClosable: true,\n    isPrivate: false,\n    url: '',\n    icon: '',\n    panel: null,\n    frame: null,\n    onCreate: null,\n    load: function(docker) {\n      var that = this;\n      if (!that.panel) {\n        docker.registerPanelType(this.name, {\n          title: that.title,\n          isPrivate: that.isPrivate,\n          onCreate: function(myPanel) {\n            $(myPanel).data('pgAdminName', that.name);\n            myPanel.initSize(that.width, that.height);\n\n            if (myPanel.showTitle == false)\n              myPanel.title(false);\n\n            myPanel.icon(that.icon)\n\n            myPanel.closeable(!!that.isCloseable);\n\n            var $frameArea = $('<div style=\"position:absolute;top:0 !important;width:100%;height:100%;display:table\">');\n            myPanel.layout().addItem($frameArea);\n            that.panel = myPanel;\n            var frame = new wcIFrame($frameArea, myPanel);\n            $(myPanel).data('frameInitialized', false);\n            $(myPanel).data('embeddedFrame', frame);\n\n            if (that.url != '' && that.url != 'about:blank') {\n              setTimeout(function() {\n                frame.openURL(that.url);\n                $(myPanel).data('frameInitialized', true);\n                pgBrowser.Events.trigger(\n                  'pgadmin-browser:frame:urlloaded:' + that.name, frame,\n                  that.url, self\n                );\n              }, 50);\n            } else {\n              frame.openURL('about:blank');\n              $(myPanel).data('frameInitialized', true);\n              pgBrowser.Events.trigger(\n                'pgadmin-browser:frame:urlloaded:' + that.name, frame,\n                that.url, self\n              );\n            }\n\n            if (that.events && _.isObject(that.events)) {\n              _.each(that.events, function(v, k) {\n                if (v && _.isFunction(v)) {\n                  myPanel.on(k, v);\n                }\n              });\n            }\n\n            _.each([\n                wcDocker.EVENT.UPDATED, wcDocker.EVENT.VISIBILITY_CHANGED,\n                wcDocker.EVENT.BEGIN_DOCK, wcDocker.EVENT.END_DOCK,\n                wcDocker.EVENT.GAIN_FOCUS, wcDocker.EVENT.LOST_FOCUS,\n                wcDocker.EVENT.CLOSED, wcDocker.EVENT.BUTTON,\n                wcDocker.EVENT.ATTACHED, wcDocker.EVENT.DETACHED,\n                wcDocker.EVENT.MOVE_STARTED, wcDocker.EVENT.MOVE_ENDED,\n                wcDocker.EVENT.MOVED, wcDocker.EVENT.RESIZE_STARTED,\n                wcDocker.EVENT.RESIZE_ENDED, wcDocker.EVENT.RESIZED,\n                wcDocker.EVENT.SCROLLED], function(ev) {\n                  myPanel.on(ev, that.eventFunc.bind(myPanel, ev));\n                });\n\n            if (that.onCreate && _.isFunction(that.onCreate)) {\n              that.onCreate.apply(that, [myPanel, frame, $container]);\n            }\n          }\n        });\n      }\n    },\n    eventFunc: function(eventName) {\n      var name = $(this).data('pgAdminName');\n\n      try {\n        pgBrowser.Events.trigger('pgadmin-browser:frame', eventName, this, arguments);\n        pgBrowser.Events.trigger('pgadmin-browser:frame:' + eventName, this, arguments);\n\n        if (name) {\n          pgBrowser.Events.trigger('pgadmin-browser:frame-' + name, eventName, this, arguments);\n          pgBrowser.Events.trigger('pgadmin-browser:frame-' + name + ':' + eventName, this, arguments);\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    }\n  });\n\n  return pgAdmin.Browser.Frame;\n});\n\n\n\n// WEBPACK FOOTER //\n// pgadmin/browser/static/js/frame.js","define('misc.file_manager', [\n      'sources/gettext', 'sources/url_for', 'jquery', 'underscore',\n      'pgadmin.alertifyjs'\n], function(gettext, url_for, $, _, alertify) {\n    pgAdmin = pgAdmin || window.pgAdmin || {};\n\n    /*\n     * Hmm... this module is already been initialized, we can refer to the old\n     * object from here.\n     */\n    if (pgAdmin.FileManager) {\n      return pgAdmin.FileManager;\n    }\n\n    pgAdmin.FileManager = {\n      init: function() {\n        if (this.initialized) {\n          return;\n        }\n\n        this.initialized = true;\n\n        // send a request to get transaction id\n        var getTransId = function(configs) {\n          return $.ajax({\n            data: configs,\n            type: \"POST\",\n            async: false,\n            url: url_for('file_manager.get_trans_id'),\n            dataType: \"json\",\n            contentType: \"application/json; charset=utf-8\",\n          });\n        };\n\n        // Function to remove trans id from session\n        var removeTransId = function(trans_id) {\n          return $.ajax({\n            type: \"GET\",\n            async: false,\n            url: url_for('file_manager.delete_trans_id', {'trans_id': trans_id}),\n            dataType: \"json\",\n            contentType: \"application/json; charset=utf-8\",\n          });\n        };\n\n        var set_last_traversed_dir = function(path, trans_id) {\n          return $.ajax({\n            url: url_for('file_manager.save_last_dir', {'trans_id': trans_id}),\n            type: 'POST',\n            data: JSON.stringify(path),\n            contentType: 'application/json'\n          });\n        };\n        // Declare the Storage dialog\n        alertify.dialog('storageManagerDlg', function() {\n          var controls = [], // Keep tracking of all the backform controls\n              // Dialog containter\n              $container = $(\"<div class='storage_dialog'></div>\"),\n              trans_id;\n\n          /*\n           * Function: renderStoragePanel\n           *\n           * Renders the FileManager in the content div based on the given\n           * configuration parameters.\n           */\n          var renderStoragePanel = function(params) {\n            /*\n             * Clear the existing html in the storage content\n             */\n            var content = $container.find('.storage_content');\n            content.empty();\n            $.get(url_for('file_manager.index'), function(data) {\n              content.append(data);\n            });\n\n            var transId = getTransId(params);\n            var t_res;\n            if (transId.readyState == 4) {\n              t_res = JSON.parse(transId.responseText);\n            }\n            trans_id = t_res.data.fileTransId;\n          };\n\n          // Dialog property\n          return {\n            main: function(params) {\n              // Set title and button name\n              var self = this;\n              if (_.isUndefined(params['dialog_title'])) {\n                params['dialog_title'] = 'Storage manager';\n              }\n              this.set('title', params['dialog_title']);\n              if (_.isUndefined(params['btn_primary'])) {\n                params['btn_primary'] = 'Select';\n              }\n              this.set('label', params['btn_primary']);\n\n              params = JSON.stringify(params);\n              $container.find('.storage_content').remove();\n              $container.append(\"<div class='storage_content'></div>\");\n              renderStoragePanel(params);\n              this.elements.dialog.style.minWidth = '630px';\n              this.show();\n              setTimeout(function() {\n                $($container.find('.file_manager')).on('enter-key', function() {\n                    $($(self.elements.footer).find('.file_manager_ok')).trigger('click')\n                });\n              }, 200);\n            },\n            settings: {\n              label: undefined\n            },\n            settingUpdated: function (key, oldValue, newValue) {\n              switch (key) {\n              case 'message':\n                  this.setMessage(newValue);\n                  break;\n              case 'label':\n                  if (this.__internal.buttons[0].element) {\n                      this.__internal.buttons[0].element.innerHTML = newValue;\n                  }\n                  break;\n              default:\n                  break;\n              }\n            },\n            setup:function() {\n              return {\n                buttons:[\n                  {\n                    text: gettext(\"Select\"), className: \"btn btn-primary fa fa-file file_manager_ok pg-alertify-button disabled\"\n                  },\n                  {\n                    text: gettext(\"Cancel\"), className: \"btn btn-danger fa fa-times pg-alertify-button\"\n                  }\n                ],\n                focus: { element: 0 },\n                options: {\n                  closableByDimmer: false,\n\n                }\n              };\n            },\n            callback: function(closeEvent) {\n              if (closeEvent.button.text == gettext(\"Select\")) {\n                var newFile = $('.storage_dialog #uploader .input-path').val(),\n                    file_data = {'path': $('.currentpath').val()};\n\n                pgAdmin.Browser.Events.trigger('pgadmin-storage:finish_btn:storage_dialog', newFile);\n\n                set_last_traversed_dir(file_data, trans_id);\n                var innerbody = $(this.elements.body).find('.storage_content')\n                $(innerbody).find('*').off();\n                innerbody.remove();\n                removeTransId(trans_id);\n              } else if (closeEvent.button.text == gettext(\"Cancel\")) {\n                var innerbody = $(this.elements.body).find('.storage_content')\n                $(innerbody).find('*').off();\n                innerbody.remove();\n                removeTransId(trans_id);\n              }\n            },\n            build: function() {\n              this.elements.content.appendChild($container.get(0));\n            },\n            hooks: {\n              onshow: function() {\n                $(this.elements.body).addClass('pgadmin-storage-body');\n              }\n            }\n          };\n        });\n\n        // Declare the Selection dialog\n        alertify.dialog('fileSelectionDlg', function() {\n          var controls = [], // Keep tracking of all the backform controls\n              // Dialog containter\n              $container = $(\"<div class='storage_dialog file_selection_dlg'></div>\");\n          var trans_id;\n\n          // send a request to get transaction id\n          /*\n           * Function: renderStoragePanel\n           *\n           * Renders the FileManager in the content div based on the given\n           * configuration parameters.\n           */\n          var renderStoragePanel = function(configs) {\n            /*\n             * Clear the existing html in the storage content\n             */\n            var content = $container.find('.storage_content');\n            content.empty();\n\n            $.get(url_for('file_manager.index'), function(data) {\n              content.append(data);\n            });\n\n            var transId = getTransId(configs);\n            var t_res;\n            if (transId.readyState == 4) {\n              t_res = JSON.parse(transId.responseText);\n            }\n            trans_id = t_res.data.fileTransId;\n          };\n\n          // Dialog property\n          return {\n            main: function(params) {\n              // Set title and button name\n              var self = this;\n              if (_.isUndefined(params['dialog_title'])) {\n                params['dialog_title'] = 'Select file';\n              }\n              this.set('title', params['dialog_title']);\n              if (_.isUndefined(params['btn_primary'])) {\n                params['btn_primary'] = 'Select';\n              }\n              this.set('label', params['btn_primary']);\n\n              params = JSON.stringify(params);\n              $container.find('.storage_content').remove();\n              $container.append(\"<div class='storage_content'></div>\");\n              renderStoragePanel(params);\n              this.elements.dialog.style.minWidth = '630px';\n              this.show();\n              setTimeout(function() {\n                $($container.find('.file_manager')).on('enter-key', function() {\n                    $($(self.elements.footer).find('.file_manager_ok')).trigger('click')\n                });\n              }, 200);\n            },\n            settings: {\n              label: undefined\n            },\n            settingUpdated: function (key, oldValue, newValue) {\n              switch (key) {\n              case 'message':\n                  this.setMessage(newValue);\n                  break;\n              case 'label':\n                  if (this.__internal.buttons[0].element) {\n                      this.__internal.buttons[0].element.innerHTML = newValue;\n                  }\n                  break;\n              default:\n                  break;\n              }\n            },\n            setup:function() {\n              return {\n                buttons:[\n                  {\n                    text: gettext(\"Select\"), key: 13, className: \"btn btn-primary fa fa-file file_manager_ok pg-alertify-button disabled\"\n                  },\n                  {\n                    text: gettext(\"Cancel\"), key: 27, className: \"btn btn-danger fa fa-times pg-alertify-button\"\n                  }\n                ],\n                focus: { element: 0 },\n                options: {\n                  closableByDimmer: false,\n                  maximizable: false,\n                  closable: false,\n                  movable: true\n                }\n              };\n            },\n            callback: function(closeEvent) {\n              if (closeEvent.button.text == gettext(\"Select\")) {\n                var newFile = $('.storage_dialog #uploader .input-path').val(),\n                    file_data = {'path': $('.currentpath').val()};\n\n                pgAdmin.Browser.Events.trigger('pgadmin-storage:finish_btn:select_file', newFile);\n                var innerbody = $(this.elements.body).find('.storage_content')\n                $(innerbody).find('*').off();\n                innerbody.remove();\n                removeTransId(trans_id);\n                // Ajax call to store the last directory visited once user press select button\n\n                set_last_traversed_dir(file_data, trans_id);\n              } else if (closeEvent.button.text == gettext(\"Cancel\")) {\n                var innerbody = $(this.elements.body).find('.storage_content')\n                $(innerbody).find('*').off();\n                innerbody.remove();\n                removeTransId(trans_id);\n              }\n            },\n            build: function() {\n              this.elements.content.appendChild($container.get(0));\n            },\n            hooks: {\n              onshow: function() {\n                $(this.elements.body).addClass('pgadmin-storage-body');\n              }\n            }\n          };\n        });\n\n        // Declare the Folder Selection dialog\n        alertify.dialog('folderSelectionDlg', function() {\n          var controls = [], // Keep tracking of all the backform controls\n              // Dialog containter\n              $container = $(\"<div class='storage_dialog folder_selection_dlg'></div>\"),\n              trans_id;\n\n          // send a request to get transaction id\n          /*\n           * Function: renderStoragePanel\n           *\n           * Renders the FileManager in the content div based on the given\n           * configuration parameters.\n           */\n          var renderStoragePanel = function(params) {\n            /*\n             * Clear the existing html in the storage content\n             */\n            var content = $container.find('.storage_content');\n            content.empty();\n\n            $.get(url_for('file_manager.index'), function(data) {\n              content.append(data);\n            });\n\n            var transId = getTransId(params);\n            var t_res;\n            if (transId.readyState == 4) {\n              t_res = JSON.parse(transId.responseText);\n            }\n            trans_id = t_res.data.fileTransId;\n          };\n\n          // Dialog property\n          return {\n            main: function(params) {\n              var self = this;\n              // Set title and button name\n              if (_.isUndefined(params['dialog_title'])) {\n                params['dialog_title'] = 'Select folder';\n              }\n              this.set('title', params['dialog_title']);\n              if (_.isUndefined(params['btn_primary'])) {\n                params['btn_primary'] = 'Select';\n              }\n              this.set('label', params['btn_primary']);\n\n              params = JSON.stringify(params);\n              $container.find('.storage_content').remove();\n              $container.append(\"<div class='storage_content'></div>\");\n              renderStoragePanel(params);\n              this.elements.dialog.style.minWidth = '630px';\n              this.show();\n              setTimeout(function() {\n                $($container.find('.file_manager')).on('enter-key', function() {\n                    $($(self.elements.footer).find('.file_manager_ok')).trigger('click')\n                });\n              }, 200);\n            },\n            settings: {\n              label: undefined\n            },\n            settingUpdated: function (key, oldValue, newValue) {\n              switch (key) {\n              case 'message':\n                  this.setMessage(newValue);\n                  break;\n              case 'label':\n                  if (this.__internal.buttons[0].element) {\n                      this.__internal.buttons[0].element.innerHTML = newValue;\n                  }\n                  break;\n              default:\n                  break;\n              }\n            },\n            setup:function() {\n              return {\n                buttons:[\n                  {\n                    text: gettext(\"Select\"), key: 13, className: \"btn btn-primary fa fa-file file_manager_ok pg-alertify-button disabled\"\n                  },\n                  {\n                    text: gettext(\"Cancel\"), key: 27, className: \"btn btn-danger fa fa-times pg-alertify-button\"\n                  }\n                ],\n                focus: { element: 0 },\n                options: {\n                  closableByDimmer: false,\n                  maximizable: false,\n                  closable: false,\n                  movable: true\n                }\n              };\n            },\n            callback: function(closeEvent) {\n              if (closeEvent.button.text == gettext(\"Select\")) {\n                var newFile = $('.storage_dialog #uploader .input-path').val(),\n                    file_data = {'path': $('.currentpath').val()};\n                pgAdmin.Browser.Events.trigger('pgadmin-storage:finish_btn:select_folder', newFile);\n                var innerbody = $(this.elements.body).find('.storage_content')\n                $(innerbody).find('*').off();\n                innerbody.remove();\n                removeTransId(trans_id);\n                // Ajax call to store the last directory visited once user press select button\n                set_last_traversed_dir(file_data, trans_id);\n              } else if (closeEvent.button.text == gettext(\"Cancel\")) {\n                var innerbody = $(this.elements.body).find('.storage_content')\n                $(innerbody).find('*').off();\n                innerbody.remove();\n                removeTransId(trans_id);\n              }\n            },\n            build: function() {\n              this.elements.content.appendChild($container.get(0));\n            },\n            hooks: {\n              onshow: function() {\n                $(this.elements.body).addClass('pgadmin-storage-body');\n              }\n            }\n          };\n        });\n\n        // Declare the Create mode dialog\n        alertify.dialog('createModeDlg', function() {\n          var controls = [], // Keep tracking of all the backform controls\n              // Dialog containter\n              $container = $(\"<div class='storage_dialog create_mode_dlg'></div>\"),\n              trans_id;\n\n          /*\n           * Function: renderStoragePanel\n           *\n           * Renders the FileManager in the content div based on the given\n           * configuration parameters.\n           */\n          var renderStoragePanel = function(params) {\n            /*\n             * Clear the existing html in the storage content\n             */\n            var content = $container.find('.storage_content');\n            content.empty();\n\n            $.get(url_for('file_manager.index'), function(data) {\n              content.append(data);\n            });\n\n            var transId = getTransId(params);\n            var t_res;\n            if (transId.readyState == 4) {\n              t_res = JSON.parse(transId.responseText);\n            }\n            trans_id = t_res.data.fileTransId;\n          };\n\n          // Dialog property\n          return {\n            main: function(params) {\n              var self = this,\n                  trans_id;\n              // Set title and button name\n              if (_.isUndefined(params['dialog_title'])) {\n                params['dialog_title'] = 'Create file';\n              }\n              this.set('title', params['dialog_title']);\n              if (_.isUndefined(params['btn_primary'])) {\n                params['btn_primary'] = 'Create';\n              }\n              this.set('label', params['btn_primary']);\n\n              params = JSON.stringify(params);\n              $container.find('.storage_content').remove();\n              $container.append(\"<div class='storage_content'></div>\");\n              renderStoragePanel(params);\n              this.elements.dialog.style.minWidth = '630px';\n              this.show();\n              setTimeout(function() {\n                $($container.find('.file_manager')).on('enter-key', function() {\n                    $($(self.elements.footer).find('.file_manager_ok')).trigger('click')\n                });\n              }, 200);\n            },\n            settings: {\n              label: undefined\n            },\n            settingUpdated: function (key, oldValue, newValue) {\n              switch (key) {\n              case 'message':\n                  this.setMessage(newValue);\n                  break;\n              case 'label':\n                  if (this.__internal.buttons[0].element) {\n                      this.__internal.buttons[0].element.innerHTML = newValue;\n                  }\n                  break;\n              default:\n                  break;\n              }\n            },\n            setup:function() {\n              return {\n                buttons:[\n                  {\n                    text: gettext(\"Create\"), key: 13, className: \"btn btn-primary fa fa-file file_manager_create file_manager_ok pg-alertify-button disabled\"\n                  },\n                  {\n                    text: gettext(\"Cancel\"), key: 27, className: \"btn btn-danger fa fa-times file_manager_create_cancel pg-alertify-button\"\n                  }\n                ],\n                focus: { element: 0 },\n                options: {\n                  closableByDimmer: false,\n                  maximizable: false,\n                  closable: false,\n                  movable: true\n                }\n              };\n            },\n            replace_file: function() {\n                var $yesBtn = $('.replace_file .btn_yes'),\n                     $noBtn = $('.replace_file .btn_no');\n\n                $('.storage_dialog #uploader .input-path').attr('disabled', true);\n                $('.file_manager_ok').addClass('disabled');\n                $('.replace_file, .fm_dimmer').show();\n\n                $yesBtn.click(function(e) {\n                  $('.replace_file, .fm_dimmer').hide();\n                  $yesBtn.off();\n                  $noBtn.off();\n                  var newFile = $('.storage_dialog #uploader .input-path').val()\n\n                  pgAdmin.Browser.Events.trigger('pgadmin-storage:finish_btn:create_file', newFile);\n                  $('.file_manager_create_cancel').trigger('click');\n                  $('.storage_dialog #uploader .input-path').attr('disabled', false);\n                  $('.file_manager_ok').removeClass('disabled');\n                });\n\n                $noBtn.click(function(e) {\n                  $('.replace_file, .fm_dimmer').hide();\n                  $yesBtn.off();\n                  $noBtn.off();\n                  $('.storage_dialog #uploader .input-path').attr('disabled', false);\n                  $('.file_manager_ok').removeClass('disabled');\n                });\n            },\n            is_file_exist: function() {\n              var full_path  = $('.storage_dialog #uploader .input-path').val(),\n                  path = full_path.substr(0, full_path.lastIndexOf('/') + 1),\n                  selected_item = full_path.substr(full_path.lastIndexOf('/') + 1),\n                  is_exist = false;\n\n              var file_data = {\n                'path': path,\n                'name': selected_item,\n                'mode': 'is_file_exist'\n              };\n\n              $.ajax({\n                type: 'POST',\n                data: JSON.stringify(file_data),\n                url: url_for('file_manager.filemanager', {'trans_id': trans_id}),\n                dataType: 'json',\n                contentType: \"application/x-download; charset=utf-8\",\n                async: false,\n                success: function(resp) {\n                  var data = resp.data.result;\n                  if(data['Code'] === 1) {\n                    is_exist = true;\n                  } else {\n                    is_exist = false;\n                  }\n                }\n              });\n              return is_exist;\n            },\n            check_permission: function(path) {\n              var permission = false,\n                  post_data = {\n                    'path': path,\n                    'mode': 'permission'\n                  };\n\n              $.ajax({\n                type: 'POST',\n                data: JSON.stringify(post_data),\n                url: url_for('file_manager.filemanager', {'trans_id': trans_id}),\n                dataType: 'json',\n                contentType: \"application/json; charset=utf-8\",\n                async: false,\n                success: function(resp) {\n                  var data = resp.data.result;\n                  if (data.Code === 1) {\n                    permission = true;\n                  } else {\n                    $('.file_manager_ok').addClass('disabled');\n                    alertify.error(data.Error);\n                  }\n                },\n                error: function() {\n                  $('.file_manager_ok').addClass('disabled');\n                  alertify.error( gettext('Error occurred while checking access permission.'));\n                }\n              });\n              return permission;\n            },\n            callback: function(closeEvent) {\n              if (closeEvent.button.text == gettext(\"Create\")) {\n                var newFile = $('.storage_dialog #uploader .input-path').val(),\n                    file_data = {'path': $('.currentpath').val()};\n\n                if (!this.check_permission(newFile)) {\n                  closeEvent.cancel = true;\n                  return;\n                }\n\n                if(!_.isUndefined(newFile) && newFile !== '' && this.is_file_exist()) {\n                  this.replace_file();\n                  closeEvent.cancel = true;\n                } else {\n                  pgAdmin.Browser.Events.trigger('pgadmin-storage:finish_btn:create_file', newFile);\n                  var innerbody = $(this.elements.body).find('.storage_content');\n                  $(innerbody).find('*').off();\n                  innerbody.remove();\n                  removeTransId(trans_id);\n                }\n\n                set_last_traversed_dir(file_data, trans_id);\n              } else if (closeEvent.button.text == gettext(\"Cancel\")) {\n                var innerbody = $(this.elements.body).find('.storage_content')\n                $(innerbody).find('*').off();\n                innerbody.remove();\n                removeTransId(trans_id);\n              }\n            },\n            build: function() {\n              this.elements.content.appendChild($container.get(0));\n            },\n            hooks: {\n              onshow: function() {\n                $(this.elements.body).addClass('pgadmin-storage-body');\n              }\n            }\n          };\n        });\n      },\n      show_storage_dlg: function(params) {\n        alertify.storageManagerDlg(params).resizeTo('60%', '80%');\n      },\n      show_file_selection: function(params) {\n        alertify.fileSelectionDlg(params).resizeTo('60%', '80%');\n      },\n      show_folder_selection: function(params) {\n        alertify.folderSelectionDlg(params).resizeTo('60%', '80%');\n      },\n      show_create_dlg: function(params) {\n        alertify.createModeDlg(params).resizeTo('60%', '80%');\n      },\n      // call dialogs subject to dialog_type param\n      show_dialog: function(params) {\n        if(params.dialog_type == 'select_file') {\n          this.show_file_selection(params);\n        }\n        else if (params.dialog_type == 'select_folder') {\n          this.show_folder_selection(params);\n        }\n        else if (params.dialog_type == 'create_file') {\n          this.show_create_dlg(params);\n        }\n        else {\n          this.show_storage_dlg(params);\n        }\n      }\n    };\n\n    return pgAdmin.FileManager;\n  });\n\n\n\n// WEBPACK FOOTER //\n// pgadmin/misc/file_manager/static/js/file_manager.js","define([\n  'underscore', 'jquery', 'backbone', 'backform', 'backgrid', 'alertify',\n  'sources/pgadmin', 'pgadmin.browser.node', 'pgadmin.browser.node.ui'\n  ],\n function(_, $, Backbone, Backform, Backgrid, Alertify, pgAdmin, pgNode) {\n\n  /*\n   * cellFunction for variable control.\n   * This function returns cell class depending on vartype.\n   */\n  var cellFunction = function(model) {\n    var self = this,\n      name = model.get(\"name\"),\n      availVariables = {};\n\n    self.collection.each(function(col) {\n      if (col.get(\"name\") == \"name\") {\n        availVariables = col.get('availVariables');\n      }\n    });\n\n\n    var variable = name ? availVariables[name]: undefined,\n      value = model.get(\"value\");\n\n    switch(variable && variable.vartype) {\n      case \"bool\":\n        /*\n         * bool cell and variable cannot be stateless (i.e undefined).\n         * It should be either true or false.\n         */\n\n        model.set(\"value\", !!model.get(\"value\"), {silent: true});\n\n        return Backgrid.Extension.SwitchCell;\n      break;\n      case \"enum\":\n        model.set({'value': value}, {silent:true});\n        var options = [],\n            enumVals = variable.enumvals;\n\n        _.each(enumVals, function(enumVal) {\n          options.push([enumVal, enumVal]);\n        });\n\n        return Backgrid.Extension.Select2Cell.extend({optionValues: options});\n      break;\n      case \"integer\":\n        if (!_.isNaN(parseInt(value))) {\n          model.set({'value': parseInt(value)}, {silent:true});\n        } else {\n          model.set({'value': undefined}, {silent:true});\n        }\n        return Backgrid.IntegerCell;\n        break;\n      case \"real\":\n        if (!_.isNaN(parseFloat(value))) {\n          model.set({'value': parseFloat(value)}, {silent:true});\n        } else {\n          model.set({'value': undefined}, {silent:true});\n        }\n        return Backgrid.NumberCell.extend({decimals: 0});\n      break;\n      case \"string\":\n        return Backgrid.StringCell;\n      break;\n      default:\n        model.set({'value': undefined}, {silent:true});\n        return Backgrid.Cell;\n      break;\n    }\n    model.set({'value': undefined}, {silent:true});\n    return Backgrid.Cell;\n  }\n\n  /*\n   * This row will define behaviour or value column cell depending upon\n   * variable name.\n   */\n  var VariableRow = Backgrid.Row.extend({\n    modelDuplicateColor: \"lightYellow\",\n\n    modelUniqueColor: \"#fff\",\n\n    initialize: function () {\n      Backgrid.Row.prototype.initialize.apply(this, arguments);\n      var self = this;\n      self.model.on(\"change:name\", function() {\n        setTimeout(function() {\n          self.columns.each(function(col) {\n            if (col.get('name') == 'value') {\n\n              var idx = self.columns.indexOf(col),\n                cf = col.get(\"cellFunction\"),\n                cell = new (cf.apply(col, [self.model]))({\n                  column: col,\n                  model: self.model\n                }),\n                  oldCell = self.cells[idx];\n                oldCell.remove();\n                self.cells[idx] = cell;\n                self.render();\n            }\n\n          });\n        }, 10);\n      });\n      self.listenTo(self.model, 'pgadmin-session:model:duplicate', self.modelDuplicate);\n      self.listenTo(self.model, 'pgadmin-session:model:unique', self.modelUnique);\n    },\n    modelDuplicate: function() {\n      $(this.el).removeClass(\"new\");\n      this.el.style.backgroundColor = this.modelDuplicateColor;\n    },\n    modelUnique: function() {\n      this.el.style.backgroundColor = this.modelUniqueColor;\n    }\n\n  })\n  /**\n   *  VariableModel used to represent configuration parameters (variables tab)\n   *  for database objects.\n   **/\n  var VariableModel = pgNode.VariableModel = pgNode.Model.extend({\n    keys: ['name'],\n    defaults: {\n      name: undefined,\n      value: undefined,\n      role: null,\n      database: null,\n    },\n    schema: [\n      {\n        id: 'name', label:'Name', type:'text', cellHeaderClasses: 'width_percent_30',\n        editable: function(m) {\n          return (m instanceof Backbone.Collection) ? true : m.isNew();\n        },\n        cell: Backgrid.Extension.NodeAjaxOptionsCell.extend({\n          initialize: function() {\n            Backgrid.Extension.NodeAjaxOptionsCell.prototype.initialize.apply(this, arguments);\n\n            // Immediately process options as we need them before render.\n\n            var opVals = _.clone(this.optionValues ||\n                (_.isFunction(this.column.get('options')) ?\n                    (this.column.get('options'))(this) :\n                    this.column.get('options')));\n\n            this.column.set('options', opVals);\n          }\n        }),\n        url: 'vopts',\n        select2: { allowClear: false },\n        transform: function(vars, cell) {\n          var self = this,\n              res = [],\n              availVariables = {};\n\n          _.each(vars, function(v) {\n            res.push({\n              'value': v.name,\n              'image': undefined,\n              'label': v.name\n            });\n            availVariables[v.name] = v;\n          });\n\n          cell.column.set(\"availVariables\", availVariables);\n          return res;\n        }\n      },\n      {\n        id: 'value', label:'Value', type: 'text', editable: true,\n        cellFunction: cellFunction, cellHeaderClasses: 'width_percent_40'\n      },\n      {id: 'database', label:'Database', type: 'text', editable: true,\n      node: 'database', cell: Backgrid.Extension.NodeListByNameCell\n      },\n      {id: 'role', label:'Role', type: 'text', editable: true,\n      node: 'role', cell: Backgrid.Extension.NodeListByNameCell}\n    ],\n    toJSON: function() {\n      var d = Backbone.Model.prototype.toJSON.apply(this);\n\n      // Remove not defined values from model values.\n      // i.e.\n      // role, database\n      if (_.isUndefined(d.database) || _.isNull(d.database)) {\n        delete d.database;\n      }\n\n      if (_.isUndefined(d.role) || _.isNull(d.role)) {\n        delete d.role;\n      }\n\n      return d;\n    },\n    validate: function() {\n      if (_.isUndefined(this.get('name')) ||\n          _.isNull(this.get('name')) ||\n          String(this.get('name')).replace(/^\\s+|\\s+$/g, '') == '') {\n        var msg = 'Please select a parameter name.';\n\n        this.errorModel.set('name', msg);\n\n        return msg;\n      } else if (_.isUndefined(this.get('value')) ||\n          _.isNull(this.get('value')) ||\n          String(this.get('value')).replace(/^\\s+|\\s+$/g, '') == '') {\n        var msg = 'Please enter a value for the parameter.';\n\n        this.errorModel.set('value', msg);\n\n        return msg;\n      } else {\n        this.errorModel.unset('name');\n        this.errorModel.unset('value');\n      }\n\n      return null;\n    }\n  });\n\n  /**\n   * Variable Tab Control to set/update configuration values for database object.\n   *\n   **/\n  var VariableCollectionControl =  Backform.VariableCollectionControl =\n    Backform.UniqueColCollectionControl.extend({\n\n    hasDatabase: false,\n    hasRole: false,\n\n    initialize: function(opts) {\n      var self = this,\n          keys = ['name'];\n\n      /*\n       * Read from field schema whether user wants to use database and role\n       * fields in Variable control.\n       */\n      self.hasDatabase = opts.field.get('hasDatabase');\n      self.hasRole = opts.field.get('hasRole');\n\n      // Update unique coll field based on above flag status.\n      if (self.hasDatabase) {\n        keys.push('database');\n      } else if (self.hasRole) {\n        keys.push('role');\n      }\n      // Overriding the uniqueCol in the field\n      if (opts && opts.field) {\n        if (opts.field instanceof Backform.Field) {\n          opts.field.set({\n            model: pgNode.VariableModel.extend({keys:keys})\n          },\n          {\n            silent: true\n          });\n        } else {\n          opts.field.extend({\n            model: pgNode.VariableModel.extend({keys:keys})\n          });\n        }\n      }\n\n      Backform.UniqueColCollectionControl.prototype.initialize.apply(\n          self, arguments\n          );\n\n      self.availVariables = {};\n\n      var node = self.field.get('node').type,\n          gridCols = ['name', 'value'];\n\n      if (self.hasDatabase) {\n        gridCols.push('database');\n      }\n\n      if (self.hasRole) {\n        gridCols.push('role');\n      }\n\n      self.gridSchema = Backform.generateGridColumnsFromModel(\n          self.field.get('node_info'), VariableModel.extend({keys:keys}), 'edit', gridCols, self.field.get('schema_node')\n          );\n\n      // Make sure - we do have the data for variables\n      self.getVariables();\n    },\n    /*\n     * Get the variable data for this node.\n     */\n    getVariables: function() {\n      var self = this,\n          url = this.field.get('url'),\n          m = self.model;\n\n      if (!this.field.get('version_compatible'))\n        return;\n\n      if (url && !m.isNew()) {\n        var node = self.field.get('node'),\n            node_data = self.field.get('node_data'),\n            node_info = self.field.get('node_info'),\n            full_url = node.generate_url.apply(\n              node, [\n                null, url, node_data, true, node_info\n              ]),\n            data,\n            isTracking = self.collection.trackChanges;\n\n        if (isTracking) {\n          self.collection.stopSession();\n        }\n        m.trigger('pgadmin-view:fetching', m, self.field);\n\n        $.ajax({\n          async: false,\n          url: full_url,\n          success: function (res) {\n            data = res.data;\n          },\n          error: function() {\n            m.trigger('pgadmin-view:fetch:error', m, self.field);\n          }\n        });\n        m.trigger('pgadmin-view:fetched', m, self.field);\n\n        if (data && _.isArray(data)) {\n          self.collection.reset(data, {silent: true});\n        }\n        /*\n         * Make sure - new data will be taken care by the session management\n         */\n        if (isTracking) {\n          self.collection.startNewSession();\n        }\n      }\n    },\n\n    showGridControl: function(data) {\n\n      var self = this,\n          titleTmpl = _.template([\n            \"<div class='subnode-header'>\",\n            \"<label class='control-label'><%-label%></label>\",\n            \"<button class='btn-sm btn-default add fa fa-plus' <%=canAdd ? '' : 'disabled=\\\"disabled\\\"'%>></button>\",\n            \"</div>\"].join(\"\\n\")),\n          $gridBody =\n            $(\"<div class='pgadmin-control-group backgrid form-group col-xs-12 object subnode'></div>\").append(\n              titleTmpl(data)\n            );\n\n      // Clean up existing grid if any (in case of re-render)\n      if (self.grid) {\n        self.grid.remove();\n      }\n\n      var gridSchema = _.clone(this.gridSchema);\n\n      _.each(gridSchema.columns, function(col) {\n        if (col.name == 'value') {\n          col.availVariables = self.availVariables;\n        }\n      });\n\n      // Insert Delete Cell into Grid\n      if (data.disabled == false && data.canDelete) {\n          gridSchema.columns.unshift({\n            name: \"pg-backform-delete\", label: \"\",\n            cell: Backgrid.Extension.DeleteCell,\n            editable: false, cell_priority: -1\n          });\n      }\n\n      // Change format of each of the data\n      // Because - data coming from the server is in string format\n      self.collection.each(function(model) {\n        var name = model.get(\"name\");\n\n        if (name in self.availVariables) {\n          switch(self.availVariables[name].vartype) {\n            case 'real':\n              var v = parseFloat(model.get('value'));\n              model.set('value', (isNaN(v) ? undefined : v), {silent: true});\n\n              break;\n            case 'integer':\n              var v = parseInt(model.get('value'));\n              model.set('value', (isNaN(v) ? undefined : v), {silent: true});\n\n              break;\n            default:\n              break;\n          }\n        }\n      });\n\n      // Initialize a new Grid instance\n      var grid = self.grid = new Backgrid.Grid({\n        columns: gridSchema.columns,\n        collection: self.collection,\n        row: VariableRow,\n        className: \"backgrid table-bordered\"\n      });\n      self.$grid = grid.render().$el;\n\n      $gridBody.append(self.$grid);\n\n      // Add button callback\n      if (!(data.disabled || data.canAdd == false)) {\n        $gridBody.find('button.add').first().click(function(e) {\n          e.preventDefault();\n          var canAddRow = _.isFunction(data.canAddRow) ?\n                            data.canAddRow.apply(self, [self.model]) : true;\n          if (canAddRow) {\n\n              var allowMultipleEmptyRows = !!self.field.get('allowMultipleEmptyRows');\n\n              // If allowMultipleEmptyRows is not set or is false then don't allow second new empty row.\n              // There should be only one empty row.\n              if (!allowMultipleEmptyRows && self.collection) {\n                var isEmpty = false;\n                self.collection.each(function(model) {\n                  var modelValues = [];\n                  _.each(model.attributes, function(val, key) {\n                    modelValues.push(val);\n                  })\n                  if(!_.some(modelValues, _.identity)) {\n                    isEmpty = true;\n                  }\n                });\n                if(isEmpty) {\n                  return false;\n                }\n              }\n\n              $(grid.body.$el.find($(\"tr.new\"))).removeClass(\"new\")\n              var m = new (data.model) (null, {\n                silent: true,\n                handler: self.collection,\n                top: self.model.top || self.model,\n                collection: self.collection,\n                node_info: self.model.node_info\n              });\n              self.collection.add(m);\n\n              var idx = self.collection.indexOf(m),\n                  newRow = grid.body.rows[idx].$el;\n\n              newRow.addClass(\"new\");\n              $(newRow).pgMakeVisible('backform-tab');\n\n              return false;\n          }\n        });\n      }\n\n      // Render node grid\n      return $gridBody;\n    },\n\n    addVariable: function(ev) {\n      ev.preventDefault();\n\n      var self = this,\n          m = new (self.field.get('model'))(\n                self.headerData.toJSON(), {\n                  silent: true, top: self.collection.top,\n                  handler: self.collection\n                }),\n          coll = self.model.get(self.field.get('name'));\n\n      coll.add(m);\n\n      var idx = coll.indexOf(m);\n\n      // idx may not be always > -1 because our UniqueColCollection may\n      // remove 'm' if duplicate value found.\n      if (idx > -1) {\n        self.$grid.find('.new').removeClass('new');\n\n        var newRow = self.grid.body.rows[idx].$el;\n\n        newRow.addClass(\"new\");\n        $(newRow).pgMakeVisible('backform-tab');\n      }\n\n      return false;\n    }\n  });\n\n  return VariableModel;\n});\n\n\n\n// WEBPACK FOOTER //\n// pgadmin/browser/server_groups/servers/static/js/variable.js","define(['sources/gettext', 'underscore', 'jquery', 'backbone', 'backform',\n  'backgrid', 'alertify', 'pgadmin.browser.node', 'pgadmin.browser.node.ui'\n  ],\n function(gettext, _, $, Backbone, Backform, Backgrid, Alertify, pgNode) {\n  /**\n   * Each Privilege, supporeted by an database object, will be represented\n   * using this Model.\n   *\n   * Defaults:\n   *   privilege_type -> Name of the permission\n   *      i.e. CREATE, TEMPORARY, CONNECT, etc.\n   *   privilege      -> Has privilege? (true/false)\n   *   with_grant     -> Has privilege with grant option (true/false)\n   **/\n  var PrivilegeModel = pgNode.Model.extend({\n    idAttribute: 'privilege_type',\n    defaults: {\n      privilege_type: undefined,\n      privilege: false,\n      with_grant: false\n    },\n    validate: function() {\n      return null;\n    }\n  });\n\n  /**\n   * A database object has privileges item list (aclitem[]).\n   *\n   * This model represents the individual privilege item (aclitem).\n   * It has basically three properties:\n   *  + grantee    - Role to which that privilege applies to.\n   *                Empty value represents to PUBLIC.\n   *  + grantor    - Grantor who has given this permission.\n   *  + privileges - Privileges for that role.\n   **/\n  var PrivilegeRoleModel = pgNode.PrivilegeRoleModel = pgNode.Model.extend({\n    idAttribute: 'grantee',\n    defaults: {\n      grantee: undefined,\n      grantor: undefined,\n      privileges: undefined\n    },\n    keys: ['grantee', 'grantor'],\n    /*\n     * Each of the database object needs to extend this model, which should\n     * provide the type of privileges (it supports).\n     */\n    privileges:[],\n    schema: [{\n      id: 'grantee', label:'Grantee', type:'text', group: null,\n      editable: true, cellHeaderClasses: 'width_percent_40',\n      node: 'role',\n      disabled : function(m) {\n        if (!(m instanceof Backbone.Model)) {\n          // This has been called during generating the header cell\n          return false;\n        }\n        return !(\n          m.top && m.top.node_info &&\n          m.top.node_info.server.user.name == m.get('grantor')\n        );\n      },\n      transform: function(data) {\n        var res =\n          Backgrid.Extension.NodeListByNameCell.prototype.defaults.transform.apply(\n            this, arguments\n            );\n        res.unshift({label: 'PUBLIC', value: 'PUBLIC'});\n        return res;\n      },\n      cell: Backgrid.Extension.NodeListByNameCell.extend({\n        initialize: function(opts) {\n          var self = this,\n              override_opts = true;\n\n          // We would like to override the original options, because - we\n          // should omit the existing role/user from the privilege cell.\n          // Because - the column is shared among all the cell, we can only\n          // override only once.\n          if (opts && opts.column &&\n              opts.column instanceof Backbone.Model &&\n              opts.column.get('options_cached')) {\n            override_opts = false;\n          }\n          Backgrid.Extension.NodeListByNameCell.prototype.initialize.apply(\n            self, arguments\n          );\n\n          // Let's override the options\n          if (override_opts) {\n            var opts = self.column.get('options');\n            self.column.set('options', self.omit_selected_roles.bind(self, opts));\n          }\n\n          var rerender = function (m) {\n            var self = this;\n            if ('grantee' in m.changed && this.model.cid != m.cid) {\n              setTimeout(\n                function() {\n                  self.render();\n                }, 50\n              );\n            }\n          }.bind(this);\n\n          // We would like to rerender all the cells of this type for this\n          // collection, because - we need to omit the newly selected roles\n          // form the list. Also, the render will be automatically called for\n          // the model represented by this cell, we will not do that again.\n          this.listenTo(self.model.collection, \"change\", rerender, this);\n          this.listenTo(self.model.collection, \"remove\", rerender, this);\n        },\n        // Remove all the selected roles (though- not mine).\n        omit_selected_roles: function(opts, cell) {\n          var res = opts(cell),\n              selected = {},\n              model = cell.model,\n              cid = model.cid,\n              // We need to check node_info values in parent when object is nested.\n              // eg: column level privileges in table dialog\n              // In this case node_info will not be avilable to column node as\n              // it is not loaded yet\n              node_info = (_.has(model.top, 'node_info')\n                            && !_.isUndefined(model.top.node_info)) ?\n                              model.top.node_info :\n                              model.handler.top.node_info,\n              curr_user = node_info.server.user.name;\n\n          var idx = 0;\n\n          model.collection.each(function(m) {\n            var grantee = m.get('grantee');\n\n            if (m.cid != cid && !_.isUndefined(grantee) &&\n                curr_user == m.get('grantor')) {\n              selected[grantee] = m.cid;\n            }\n          });\n\n          res = _.filter(res, function(o) {\n            return !(o.value in selected);\n          });\n\n          return res;\n        }\n      }),\n    },{\n      id: 'privileges', label:'Privileges',\n      type: 'collection', model: PrivilegeModel, group: null,\n      cell: 'privilege', control: 'text', cellHeaderClasses: 'width_percent_40',\n      disabled : function(column, collection) {\n        if (column instanceof Backbone.Collection) {\n          // This has been called during generating the header cell\n          return false;\n        }\n        return !(this.node_info && this.node_info.server.user.name == column.get('grantor') ||\n                this.attributes.node_info.server.user.name == column.get('grantor'));\n      }\n    },{\n      id: 'grantor', label: 'Grantor', type: 'text', disabled: true,\n      cell: 'node-list-by-name', node: 'role'\n    }],\n\n    /*\n     * Initialize the model, which will transform the privileges string to\n     * collection of Privilege Model.\n     */\n    initialize: function(attrs, opts) {\n\n      pgNode.Model.prototype.initialize.apply(this, arguments);\n\n      if (_.isNull(attrs)) {\n        this.set(\n            'grantor',\n            opts && opts.top && opts.top.node_info && opts.top.node_info.server.user.name,\n            {silent: true}\n            );\n      }\n\n      /*\n       * Define the collection of the privilege supported by this model\n       */\n      var self = this,\n          models = self.get('privileges'),\n          privileges = this.get('privileges') || {};\n\n      if (_.isArray(privileges)) {\n        privileges = new (pgNode.Collection)(\n            models, {\n              model: PrivilegeModel,\n              top: this.top || this,\n              handler: this,\n              silent: true,\n              parse: false\n            });\n        this.set('privileges', privileges, {silent: true});\n      }\n\n      var privs = {};\n      _.each(self.privileges, function(p) {\n        privs[p] = {\n          'privilege_type': p, 'privilege': false, 'with_grant': false\n        }\n      });\n\n      privileges.each(function(m) {\n        delete privs[m.get('privilege_type')];\n      });\n\n      _.each(privs, function(p) {\n        privileges.add(p, {silent: true});\n      });\n\n      self.on(\"change:grantee\", self.granteeChanged);\n      privileges.on('change', function() {\n        self.trigger('change:privileges', self);\n      });\n\n      return self;\n    },\n\n    granteeChanged: function() {\n      var privileges = this.get('privileges'),\n          grantee = this.get('grantee');\n\n      // Reset all with grant options if grantee is public.\n      if (grantee == 'PUBLIC') {\n        privileges.each(function(m) {\n          m.set(\"with_grant\", false, {silent: true});\n        });\n      }\n    },\n\n    toJSON: function(session) {\n\n      var privileges = [];\n\n      if (this.attributes &&\n            !this.attributes['privileges']) {\n        return null;\n      }\n\n      this.attributes['privileges'].each(\n        function(p) {\n          if (p.get('privilege')) {\n            privileges.push(p.toJSON());\n          }\n        });\n\n      return {\n        'grantee': this.get('grantee'),\n        'grantor': this.get('grantor'),\n        'privileges': privileges\n        };\n    },\n\n    validate: function() {\n      var err = {},\n        errmsg = null,\n        changedAttrs = this.sessAttrs,\n        msg = undefined;\n\n      if (_.isUndefined(this.get('grantee'))) {\n        msg = gettext('A grantee must be selected.');\n        this.errorModel.set('grantee', msg);\n        errmsg = msg;\n      } else {\n         this.errorModel.unset('grantee');\n      }\n\n\n      if (this.attributes &&\n            this.attributes['privileges']) {\n          var anyPrivSelected = false;\n          this.attributes['privileges'].each(\n            function(p) {\n              if (p.get('privilege')) {\n                anyPrivSelected = true;\n              }\n            });\n\n          if (!anyPrivSelected) {\n            msg = gettext('At least one privilege should be selected.');\n            this.errorModel.set('privileges', msg);\n            errmsg = errmsg || msg;\n          } else {\n            this.errorModel.unset('privileges');\n          }\n      }\n\n      return errmsg;\n    }\n  });\n\n  /**\n     Custom cell editor for editing privileges.\n   */\n  var PrivilegeCellEditor = Backgrid.Extension.PrivilegeCellEditor =\n    Backgrid.CellEditor.extend({\n      tagName: \"div\",\n\n      // All available privileges in the PostgreSQL database server for\n      // generating the label for the specific Control\n      Labels: {\n        \"C\": \"CREATE\",\n        \"T\": \"TEMPORARY\",\n        \"c\": \"CONNECT\",\n        \"a\": \"INSERT\",\n        \"r\": \"SELECT\",\n        \"w\": \"UPDATE\",\n        \"d\": \"DELETE\",\n        \"D\": \"TRUNCATE\",\n        \"x\": \"REFERENCES\",\n        \"t\": \"TRIGGER\",\n        \"U\": \"USAGE\",\n        \"X\": \"EXECUTE\"\n        },\n\n      template: _.template([\n        '<tr class=\"<%= header ? \"header\" : \"\" %>\">',\n        ' <td class=\"renderable\">',\n        '  <label class=\"privilege_label\">',\n        '   <input type=\"checkbox\" name=\"privilege\" privilege=\"<%- privilege_type %>\" target=\"<%- target %>\" <%= privilege ? \\'checked\\' : \"\" %>></input>',\n        '   <%- privilege_label %>',\n        '  </label>',\n        ' </td>',\n        ' <td class=\"renderable\">',\n        '  <label class=\"privilege_label\">',\n        '   <input type=\"checkbox\" name=\"with_grant\" privilege=\"<%- privilege_type %>\" target=\"<%- target %>\" <%= with_grant ? \\'checked\\' : \"\" %> <%= enable_with_grant ? \"\" : \\'disabled\\'%>></input>',\n        '   WITH GRANT OPTION',\n        '  </label>',\n        ' </td>',\n        '</tr>'].join(\" \"), null, {variable: null}),\n\n      events: {\n        'change': 'privilegeChanged',\n        'blur': 'lostFocus'\n      },\n\n      render: function () {\n        this.$el.empty();\n        this.$el.attr('tabindex', '1');\n        this.$el.attr('target', this.elId);\n\n        var collection = this.model.get(this.column.get(\"name\")),\n            tbl = $(\"<table></table>\").appendTo(this.$el),\n            self = this,\n            privilege = true, with_grant = true;\n\n        // For each privilege generate html template.\n        // List down all the Privilege model.\n        collection.each(function(m) {\n          var d = m.toJSON();\n\n          privilege = (privilege && d.privilege);\n          with_grant = (with_grant && privilege && d.with_grant);\n\n          _.extend(\n            d, {\n              'target': self.cid,\n              'header': false,\n              'privilege_label': self.Labels[d.privilege_type],\n              'with_grant': (self.model.get('grantee') != 'PUBLIC' && d.with_grant),\n              'enable_with_grant': (self.model.get('grantee') != 'PUBLIC' && d.privilege)\n              });\n          privilege = (privilege && d.privilege);\n          with_grant = (with_grant && privilege && d.with_grant);\n          tbl.append(self.template(d));\n        });\n\n        if (collection.length > 1) {\n          // Preprend the ALL controls on that table\n          tbl.prepend(\n              self.template({\n                'target': self.cid,\n                'privilege_label': 'ALL',\n                'privilege_type': 'ALL',\n                'privilege': privilege,\n                'with_grant': (self.model.get('grantee') != 'PUBLIC' && with_grant),\n                'enable_with_grant': (self.model.get('grantee') != 'PUBLIC' && privilege),\n                'header': true\n              }));\n        }\n        self.$el.find('input[type=checkbox]').first().focus();\n        // Since blur event does not bubble we need to explicitly call parent's blur event.\n        $(self.$el.find('input[type=checkbox]')).on('blur',function() {\n          self.$el.blur();\n        });\n\n        // Make row visible in when entering in edit mode.\n        $(self.$el).pgMakeVisible('backform-tab');\n\n        self.delegateEvents();\n\n        return this;\n      },\n\n      /*\n       * Listen to the checkbox value change and update the model accordingly.\n       */\n      privilegeChanged: function(ev) {\n\n        if (ev && ev.target) {\n          /*\n           * We're looking for checkboxes only.\n           */\n          var $el = $(ev.target),\n              privilege_type = $el.attr('privilege'),\n              type = $el.attr('name'),\n              checked = $el.prop('checked'),\n              $tr = $el.closest('tr'),\n              $tbl = $tr.closest('table'),\n              collection = this.model.get('privileges'),\n              grantee = this.model.get('grantee');\n\n          this.undelegateEvents();\n          /*\n           * If the checkbox selected/deselected is for 'ALL', we will select all\n           * the checkbox for each privilege.\n           */\n          if (privilege_type == 'ALL') {\n            var $elGrant = $tr.find('input[name=with_grant]'),\n                $allPrivileges = $tbl.find(\n                    'input[name=privilege][privilege!=\\'ALL\\']'\n                    ),\n                $allGrants = $tbl.find(\n                    'input[name=with_grant][privilege!=\\'ALL\\']'\n                    ),\n                allPrivilege, allWithGrant;\n\n            if (type == 'privilege') {\n              /*\n               * We clicked the privilege checkbox, and not checkbox for with\n               * grant options.\n               */\n              allPrivilege = checked;\n              allWithGrant = false;\n\n              if (checked) {\n                $allPrivileges.prop('checked', true);\n                /*\n                 * We have clicked the ALL checkbox, we should be able to select\n                 * the grant options too.\n                 */\n                if (grantee == 'PUBLIC') {\n                  $allGrants.prop('disabled', true);\n                  $elGrant.prop('disabled', true);\n                } else {\n                  $allGrants.prop('disabled', false);\n                  $elGrant.prop('disabled', false);\n                }\n\n              } else {\n                /*\n                 * ALL checkbox has been deselected, hence - we need to make\n                 * sure.\n                 * 1. Deselect all the privileges checkboxes\n                 * 2. Deselect and disable all with grant privilege checkboxes.\n                 * 3. Deselect and disable the checkbox for ALL with grant privilege.\n                 */\n                $allPrivileges.prop('checked', false);\n                $elGrant.prop('checked', false),\n                $allGrants.prop('checked', false);\n                $elGrant.prop('disabled', true);\n                $allGrants.prop('disabled', true);\n              }\n            } else {\n              /*\n               * We were able to click the ALL with grant privilege checkbox,\n               * that means, privilege for Privileges are true.\n               *\n               * We need to select/deselect all the with grant options\n               * checkboxes, based on the current value of the ALL with grant\n               * privilege checkbox.\n               */\n              allPrivilege = true;\n              allWithGrant = checked;\n              $allGrants.prop('checked', checked);\n            }\n\n          /*\n           * Set the values for each Privilege Model.\n           */\n          collection.each(function(m) {\n            m.set(\n              {'privilege': allPrivilege, 'with_grant': allWithGrant},\n              {silent: true}\n            );\n          });\n        } else {\n          /*\n           * Particular privilege has been selected/deselected, which can be\n           * identified using the privilege=\"X\" attribute.\n           */\n          var attrs = {},\n              $tbl = $tr.closest('table'),\n              $allPrivilege = $tbl.find(\n                  'input[name=privilege][privilege=\\'ALL\\']'\n                  ),\n              $allGrant = $tbl.find(\n                  'input[name=with_grant][privilege=\\'ALL\\']'\n                  );\n\n          attrs[type] = checked;\n\n          if (type == 'privilege') {\n            var $elGrant = ($el.closest('tr')).find('input[name=with_grant]');\n            if (!checked) {\n              attrs['with_grant'] = false;\n\n              $elGrant.prop('checked', false).prop('disabled', true);\n              $allPrivilege.prop('checked', false);\n              $allGrant.prop('disabled', true);\n              $allGrant.prop('checked', false);\n            } else if (grantee != \"PUBLIC\") {\n              $elGrant.prop('disabled', false);\n            }\n          } else if (!checked) {\n            $allGrant.prop('checked', false);\n          }\n          collection.get(privilege_type).set(attrs, {silent: true});\n\n          if (checked) {\n            var $allPrivileges = $tbl.find(\n                  'input[name=privilege][privilege!=\\'ALL\\']:checked'\n                  );\n\n            if ($allPrivileges.length > 1 &&\n                  $allPrivileges.length == collection.models.length) {\n\n              $allPrivilege.prop('checked', true);\n\n              if (type == 'with_grant') {\n                var $allGrants = $tbl.find(\n                    'input[name=with_grant][privilege!=\\'ALL\\']:checked'\n                    );\n                if ($allGrants.length == collection.models.length) {\n                  $allGrant.prop('disabled', false);\n                  $allGrant.prop('checked', true);\n                }\n              } else if (grantee != \"PUBLIC\") {\n                $allGrant.prop('disabled', false);\n              }\n            }\n          }\n        }\n        this.model.trigger('change', this.model);\n\n        var anySelected = false,\n            msg = null;\n\n        collection.each(function(m) {\n          anySelected = anySelected || m.get('privilege');\n        });\n\n        if (anySelected) {\n          this.model.errorModel.unset('privileges');\n          if (this.model.errorModel.has('grantee')) {\n            msg = this.model.errorModel.get('grantee');\n          }\n        } else {\n          this.model.errorModel.set(\n            'privileges', gettext('At least one privilege should be selected.')\n            );\n          msg = gettext('At least one privilege should be selected.');\n        }\n        if (msg) {\n          this.model.collection.trigger(\n            'pgadmin-session:model:invalid', msg, this.model\n            );\n        } else {\n          this.model.collection.trigger(\n            'pgadmin-session:model:valid', this.model\n            );\n        }\n      }\n      this.delegateEvents();\n    },\n\n    lostFocus: function(ev) {\n      /*\n       * We lost the focus, it's time for us to exit the editor.\n       */\n      var self = this,\n      /*\n       * Function to determine whether one dom element is descendant of another\n       * dom element.\n       */\n      isDescendant = function (parent, child) {\n         var node = child.parentNode;\n         while (node != null) {\n             if (node == parent) {\n                 return true;\n             }\n             node = node.parentNode;\n         }\n         return false;\n      }\n      /*\n       * Between leaving the old element focus and entering the new element focus the\n       * active element is the document/body itself so add timeout to get the proper\n       * focused active element.\n       */\n      setTimeout(function() {\n        /*\n         Do not close the control if user clicks outside dialog window,\n         only close the row if user clicks on add button or on another row, if user\n         clicks somewhere else then we will get tagName as 'BODY' or 'WINDOW'\n        */\n        var is_active_element = document.activeElement.tagName == 'DIV' ||\n                                document.activeElement.tagName == 'BUTTON';\n\n        if (is_active_element && self.$el[0] != document.activeElement &&\n                !isDescendant(self.$el[0], document.activeElement)) {\n          var m = self.model;\n          m.trigger('backgrid:edited', m, self.column, new Backgrid.Command(ev));\n        }},10);\n      return;\n    }\n  });\n\n  /*\n   * This will help us transform the privileges value in proper format to be\n   * displayed in the cell.\n   */\n  var PrivilegeCellFormatter = Backgrid.Extension.PrivilegeCellFormatter =\n    function () {};\n  _.extend(PrivilegeCellFormatter.prototype, {\n    notation: {\n      \"CREATE\" : \"C\",\n      \"TEMPORARY\" : \"T\",\n      \"CONNECT\" : \"c\",\n      \"INSERT\" : \"a\",\n      \"SELECT\" : \"r\",\n      \"UPDATE\" : \"w\",\n      \"DELETE\" : \"d\",\n      \"TRUNCATE\" : \"D\",\n      \"REFERENCES\" : \"x\",\n      \"TRIGGER\" : \"t\",\n      \"USAGE\" : \"U\",\n      \"EXECUTE\" : \"X\"\n    },\n    /**\n     * Takes a raw value from a model and returns an optionally formatted\n     * string for display.\n     */\n    fromRaw: function (rawData, model) {\n      var res = '',\n          self = this;\n\n      if (rawData instanceof Backbone.Collection) {\n        rawData.each(function(m) {\n          if (m.get('privilege')) {\n            res += m.get('privilege_type');\n            if (m.get('with_grant')) {\n              res += '*';\n            }\n          }\n        });\n      }\n      return res;\n    }\n  });\n\n  /*\n   *  PrivilegeCell for rendering and taking input for the privileges.\n   */\n  var PrivilegeCell = Backgrid.Extension.PrivilegeCell = Backgrid.Cell.extend({\n    className: \"edit-cell\",\n    formatter: PrivilegeCellFormatter,\n    editor: PrivilegeCellEditor,\n\n    initialize: function (options) {\n      var self = this;\n      Backgrid.Cell.prototype.initialize.apply(this, arguments);\n\n      self.model.on(\"change:grantee\", function() {\n        if (!self.$el.hasClass(\"editor\")) {\n          /*\n           * Add time out before render; As we might want to wait till model\n           * is updated by PrivilegeRoleModel:granteeChanged.\n           */\n          setTimeout(function() {\n            self.render();\n          },10);\n        }\n      });\n    }\n  });\n\n  return PrivilegeRoleModel;\n\n});\n\n\n\n// WEBPACK FOOTER //\n// pgadmin/browser/server_groups/servers/static/js/privilege.js","(function(root, factory) {\n\n  // Set up Backform appropriately for the environment. Start with AMD.\n  if (typeof define === 'function' && define.amd) {\n    define([\n      'sources/gettext', 'underscore', 'underscore.string', 'jquery',\n      'backbone', 'backform', 'backgrid', 'codemirror', 'pgadmin.backgrid',\n      'select2'\n      ],\n     function(gettext, _, S, $, Backbone, Backform, Backgrid, CodeMirror) {\n      // Export global even in AMD case in case this script is loaded with\n      // others that may still expect a global Backform.\n      return factory(root, gettext, _, S, $, Backbone, Backform, Backgrid, CodeMirror);\n    });\n\n  // Next for Node.js or CommonJS. jQuery may not be needed as a module.\n  } else if (typeof exports !== 'undefined') {\n    var _ = require('underscore') || root._,\n      $ = root.jQuery || root.$ || root.Zepto || root.ender,\n      Backbone = require('backbone') || root.Backbone,\n      Backform = require('backform') || root.Backform,\n      Backgrid = require('backgrid') || root.Backgrid,\n      CodeMirror = require('codemirror') || root.CodeMirror,\n      S = require('underscore.string'),\n      gettext = require('sources/gettext');\n    factory(root, gettext, _, S, $, Backbone, Backform, Backgrid, CodeMirror);\n  // Finally, as a browser global.\n  } else {\n    factory(root, root.gettext, root._, root.s, (root.jQuery || root.Zepto || root.ender || root.$), root.Backbone, root.Backform, root.Backgrid, root.CodeMirror);\n  }\n}(this, function(root, gettext, _, S, $, Backbone, Backform, Backgrid, CodeMirror) {\n\n  var pgAdmin = (window.pgAdmin = window.pgAdmin || {});\n\n  pgAdmin.editableCell = function() {\n    if (this.attributes && !_.isUndefined(this.attributes.disabled) &&\n        !_.isNull(this.attributes.disabled)) {\n      if(_.isFunction(this.attributes.disabled)) {\n        return !(this.attributes.disabled.apply(this, arguments));\n      }\n      if (_.isBoolean(this.attributes.disabled)) {\n        return !this.attributes.disabled;\n      }\n    }\n  };\n\n  // HTML markup global class names. More can be added by individual controls\n  // using _.extend. Look at RadioControl as an example.\n  _.extend(Backform, {\n    controlLabelClassName: \"control-label pg-el-sm-3 pg-el-xs-12\",\n    controlsClassName: \"pgadmin-controls pg-el-sm-9 pg-el-xs-12\",\n    groupClassName: \"pgadmin-control-group form-group pg-el-xs-12\",\n    setGroupClassName: \"set-group pg-el-xs-12\",\n    tabClassName: \"backform-tab pg-el-xs-12\",\n    setGroupContentClassName: \"fieldset-content pg-el-xs-12\"\n    });\n\n  var controlMapper = Backform.controlMapper = {\n    'int': ['uneditable-input', 'numeric', 'integer'],\n    'text': ['uneditable-input', 'input', 'string'],\n    'numeric': ['uneditable-input', 'numeric', 'numeric'],\n    'date': 'datepicker',\n    'datetime': 'datetimepicker',\n    'boolean': 'boolean',\n    'options': ['readonly-option', 'select', Backgrid.Extension.PGSelectCell],\n    'multiline': ['textarea', 'textarea', 'string'],\n    'collection': ['sub-node-collection', 'sub-node-collection', 'string'],\n    'uniqueColCollection': ['unique-col-collection', 'unique-col-collection', 'string'],\n    'switch' : 'switch',\n    'select2': 'select2',\n    'note': 'note'\n  };\n\n  var getMappedControl = Backform.getMappedControl = function(type, mode) {\n    if (type in Backform.controlMapper) {\n      var m = Backform.controlMapper[type];\n\n      if (!_.isArray(m)) {\n        return m;\n      }\n\n      var idx = 1, len = _.size(m);\n\n      switch (mode) {\n        case 'properties':\n          idx = 0;\n          break;\n        case 'edit':\n        case 'create':\n        case 'control':\n          idx = 1;\n          break;\n        case 'cell':\n          idx = 2;\n          break;\n        default:\n          idx = 0;\n          break;\n      }\n\n      return m[idx > len ? 0 : idx];\n    }\n    return type;\n  }\n\n\n  var BackformControlInit = Backform.Control.prototype.initialize,\n      BackformControlRemove = Backform.Control.prototype.remove;\n\n  // Override the Backform.Control to allow to track changes in dependencies,\n  // and rerender the View element\n  _.extend(Backform.Control.prototype, {\n\n    defaults: _.extend(Backform.Control.prototype.defaults, {helpMessage: null}),\n\n    initialize: function() {\n      BackformControlInit.apply(this, arguments);\n\n      // Listen to the dependent fields in the model for any change\n      var deps = this.field.get('deps');\n      var self = this;\n\n      if (deps && _.isArray(deps)) {\n        _.each(deps, function(d) {\n          var attrArr = d.split('.');\n          var name = attrArr.shift();\n          self.listenTo(self.model, \"change:\" + name, self.render);\n        });\n      }\n    },\n\n    remove: function() {\n      // Remove the events for the dependent fields in the model\n      var self = this,\n          deps = self.field.get('deps');\n\n      self.stopListening(self.model, \"change:\" + name, self.render);\n      self.stopListening(self.model.errorModel, \"change:\" + name, self.updateInvalid);\n\n      if (deps && _.isArray(deps)) {\n        _.each(deps, function(d) {\n\n          var attrArr = d.split('.');\n          var name = attrArr.shift();\n\n          self.stopListening(self.model, \"change:\" + name, self.render);\n        });\n      }\n\n      if (this.cleanup) {\n        this.cleanup.apply(this);\n      }\n\n      if (BackformControlRemove) {\n        BackformControlRemove.apply(self, arguments);\n      } else {\n        Backbone.View.prototype.remove.apply(self, arguments);\n      }\n    },\n\n    template: _.template([\n                  '<label class=\"<%=Backform.controlLabelClassName%>\"><%=label%></label>',\n                  '<div class=\"<%=Backform.controlsClassName%>\">',\n                  '  <span class=\"<%=Backform.controlClassName%> uneditable-input\" <%=disabled ? \"disabled\" : \"\"%>>',\n                  '    <%-value%>',\n                  '  </span>',\n                  '</div>',\n                  '<% if (helpMessage && helpMessage.length) { %>',\n                  '  <span class=\"<%=Backform.helpMessageClassName%>\"><%=helpMessage%></span>',\n                  '<% } %>',\n                  ].join(\"\\n\")),\n\n    clearInvalid: function() {\n      this.$el.removeClass(Backform.errorClassName);\n      this.$el.find(\".pgadmin-control-error-message\").remove();\n      return this;\n    },\n\n    updateInvalid: function() {\n      var self = this,\n          errorModel = this.model.errorModel;\n\n      if (!(errorModel instanceof Backbone.Model)) return this;\n\n      this.clearInvalid();\n\n      /*\n      * Find input which have name attribute.\n      */\n      this.$el.find(':input[name]').not('button').each(function(ix, el) {\n        var attrArr = $(el).attr('name').split('.'),\n        name = attrArr.shift(),\n        path = attrArr.join('.'),\n        error = self.keyPathAccessor(errorModel.toJSON(), $(el).attr('name'));\n\n      if (_.isEmpty(error)) return;\n      self.$el.addClass(Backform.errorClassName);\n      });\n    },\n\n    /*\n     * Overriding the render function of the control to allow us to eval the\n     * values properly.\n     */\n    render: function() {\n      var field = _.defaults(this.field.toJSON(), this.defaults),\n          attributes = this.model.toJSON(),\n          attrArr = field.name.split('.'),\n          name = attrArr.shift(),\n          path = attrArr.join('.'),\n          rawValue = this.keyPathAccessor(attributes[name], path),\n          data = _.extend(field, {\n            rawValue: rawValue,\n            value: this.formatter.fromRaw(rawValue, this.model),\n            attributes: attributes,\n            formatter: this.formatter\n          }),\n          evalF = function(f, d, m) {\n            return (_.isFunction(f) ? !!f.apply(d, [m]) : !!f);\n          };\n\n      // Evaluate the disabled, visible, and required option\n      _.extend(data, {\n        disabled: evalF(data.disabled, data, this.model),\n        visible:  evalF(data.visible, data, this.model),\n        required: evalF(data.required, data, this.model)\n      });\n\n      // Clean up first\n      this.$el.removeClass(Backform.hiddenClassName);\n\n      if (!data.visible)\n        this.$el.addClass(Backform.hiddenClassName);\n\n      this.$el.html(this.template(data)).addClass(field.name);\n      this.updateInvalid();\n\n      return this;\n    }\n  });\n\n  /*\n   * Override the input control events in order to reslove the issue related to\n   * not updating the value sometimes in the input control.\n   */\n  _.extend(\n    Backform.InputControl.prototype, {\n      events: {\n        \"change input\": \"onChange\",\n        \"blur input\": \"onChange\",\n        \"keyup input\": \"onKeyUp\",\n        \"focus input\": \"clearInvalid\"\n      },\n      onKeyUp: function(ev) {\n        if (this.key_timeout) {\n          clearTimeout(this.key_timeout);\n        }\n\n        this.keyup_timeout = setTimeout(function() {\n          this.onChange(ev);\n        }.bind(this), 400);\n      }\n    });\n\n  /*\n   * Override the textarea control events in order to resolve the issue related\n   * to not updating the value in model on certain browsers in few situations\n   * like copy/paste, deletion using backspace.\n   *\n   * Reference:\n   * http://stackoverflow.com/questions/11338592/how-can-i-bind-to-the-change-event-of-a-textarea-in-jquery\n   */\n  _.extend(\n    Backform.TextareaControl.prototype, {\n      defaults: _.extend(\n        Backform.TextareaControl.prototype.defaults, {rows: 5, helpMessage: null}\n      ),\n      events : {\n        \"change textarea\": \"onChange\",\n        \"keyup textarea\": \"onKeyUp\",\n        \"paste textarea\": \"onChange\",\n        \"selectionchange textarea\": \"onChange\",\n        \"focus textarea\": \"clearInvalid\"\n      },\n      template: _.template([\n        '<label class=\"<%=Backform.controlLabelClassName%>\"><%=label%></label>',\n        '<div class=\"<%=Backform.controlsClassName%>\">',\n        '  <textarea ',\n        '    class=\"<%=Backform.controlClassName%> <%=extraClasses.join(\\' \\')%>\" name=\"<%=name%>\"',\n        '    maxlength=\"<%=maxlength%>\" placeholder=\"<%-placeholder%>\" <%=disabled ? \"disabled\" : \"\"%>',\n        '    rows=<%=rows ? rows : \"\"%>',\n        '    <%=required ? \"required\" : \"\"%>><%-value%></textarea>',\n        '  <% if (helpMessage && helpMessage.length) { %>',\n        '    <span class=\"<%=Backform.helpMessageClassName%>\"><%=helpMessage%></span>',\n        '  <% } %>',\n        '</div>'\n      ].join(\"\\n\")),\n      onKeyUp: function(ev) {\n        if (this.key_timeout) {\n          clearTimeout(this.key_timeout);\n        }\n\n        this.keyup_timeout = setTimeout(function() {\n          this.onChange(ev);\n        }.bind(this), 400);\n      }\n    });\n\n  /*\n   * Overriding the render function of the select control to allow us to use\n   * options as function, which should return array in the format of\n   * (label, value) pair.\n   */\n  Backform.SelectControl.prototype.render = function() {\n    var field = _.defaults(this.field.toJSON(), this.defaults),\n      attributes = this.model.toJSON(),\n      attrArr = field.name.split('.'),\n      name = attrArr.shift(),\n      path = attrArr.join('.'),\n      rawValue = this.keyPathAccessor(attributes[name], path),\n      data = _.extend(field, {\n        rawValue: rawValue,\n        value: this.formatter.fromRaw(rawValue, this.model),\n        attributes: attributes,\n        formatter: this.formatter\n      }),\n      evalF = function(f, d, m) {\n        return (_.isFunction(f) ? !!f.apply(d, [m]) : !!f);\n      };\n\n    // Evaluate the disabled, visible, and required option\n    _.extend(data, {\n      disabled: evalF(data.disabled, data, this.model),\n      visible:  evalF(data.visible, data, this.model),\n      required: evalF(data.required, data, this.model)\n    });\n    // Evaluation the options\n    if (_.isFunction(data.options)) {\n      try {\n        data.options = data.options(this)\n      } catch(e) {\n        // Do nothing\n        data.options = []\n        this.model.trigger('pgadmin-view:transform:error', this.model, this.field, e);\n      }\n    }\n\n    // Clean up first\n    this.$el.removeClass(Backform.hiddenClassName);\n\n    if (!data.visible)\n      this.$el.addClass(Backform.hiddenClassName);\n\n    this.$el.html(this.template(data)).addClass(field.name);\n    this.updateInvalid();\n\n    return this;\n  };\n  _.extend(Backform.SelectControl.prototype.defaults, {helpMessage: null});\n\n  var ReadonlyOptionControl = Backform.ReadonlyOptionControl = Backform.SelectControl.extend({\n    template: _.template([\n      '<label class=\"<%=Backform.controlLabelClassName%>\"><%=label%></label>',\n      '<div class=\"<%=Backform.controlsClassName%>\">',\n      '<% for (var i=0; i < options.length; i++) { %>',\n      ' <% var option = options[i]; %>',\n      ' <% if (option.value === rawValue) { %>',\n      ' <span class=\"<%=Backform.controlClassName%> uneditable-input\" disabled><%-option.label%></span>',\n      ' <% } %>',\n      '<% } %>',\n      '<% if (helpMessage && helpMessage.length) { %>',\n      '  <span class=\"<%=Backform.helpMessageClassName%>\"><%=helpMessage%></span>',\n      '<% } %>',\n      '</div>'\n    ].join(\"\\n\")),\n    events: {},\n    getValueFromDOM: function() {\n      return this.formatter.toRaw(this.$el.find(\"span\").text(), this.model);\n    }\n  });\n\n  /*\n   * Override the function 'updateInvalid' of the radio control to resolve an\n   * issue, which will not render the error block multiple times for each\n   * options.\n   */\n  _.extend(\n    Backform.RadioControl.prototype, {\n      updateInvalid: function() {\n        var self = this,\n            errorModel = this.model.errorModel;\n\n        if (!(errorModel instanceof Backbone.Model)) return this;\n\n        this.clearInvalid();\n\n        /*\n         * Find input which have name attribute.\n         */\n        this.$el.find(':input[name]').not('button').each(function(ix, el) {\n          var attrArr = $(el).attr('name').split('.'),\n              name = attrArr.shift(),\n              path = attrArr.join('.'),\n              error = self.keyPathAccessor(\n                errorModel.toJSON(), $(el).attr('name')\n              );\n\n          if (_.isEmpty(error)) return;\n\n          self.$el.addClass(Backform.errorClassName).find(\n            '[type=\"radio\"]'\n          ).append(\n          $(\"<div></div>\").addClass(\n            'pgadmin-control-error-message pg-el-xs-offset-4 pg-el-xs-8 pg-el-xs-8 help-block'\n          ).text(error));\n        });\n      }\n    });\n\n  // Requires the Bootstrap Switch to work.\n  var SwitchControl = Backform.SwitchControl = Backform.InputControl.extend({\n    defaults: {\n      label: \"\",\n      options: {\n        onText: 'Yes',\n        offText: 'No',\n        onColor: 'success',\n        offColor: 'primary',\n        size: 'small'\n      },\n      extraClasses: [],\n      helpMessage: null\n    },\n    template: _.template([\n      '<label class=\"<%=Backform.controlLabelClassName%>\"><%=label%></label>',\n      '<div class=\"<%=Backform.controlsClassName%>\">',\n      '  <div class=\"checkbox\">',\n      '    <label>',\n      '      <input type=\"checkbox\" class=\"<%=extraClasses.join(\\' \\')%>\" name=\"<%=name%>\" <%=value ? \"checked=\\'checked\\'\" : \"\"%> <%=disabled ? \"disabled\" : \"\"%> <%=required ? \"required\" : \"\"%> />',\n      '    </label>',\n      '  </div>',\n      '  <% if (helpMessage && helpMessage.length) { %>',\n      '    <span class=\"<%=Backform.helpMessageClassName%>\"><%=helpMessage%></span>',\n      '  <% } %>',\n      '</div>',\n    ].join(\"\\n\")),\n    getValueFromDOM: function() {\n      return this.formatter.toRaw(\n          this.$input.prop('checked'),\n          this.model\n          );\n    },\n    events: {'switchChange.bootstrapSwitch': 'onChange'},\n    render: function() {\n      var field = _.defaults(this.field.toJSON(), this.defaults),\n          attributes = this.model.toJSON(),\n          attrArr = field.name.split('.'),\n          name = attrArr.shift(),\n          path = attrArr.join('.'),\n          rawValue = this.keyPathAccessor(attributes[name], path),\n          evalF = function(f, d, m) {\n            return (_.isFunction(f) ? !!f.apply(d, [m]) : !!f);\n            },\n          options = _.defaults({\n              disabled: evalF(field.disabled, field, this.model)\n            }, this.field.get('options'), this.defaults.options,\n            $.fn.bootstrapSwitch.defaults);\n\n      Backform.InputControl.prototype.render.apply(this, arguments);\n      this.$input = this.$el.find(\"input[type=checkbox]\").first();\n\n      //Check & set additional properties\n      this.$input.bootstrapSwitch(\n          _.extend(options, {'state': rawValue})\n          );\n\n      return this;\n    }\n  });\n\n  // Backform Dialog view (in bootstrap tabbular form)\n  // A collection of field models.\n  var Dialog = Backform.Dialog = Backform.Form.extend({\n    /* Array of objects having attributes [label, fields] */\n    schema: undefined,\n    tagName: \"div\",\n    legend: true,\n    className: function() {\n      return 'pg-el-sm-12 pg-el-md-12 pg-el-lg-12 pg-el-xs-12';\n    },\n    tabPanelClassName: function() {\n      return Backform.tabClassName;\n    },\n    tabIndex: 0,\n    initialize: function(opts) {\n      var s = opts.schema;\n      if (s && _.isArray(s)) {\n        this.schema = _.each(s, function(o) {\n          if (o.fields && !(o.fields instanceof Backbone.Collection))\n            o.fields = new Backform.Fields(o.fields);\n          o.cId = o.cId || _.uniqueId('pgC_');\n          o.hId = o.hId || _.uniqueId('pgH_');\n          o.disabled = o.disabled || false;\n          o.legend = opts.legend;\n        });\n        if (opts.tabPanelClassName && _.isFunction(opts.tabPanelClassName)) {\n          this.tabPanelClassName = opts.tabPanelClassName;\n        }\n      }\n      this.model.errorModel = opts.errorModel || this.model.errorModel || new Backbone.Model();\n      this.controls = [];\n    },\n    template: {\n      'header': _.template([\n        '<li role=\"presentation\" <%=disabled ? \"disabled\" : \"\"%>>',\n        ' <a data-toggle=\"tab\" data-tab-index=\"<%=tabIndex%>\" href=\"#<%=cId%>\"',\n        '  id=\"<%=hId%>\" aria-controls=\"<%=cId%>\">',\n        '<%=label%></a></li>'].join(\" \")),\n      'panel': _.template(\n        '<div role=\"tabpanel\" class=\"tab-pane <%=label%> pg-el-sm-12 pg-el-md-12 pg-el-lg-12 pg-el-xs-12 fade\" id=\"<%=cId%>\" aria-labelledby=\"<%=hId%>\"></div>'\n      )},\n    render: function() {\n      this.cleanup();\n\n      var c = this.$el\n        .children().first().children('.active')\n        .first().attr('id'),\n        m = this.model,\n        controls = this.controls,\n        tmpls = this.template,\n        self = this,\n        idx=(this.tabIndex * 100),\n        evalF = function(f, d, m) {\n            return (_.isFunction(f) ? !!f.apply(d, [m]) : !!f);\n          };\n\n      this.$el\n          .empty()\n          .attr('role', 'tabpanel')\n          .attr('class', _.result(this, 'tabPanelClassName'));\n      m.panelEl = this.$el;\n\n      var tabHead = $('<ul class=\"nav nav-tabs\" role=\"tablist\"></ul>')\n        .appendTo(this.$el);\n      var tabContent = $('<ul class=\"tab-content pg-el-sm-12 pg-el-md-12 pg-el-lg-12 pg-el-xs-12\"></ul>')\n        .appendTo(this.$el);\n\n      _.each(this.schema, function(o) {\n        idx++;\n        if (!o.version_compatible || !evalF(o.visible, o, m)) {\n          return;\n        }\n        var el = $((tmpls['panel'])(_.extend(o, {'tabIndex': idx})))\n              .appendTo(tabContent)\n              .removeClass('collapse').addClass('collapse'),\n            h = $((tmpls['header'])(o)).appendTo(tabHead);\n\n        o.fields.each(function(f) {\n          var cntr = new (f.get(\"control\")) ({\n            field: f,\n            model: m,\n            dialog: self,\n            tabIndex: idx\n          });\n          el.append(cntr.render().$el);\n          controls.push(cntr);\n        });\n\n        tabHead.find('a[data-toggle=\"tab\"]').off(\n          'shown.bs.tab'\n        ).off('hidden.bs.tab').on(\n          'hidden.bs.tab', function() {\n            self.hidden_tab = $(this).data('tabIndex');\n            }).on('shown.bs.tab', function() {\n              var self = this;\n              self.shown_tab = $(self).data('tabIndex');\n              m.trigger('pg-property-tab-changed', {\n                'model': m, 'shown': self.shown_tab, 'hidden': self.hidden_tab,\n                'tab': self\n              });\n            });\n      });\n\n      var makeActive = tabHead.find('[id=\"' + c + '\"]').first();\n      if (makeActive.length == 1) {\n        makeActive.parent().addClass('active');\n        tabContent.find('#' + makeActive.attr(\"aria-controls\"))\n          .addClass('in active');\n      } else {\n        tabHead.find('[role=\"presentation\"]').first().addClass('active');\n        tabContent.find('[role=\"tabpanel\"]').first().addClass('in active');\n      }\n\n      return this;\n    },\n    remove: function(opts) {\n      if (opts && opts.data) {\n        if (this.model) {\n          if (this.model.reset) {\n            this.model.reset({validate: false, silent: true, stop: true});\n          }\n          this.model.clear({validate: false, silent: true, stop: true});\n          delete (this.model);\n        }\n        if (this.errorModel) {\n          this.errorModel.clear({validate: false, silent: true, stop: true});\n          delete (this.errorModel);\n        }\n      }\n      this.cleanup();\n      Backform.Form.prototype.remove.apply(this, arguments);\n    }\n  });\n\n  var Fieldset = Backform.Fieldset = Backform.Dialog.extend({\n    className: function() {\n      return 'set-group pg-el-xs-12';\n    },\n    tabPanelClassName: function() {\n      return Backform.tabClassName;\n    },\n    fieldsetClass:  Backform.setGroupClassName,\n    legendClass: 'badge',\n    contentClass: Backform.setGroupContentClassName + ' collapse in',\n    template: {\n      'header': _.template([\n        '<fieldset class=\"<%=fieldsetClass%>\" <%=disabled ? \"disabled\" : \"\"%>>',\n        ' <% if (legend != false) { %>',\n        '  <legend class=\"<%=legendClass%>\" <%=collapse ? \"data-toggle=\\'collapse\\'\" : \"\"%> data-target=\"#<%=cId%>\"><%=collapse ? \"<span class=\\'caret\\'></span>\" : \"\" %><%=label%></legend>',\n        ' <% } %>',\n        '</fieldset>'\n      ].join(\"\\n\")),\n      'content': _.template(\n        '  <div id=\"<%= cId %>\" class=\"<%=contentClass%>\"></div>'\n    )},\n    collapse: true,\n    render: function() {\n      this.cleanup();\n\n      var m = this.model,\n          $el = this.$el,\n          tmpl = this.template,\n          controls = this.controls,\n          data = {\n            'className': _.result(this, 'className'),\n            'fieldsetClass': _.result(this, 'fieldsetClass'),\n            'legendClass': _.result(this, 'legendClass'),\n            'contentClass': _.result(this, 'contentClass'),\n            'collapse': _.result(this, 'collapse')\n          },\n          idx=(this.tabIndex * 100),\n          evalF = function(f, d, m) {\n            return (_.isFunction(f) ? !!f.apply(d, [m]) : !!f);\n          };\n\n      this.$el.empty();\n\n      _.each(this.schema, function(o) {\n        idx++;\n        if (!o.version_compatible || !evalF(o.visible, o, m)) {\n          return;\n        }\n\n        if (!o.fields)\n          return;\n\n        var d = _.extend({}, data, o),\n            h = $((tmpl['header'])(d)).appendTo($el),\n            el = $((tmpl['content'])(d)).appendTo(h);\n\n        o.fields.each(function(f) {\n          var cntr = new (f.get(\"control\")) ({\n            field: f,\n            model: m,\n            tabIndex: idx\n          });\n          el.append(cntr.render().$el);\n          controls.push(cntr);\n        });\n      });\n\n      return this;\n    },\n    getValueFromDOM: function() {\n      return \"\";\n    },\n    events: {}\n  });\n\n  var generateGridColumnsFromModel = Backform.generateGridColumnsFromModel =\n    function(node_info, m, type, cols, node) {\n      var groups = Backform.generateViewSchema(node_info, m, type, node, true, true),\n          schema = [],\n          columns = [],\n          func,\n          idx = 0;\n\n      // Create another array if cols is of type object & store its keys in that array,\n      // If cols is object then chances that we have custom width class attached with in.\n      if (_.isNull(cols) || _.isUndefined(cols)) {\n        func = function(f) {\n          f.cell_priority = idx;\n          idx = idx + 1;\n\n          // We can also provide custom header cell class in schema itself,\n          // But we will give priority to extraClass attached in cols\n          // If headerCell property is already set by cols then skip extraClass property from schema\n          if (!(f.headerCell) && f.cellHeaderClasses) {\n            f.headerCell = Backgrid.Extension.CustomHeaderCell;\n          }\n        };\n      } else if (_.isArray(cols)) {\n        func = function(f) {\n          f.cell_priority = _.indexOf(cols, f.name);\n\n          // We can also provide custom header cell class in schema itself,\n          // But we will give priority to extraClass attached in cols\n          // If headerCell property is already set by cols then skip extraClass property from schema\n          if ((!f.headerCell) && f.cellHeaderClasses) {\n            f.headerCell = Backgrid.Extension.CustomHeaderCell;\n          }\n        };\n      } else if(_.isObject(cols)) {\n        var tblCols = Object.keys(cols);\n        func = function(f) {\n          var val = (f.name in cols) && cols[f.name];\n\n          if (_.isNull(val) || _.isUndefined(val)) {\n            f.cell_priority = -1;\n            return;\n          }\n          if (_.isObject(val)) {\n            if ('index' in val) {\n              f.cell_priority = val['index'];\n              idx = (idx > val['index']) ? idx + 1 : val['index'];\n            } else {\n              var i = _.indexOf(tblCols, f.name);\n              f.cell_priority = idx = ((i > idx) ? i : idx);\n              idx = idx + 1;\n            }\n\n            // We can also provide custom header cell class in schema itself,\n            // But we will give priority to extraClass attached in cols\n            // If headerCell property is already set by cols then skip extraClass property from schema\n            if (!f.headerCell) {\n              if (f.cellHeaderClasses) {\n                f.headerCell = Backgrid.Extension.CustomHeaderCell;\n              }\n              if ('class' in val && _.isString(val['class'])) {\n                f.headerCell = Backgrid.Extension.CustomHeaderCell;\n                f.cellHeaderClasses = (f.cellHeaderClasses || '') + ' ' + val['class'];\n              }\n            }\n          }\n          if (_.isString(val)) {\n            var i = _.indexOf(tblCols, f.name);\n\n            f.cell_priority = idx = ((i > idx) ? i : idx);\n            idx = idx + 1;\n\n            if (!f.headerCell) {\n              f.headerCell = Backgrid.Extension.CustomHeaderCell;\n            }\n            f.cellHeaderClasses = (f.cellHeaderClasses || '') + ' ' + val;\n          }\n        };\n      }\n\n      // Prepare columns for backgrid\n      _.each(groups, function(group, key) {\n        _.each(group.fields, function(f) {\n          if (!f.cell) {\n            return;\n          }\n          // Check custom property in cols & if it is present then attach it to current cell\n          func(f);\n          if (f.cell_priority != -1) {\n            columns.push(f);\n          }\n        });\n        schema.push(group);\n      });\n      return {\n        'columns': _.sortBy(columns, function(c) {\n          return c.cell_priority;\n        }),\n        'schema': schema\n      };\n    };\n\n  var UniqueColCollectionControl = Backform.UniqueColCollectionControl = Backform.Control.extend({\n    initialize: function() {\n        Backform.Control.prototype.initialize.apply(this, arguments);\n\n        var uniqueCol = this.field.get('uniqueCol') || [],\n            m = this.field.get('model'),\n            schema = m.prototype.schema || m.__super__.schema,\n            columns = [],\n            self = this;\n\n        _.each(schema, function(s) {\n          columns.push(s.id);\n        });\n\n        // Check if unique columns provided are also in model attributes.\n        if (uniqueCol.length > _.intersection(columns, uniqueCol).length) {\n            var errorMsg = \"Developer: Unique columns [ \"+_.difference(uniqueCol, columns)+\" ] not found in collection model [ \" + columns +\" ].\"\n            alert (errorMsg);\n        }\n\n        var collection = self.collection = self.model.get(self.field.get('name'));\n\n        if (!collection) {\n          collection = self.collection = new (pgAdmin.Browser.Node.Collection)(\n              null,\n              {\n                model: self.field.get('model'),\n                silent: true,\n                handler: self.model,\n                top: self.model.top || self.model,\n                attrName: self.field.get('name')\n              });\n          self.model.set(self.field.get('name'), collection, {silent: true});\n        }\n\n        if (this.field.get('version_compatible')) {\n          self.listenTo(collection, \"add\", self.collectionChanged);\n          self.listenTo(collection, \"change\", self.collectionChanged);\n        }\n    },\n    cleanup: function() {\n      this.stopListening(this.collection, \"change\", this.collectionChanged);\n\n      if (this.field.get('version_compatible')) {\n        this.stopListening(self.collection, \"add\", this.collectionChanged);\n        this.stopListening(self.collection, \"change\", this.collectionChanged);\n      }\n      if (this.grid) {\n        this.grid.remove();\n        delete this.grid;\n      }\n      this.$el.empty();\n    },\n    collectionChanged: function(newModel, coll, op) {\n      var uniqueCol = this.field.get('uniqueCol') || [],\n          uniqueChangedAttr = [],\n          self = this;\n      // Check if changed model attributes are also in unique columns. And then only check for uniqueness.\n      if (newModel.attributes) {\n        _.each(uniqueCol, function(col) {\n            if (_.has(newModel.attributes,col))\n            {\n               uniqueChangedAttr.push(col);\n            }\n        });\n        if(uniqueChangedAttr.length == 0) {\n            return;\n        }\n      } else {\n        return;\n      }\n\n      var collection = this.model.get(this.field.get('name'));\n      this.stopListening(collection, \"change\", this.collectionChanged);\n      // Check if changed attribute's value of new/updated model also exist for another model in collection.\n      // If duplicate value exists then set the attribute's value of new/updated model to its previous values.\n      var m = undefined,\n          oldModel = undefined;\n      collection.each(function(model) {\n        if (newModel != model) {\n          var duplicateAttrValues = []\n          _.each(uniqueCol, function(attr) {\n            var attrValue = newModel.get(attr);\n            if (!_.isUndefined(attrValue) && attrValue == model.get(attr)) {\n              duplicateAttrValues.push(attrValue)\n            }\n          });\n          if (duplicateAttrValues.length == uniqueCol.length) {\n            m = newModel;\n            // Keep reference of model to make it visible in dialog.\n            oldModel = model;\n          }\n        }\n      });\n      if (m) {\n        if (op && op.add) {\n          // Remove duplicate model.\n          setTimeout(function() {\n            collection.remove(m);\n          }, 0);\n\n        } else {\n          /*\n           * Set model value to its previous value as its new value is\n           * conflicting with another model value.\n           */\n\n          m.set(uniqueChangedAttr[0], m.previous(uniqueChangedAttr[0]));\n        }\n        if (oldModel) {\n          var idx = collection.indexOf(oldModel);\n          if (idx > -1) {\n            var newRow = self.grid.body.rows[idx].$el;\n            newRow.addClass(\"new\");\n            $(newRow).pgMakeVisible('backform-tab');\n            setTimeout(function() {\n              newRow.removeClass(\"new\");\n              }, 3000);\n          }\n        }\n      }\n\n      this.listenTo(collection, \"change\", this.collectionChanged);\n    },\n    render: function() {\n      // Clean up existing elements\n\n      this.undelegateEvents();\n      this.$el.empty();\n\n      var field = _.defaults(this.field.toJSON(), this.defaults),\n          attributes = this.model.toJSON(),\n          attrArr = field.name.split('.'),\n          name = attrArr.shift(),\n          path = attrArr.join('.'),\n          rawValue = this.keyPathAccessor(attributes[name], path),\n          data = _.extend(field, {\n            rawValue: rawValue,\n            value: this.formatter.fromRaw(rawValue, this.model),\n            attributes: attributes,\n            formatter: this.formatter\n           }),\n          evalF = function(f, d, m) {\n            return (_.isFunction(f) ? !!f.apply(d, [m]) : !!f);\n          };\n\n      // Evaluate the disabled, visible, required, canAdd, & canDelete option\n      _.extend(data, {\n        disabled: (field.version_compatible &&\n                   evalF.apply(this.field, [data.disabled, data, this.model])\n                   ),\n        visible:  evalF.apply(this.field, [data.visible, data, this.model]),\n        required: evalF.apply(this.field, [data.required, data, this.model]),\n        canAdd: (field.version_compatible &&\n          evalF.apply(this.field, [data.canAdd, data, this.model])\n          ),\n        canAddRow: data.canAddRow,\n        canDelete: evalF.apply(this.field, [data.canDelete, data, this.model]),\n        canEdit: evalF.apply(this.field, [data.canEdit, data, this.model])\n      });\n      _.extend(data, {add_label: \"\"});\n\n      // This control is not visible, we should remove it.\n      if (!data.visible) {\n        return this;\n      }\n\n      this.control_data = _.clone(data);\n\n      // Show Backgrid Control\n      var grid = this.showGridControl(data);\n\n      this.$el.html(grid).addClass(field.name);\n      this.updateInvalid();\n\n      this.delegateEvents();\n      return this;\n    },\n    showGridControl: function(data) {\n      var self = this,\n          gridHeader = _.template([\n          '<div class=\"subnode-header\">',\n          '  <label class=\"control-label pg-el-sm-10\"><%-label%></label>',\n          '  <button class=\"btn-sm btn-default add fa fa-plus\" <%=canAdd ? \"\" : \"disabled=\\'disabled\\'\"%>><%-add_label%></button>',\n          '</div>'].join(\"\\n\")),\n        gridBody = $('<div class=\"pgadmin-control-group backgrid form-group pg-el-xs-12 object subnode\"></div>').append(\n            gridHeader(data)\n            );\n\n      // Clean up existing grid if any (in case of re-render)\n      if (self.grid) {\n        self.grid.remove();\n      }\n\n      if (!(data.subnode)) {\n        return '';\n      }\n\n      var subnode = data.subnode.schema ? data.subnode : data.subnode.prototype,\n          gridSchema = Backform.generateGridColumnsFromModel(\n            data.node_info, subnode, this.field.get('mode'), data.columns\n            );\n\n      // Set visibility of Add button\n      if (data.mode == 'properties') {\n        $(gridBody).find(\"button.add\").remove();\n      }\n\n      // Insert Delete Cell into Grid\n      if (!data.disabled && data.canDelete) {\n          gridSchema.columns.unshift({\n            name: \"pg-backform-delete\", label: \"\",\n            cell: Backgrid.Extension.DeleteCell,\n            editable: false, cell_priority: -1,\n            canDeleteRow: data.canDeleteRow\n          });\n      }\n\n      // Insert Edit Cell into Grid\n      if (data.disabled == false && data.canEdit) {\n          var editCell = Backgrid.Extension.ObjectCell.extend({\n            schema: gridSchema.schema\n          });\n\n          gridSchema.columns.unshift({\n            name: \"pg-backform-edit\", label: \"\", cell : editCell,\n            cell_priority: -2, canEditRow: data.canEditRow\n          });\n      }\n\n      var collection = this.model.get(data.name);\n\n      var cellEditing = function(args) {\n        var that = this,\n          cell = args[0];\n        // Search for any other rows which are open.\n        this.each(function(m){\n          // Check if row which we are about to close is not current row.\n          if (cell.model != m) {\n            var idx = that.indexOf(m);\n            if (idx > -1) {\n              var row = self.grid.body.rows[idx],\n                  editCell = row.$el.find(\".subnode-edit-in-process\").parent();\n              // Only close row if it's open.\n              if (editCell.length > 0){\n                var event = new Event('click');\n                editCell[0].dispatchEvent(event);\n              }\n            }\n          }\n        });\n      }\n      // Listen for any row which is about to enter in edit mode.\n      collection.on( \"enteringEditMode\", cellEditing, collection);\n\n      // Initialize a new Grid instance\n      var grid = self.grid = new Backgrid.Grid({\n        columns: gridSchema.columns,\n        collection: collection,\n        className: \"backgrid table-bordered\"\n      });\n\n      // Render subNode grid\n      var subNodeGrid = self.grid.render().$el;\n\n      // Combine Edit and Delete Cell\n      if (data.canDelete && data.canEdit) {\n        $(subNodeGrid).find(\"th.pg-backform-delete\").remove();\n        $(subNodeGrid).find(\"th.pg-backform-edit\").attr(\"colspan\", \"2\");\n      }\n\n      var $dialog =  gridBody.append(subNodeGrid);\n\n      // Add button callback\n      if (!(data.disabled || data.canAdd == false)) {\n        $dialog.find('button.add').first().click(function(e) {\n          e.preventDefault();\n          var canAddRow = _.isFunction(data.canAddRow) ?\n                            data.canAddRow.apply(self, [self.model]) : true;\n          if (canAddRow) {\n              // Close any existing expanded row before adding new one.\n              _.each(self.grid.body.rows, function(row){\n                var editCell = row.$el.find(\".subnode-edit-in-process\").parent();\n                // Only close row if it's open.\n                if (editCell.length > 0){\n                  var event = new Event('click');\n                  editCell[0].dispatchEvent(event);\n                }\n              });\n\n              var allowMultipleEmptyRows = !!self.field.get('allowMultipleEmptyRows');\n\n              // If allowMultipleEmptyRows is not set or is false then don't allow second new empty row.\n              // There should be only one empty row.\n              if (!allowMultipleEmptyRows && collection) {\n                var isEmpty = false;\n                collection.each(function(model) {\n                  var modelValues = [];\n                  _.each(model.attributes, function(val, key) {\n                    modelValues.push(val);\n                  })\n                  if(!_.some(modelValues, _.identity)) {\n                    isEmpty = true;\n                  }\n                });\n                if(isEmpty) {\n                  return false;\n                }\n              }\n\n              $(self.grid.body.$el.find($(\"tr.new\"))).removeClass(\"new\")\n              var m = new (data.model) (null, {\n                silent: true,\n                handler: collection,\n                top: self.model.top || self.model,\n                collection: collection,\n                node_info: self.model.node_info\n              });\n              collection.add(m);\n\n              var idx = collection.indexOf(m),\n                  newRow = self.grid.body.rows[idx].$el;\n\n              newRow.addClass(\"new\");\n              $(newRow).pgMakeVisible('backform-tab');\n\n              return false;\n          }\n        });\n      }\n\n      return $dialog;\n    },\n    clearInvalid: function() {\n      this.$el.removeClass(\"subnode-error\");\n      this.$el.find(\".pgadmin-control-error-message\").remove();\n      return this;\n    },\n    updateInvalid: function() {\n      var self = this,\n      errorModel = this.model.errorModel;\n\n      if (!(errorModel instanceof Backbone.Model)) return this;\n\n      this.clearInvalid();\n\n      this.$el.find('.subnode-body').each(function(ix, el) {\n        var error = self.keyPathAccessor(errorModel.toJSON(), self.field.get('name'));\n\n        if (_.isEmpty(error)) return;\n\n        self.$el.addClass(\"subnode-error\").append(\n          $(\"<div></div>\").addClass('pgadmin-control-error-message pg-el-xs-offset-4 pg-el-xs-8 help-block').text(error)\n          );\n      });\n    }\n  });\n\n  var SubNodeCollectionControl = Backform.SubNodeCollectionControl = Backform.Control.extend({\n    row: Backgrid.Row,\n    render: function() {\n      var field = _.defaults(this.field.toJSON(), this.defaults),\n          attributes = this.model.toJSON(),\n          attrArr = field.name.split('.'),\n          name = attrArr.shift(),\n          path = attrArr.join('.'),\n          rawValue = this.keyPathAccessor(attributes[name], path),\n          data = _.extend(field, {\n            rawValue: rawValue,\n            value: this.formatter.fromRaw(rawValue, this.model),\n            attributes: attributes,\n            formatter: this.formatter\n           }),\n          evalF = function(f, d, m) {\n            return (_.isFunction(f) ? !!f.apply(d, [m]) : !!f);\n          };\n\n      // Evaluate the disabled, visible, required, canAdd, cannEdit & canDelete option\n      _.extend(data, {\n        disabled: evalF(data.disabled, data, this.model),\n        visible:  evalF(data.visible, data, this.model),\n        required: evalF(data.required, data, this.model),\n        canAdd: evalF(data.canAdd, data, this.model),\n        canAddRow: data.canAddRow,\n        canEdit: evalF(data.canEdit, data, this.model),\n        canDelete: evalF(data.canDelete, data, this.model)\n      });\n      // Show Backgrid Control\n      var grid = (data.subnode == undefined) ? \"\" : this.showGridControl(data);\n\n      // Clean up first\n      this.$el.removeClass(Backform.hiddenClassName);\n\n      if (!data.visible)\n        this.$el.addClass(Backform.hiddenClassName);\n\n      this.$el.html(grid).addClass(field.name);\n      this.updateInvalid();\n\n      return this;\n    },\n    updateInvalid: function() {\n      var self = this;\n      var errorModel = this.model.errorModel;\n      if (!(errorModel instanceof Backbone.Model)) return this;\n\n      this.clearInvalid();\n\n      var attrArr = self.field.get('name').split('.'),\n        name = attrArr.shift(),\n        path = attrArr.join('.'),\n        error = self.keyPathAccessor(errorModel.toJSON(), path);\n\n      if (_.isEmpty(error)) return;\n\n      self.$el.addClass('subnode-error').append(\n        $(\"<div></div>\").addClass('pgadmin-control-error-message pg-el-xs-offset-4 pg-el-xs-8 help-block').text(error)\n        );\n    },\n    cleanup: function() {\n      // Clean up existing grid if any (in case of re-render)\n      if (this.grid) {\n        this.grid.remove();\n      }\n      if (this.collection) {\n        this.collection.off( \"enteringEditMode\");\n      }\n    },\n    clearInvalid: function() {\n      this.$el.removeClass('subnode-error');\n      this.$el.find(\".pgadmin-control-error-message\").remove();\n      return this;\n    },\n    showGridControl: function(data) {\n      var self = this,\n          gridHeader = [\"<div class='subnode-header'>\",\n          \"  <label class='control-label pg-el-sm-10'>\" + data.label + \"</label>\" ,\n          \"  <button class='btn-sm btn-default add fa fa-plus'></button>\",\n          \"</div>\"].join(\"\\n\"),\n        gridBody = $(\"<div class='pgadmin-control-group backgrid form-group pg-el-xs-12 object subnode'></div>\").append(gridHeader);\n\n      var subnode = data.subnode.schema ? data.subnode : data.subnode.prototype,\n          gridSchema = Backform.generateGridColumnsFromModel(\n            data.node_info, subnode, this.field.get('mode'), data.columns, data.schema_node\n            ),\n          pgBrowser = window.pgAdmin.Browser;\n\n      // Clean up existing grid if any (in case of re-render)\n      if (self.grid) {\n        self.grid.remove();\n      }\n\n      // Set visibility of Add button\n      if (data.disabled || data.canAdd == false) {\n        $(gridBody).find(\"button.add\").remove();\n      }\n\n      // Insert Delete Cell into Grid\n      if (data.disabled == false && data.canDelete) {\n          gridSchema.columns.unshift({\n            name: \"pg-backform-delete\", label: \"\",\n            cell: Backgrid.Extension.DeleteCell,\n            editable: false, cell_priority: -1,\n            canDeleteRow: data.canDeleteRow,\n            customDeleteMsg: data.customDeleteMsg,\n            customDeleteTitle: data.customDeleteTitle\n          });\n      }\n\n      // Insert Edit Cell into Grid\n      if (data.disabled == false && data.canEdit) {\n          var editCell = Backgrid.Extension.ObjectCell.extend({\n            schema: gridSchema.schema\n          }),\n          canEdit = self.field.has('canEdit') &&\n          self.field.get('canEdit') || true;\n\n          gridSchema.columns.unshift({\n            name: \"pg-backform-edit\", label: \"\", cell : editCell,\n            cell_priority: -2, editable: canEdit,\n            canEditRow: data.canEditRow\n          });\n      }\n\n      var collection = self.model.get(data.name);\n\n      if (!collection) {\n        collection = new (pgBrowser.Node.Collection)(null, {\n          handler: self.model.handler || self.model,\n          model: data.model, top: self.model.top || self.model,\n          silent: true\n        });\n        self.model.set(data.name, collection, {silent: true});\n      }\n\n      var cellEditing = function(args) {\n        var self = this,\n          cell = args[0];\n        // Search for any other rows which are open.\n        this.each(function(m){\n          // Check if row which we are about to close is not current row.\n          if (cell.model != m) {\n            var idx = self.indexOf(m);\n            if (idx > -1) {\n              var row = grid.body.rows[idx],\n                  editCell = row.$el.find(\".subnode-edit-in-process\").parent();\n              // Only close row if it's open.\n              if (editCell.length > 0){\n                var event = new Event('click');\n                editCell[0].dispatchEvent(event);\n              }\n            }\n          }\n        });\n      }\n      // Listen for any row which is about to enter in edit mode.\n      collection.on( \"enteringEditMode\", cellEditing, collection);\n\n      // Initialize a new Grid instance\n      var grid = self.grid = new Backgrid.Grid({\n          columns: gridSchema.columns,\n          collection: collection,\n          row: this.row,\n          className: \"backgrid table-bordered\"\n      });\n\n      // Render subNode grid\n      var subNodeGrid = grid.render().$el;\n\n      // Combine Edit and Delete Cell\n      if (data.canDelete && data.canEdit) {\n        $(subNodeGrid).find(\"th.pg-backform-delete\").remove();\n        $(subNodeGrid).find(\"th.pg-backform-edit\").attr(\"colspan\", \"2\");\n      }\n\n      var $dialog =  gridBody.append(subNodeGrid);\n\n      // Add button callback\n      $dialog.find('button.add').click(function(e) {\n         e.preventDefault();\n        var canAddRow = _.isFunction(data.canAddRow) ?\n                            data.canAddRow.apply(self, [self.model]) : true;\n        if (canAddRow) {\n          // Close any existing expanded row before adding new one.\n          _.each(grid.body.rows, function(row){\n            var editCell = row.$el.find(\".subnode-edit-in-process\").parent();\n            // Only close row if it's open.\n            if (editCell.length > 0){\n              var event = new Event('click');\n              editCell[0].dispatchEvent(event);\n            }\n          });\n\n          grid.insertRow({});\n\n          var newRow = $(grid.body.rows[collection.length - 1].$el);\n          newRow.attr(\"class\", \"new\").click(function(e) {\n            $(this).attr(\"class\", \"editable\");\n          });\n          $(newRow).pgMakeVisible('backform-tab');\n          return false;\n        }\n      });\n\n      return $dialog;\n    }\n  });\n\n  /*\n   * SQL Tab Control for showing the modified SQL for the node with the\n   * property 'hasSQL' is set to true.\n   *\n   * When the user clicks on the SQL tab, we will send the modified data to the\n   * server and fetch the SQL for it.\n   */\n  var SqlTabControl = Backform.SqlTabControl = Backform.Control.extend({\n    defaults: {\n      label: \"\",\n      controlsClassName: \"pgadmin-controls pg-el-sm-12 SQL\",\n      extraClasses: [],\n      helpMessage: null\n    },\n    template: _.template([\n      '<div class=\"<%=controlsClassName%>\">',\n      '  <textarea class=\"<%=Backform.controlClassName%> <%=extraClasses.join(\\' \\')%>\" name=\"<%=name%>\" placeholder=\"<%-placeholder%>\" <%=disabled ? \"disabled\" : \"\"%> <%=required ? \"required\" : \"\"%>><%-value%></textarea>',\n      '  <% if (helpMessage && helpMessage.length) { %>',\n      '    <span class=\"<%=Backform.helpMessageClassName%>\"><%=helpMessage%></span>',\n      '  <% } %>',\n      '</div>'\n    ].join(\"\\n\")),\n    /*\n     * Initialize the SQL Tab control properly\n     */\n    initialize: function(o) {\n      Backform.Control.prototype.initialize.apply(this, arguments);\n\n      // Save the required information for using it later.\n      this.dialog = o.dialog;\n      this.tabIndex = o.tabIndex;\n\n      _.bindAll(this, 'onTabChange', 'onPanelResized');\n    },\n    getValueFromDOM: function() {\n        return this.formatter.toRaw(this.$el.find(\"textarea\").val(), this.model);\n    },\n    render: function() {\n      if (this.sqlCtrl) {\n        this.sqlCtrl.toTextArea();\n        delete this.sqlCtrl;\n        this.sqlCtrl = null;\n        this.$el.empty();\n        this.model.off('pg-property-tab-changed', this.onTabChange, this);\n        this.model.off('pg-browser-resized', this.onPanelResized, this);\n      }\n      // Use the Backform Control's render function\n      Backform.Control.prototype.render.apply(this, arguments);\n\n      this.sqlCtrl = CodeMirror.fromTextArea(\n        (this.$el.find(\"textarea\")[0]), {\n        lineNumbers: true,\n        lineWrapping: true,\n        mode: \"text/x-pgsql\",\n        readOnly: true,\n        extraKeys: pgAdmin.Browser.editor_shortcut_keys,\n        tabSize: pgAdmin.Browser.editor_options.tabSize,\n        lineWrapping: pgAdmin.Browser.editor_options.wrapCode,\n        autoCloseBrackets: pgAdmin.Browser.editor_options.insert_pair_brackets,\n        matchBrackets: pgAdmin.Browser.editor_options.brace_matching\n      });\n\n      /*\n       * We will listen to the tab change event to check, if the SQL tab has\n       * been clicked or, not.\n       */\n      this.model.on('pg-property-tab-changed', this.onTabChange, this);\n      this.model.on('pg-browser-resized', this.onPanelResized, this);\n\n      return this;\n    },\n    onTabChange: function(obj) {\n\n      // Fetch the information only if the SQL tab is visible at the moment.\n      if (this.dialog && obj.shown == this.tabIndex) {\n\n        // We will send a request to the sever only if something has changed\n        // in a model and also it does not contain any error.\n        if(this.model.sessChanged()) {\n          if (_.size(this.model.errorModel.attributes) == 0) {\n            var self = this,\n                node = self.field.get('schema_node'),\n                msql_url = node.generate_url.apply(\n                  node, [\n                    null, 'msql', this.field.get('node_data'), !self.model.isNew(),\n                    this.field.get('node_info')\n                  ]);\n\n                  // Fetching the modified SQL\n            self.model.trigger('pgadmin-view:msql:fetching', self.method, node);\n\n            $.ajax({\n              url: msql_url,\n              type: 'GET',\n              cache: false,\n              data: self.model.toJSON(true, 'GET'),\n              dataType: \"json\",\n              contentType: \"application/json\"\n            }).done(function(res) {\n              self.sqlCtrl.clearHistory();\n              self.sqlCtrl.setValue(res.data);\n            }).fail(function() {\n              self.model.trigger('pgadmin-view:msql:error', self.method, node, arguments);\n            }).always(function() {\n              self.model.trigger('pgadmin-view:msql:fetched', self.method, node, arguments);\n            });\n          } else {\n            this.sqlCtrl.clearHistory();\n            this.sqlCtrl.setValue('-- ' + gettext('Definition incomplete'));\n          }\n        } else {\n          this.sqlCtrl.clearHistory();\n          this.sqlCtrl.setValue('-- ' + gettext('Nothing changed'));\n        }\n        this.sqlCtrl.refresh.apply(this.sqlCtrl);\n      }\n    },\n    onPanelResized: function(o) {\n      if (o && o.container) {\n        var $tabContent = o.container.find(\n              '.backform-tab > .tab-content'\n            ).first(),\n            $sqlPane = $tabContent.find(\n              'div[role=tabpanel].tab-pane.SQL'\n            );\n        if ($sqlPane.hasClass('active')) {\n          $sqlPane.find('.CodeMirror').css(\n            'cssText',\n            'height: ' + ($tabContent.height() + 8) + 'px !important;'\n          )\n        }\n      }\n    },\n    remove: function() {\n      if (this.sqlCtrl) {\n        this.sqlCtrl.toTextArea();\n        delete this.sqlCtrl;\n        this.sqlCtrl = null;\n\n        this.$el.empty();\n      }\n      this.model.off('pg-property-tab-changed', this.onTabChange, this);\n      this.model.off('pg-browser-resized', this.onPanelResized, this);\n\n      Backform.Control.__super__.remove.apply(this, arguments);\n    }\n});\n   /*\n   * Numeric input Control functionality just like backgrid\n   */\n  var NumericControl = Backform.NumericControl = Backform.InputControl.extend({\n    defaults: {\n      type: \"number\",\n      label: \"\",\n      min: undefined,\n      max: undefined,\n      maxlength: 255,\n      extraClasses: [],\n      helpMessage: null\n    },\n    template: _.template([\n      '<label class=\"<%=Backform.controlLabelClassName%>\"><%=label%></label>',\n      '<div class=\"<%=Backform.controlsClassName%>\">',\n      '  <input type=\"<%=type%>\" class=\"<%=Backform.controlClassName%> <%=extraClasses.join(\\' \\')%>\" name=\"<%=name%>\" min=\"<%=min%>\" max=\"<%=max%>\"maxlength=\"<%=maxlength%>\" value=\"<%-value%>\" placeholder=\"<%-placeholder%>\" <%=disabled ? \"disabled\" : \"\"%> <%=required ? \"required\" : \"\"%> />',\n      '  <% if (helpMessage && helpMessage.length) { %>',\n      '    <span class=\"<%=Backform.helpMessageClassName%>\"><%=helpMessage%></span>',\n      '  <% } %>',\n      '</div>'\n    ].join(\"\\n\"))\n  });\n\n  ///////\n  // Generate a schema (as group members) based on the model's schema\n  //\n  // It will be used by the grid, properties, and dialog view generation\n  // functions.\n  var generateViewSchema = Backform.generateViewSchema = function(\n      node_info, Model, mode, node, treeData, noSQL, subschema\n      ) {\n    var proto = (Model && Model.prototype) || Model,\n        schema = subschema || (proto && proto.schema),\n        pgBrowser = window.pgAdmin.Browser, fields = [],\n        groupInfo = {};\n\n    // 'schema' has the information about how to generate the form.\n    if (schema && _.isArray(schema)) {\n      var evalASFunc = evalASFunc = function(prop) {\n        return ((prop && proto[prop] &&\n              typeof proto[prop] == \"function\") ? proto[prop] : prop);\n      };\n      var groups = {},\n          server_info = node_info && ('server' in node_info) &&\n            pgBrowser.serverInfo && pgBrowser.serverInfo[node_info.server._id],\n          in_catalog = node_info && ('catalog' in node_info);\n\n      _.each(schema, function(s) {\n        // Do we understand - what control, we're creating\n        // here?\n        if (s.type == 'group') {\n          var ver_in_limit = (_.isUndefined(server_info) ? true :\n              ((_.isUndefined(s.server_type) ? true :\n                (server_info.type in s.server_type)) &&\n              (_.isUndefined(s.min_version) ? true :\n               (server_info.version >= s.min_version)) &&\n              (_.isUndefined(s.max_version) ? true :\n               (server_info.version <= s.max_version)))),\n              visible = true;\n\n          if (s.mode && _.isObject(s.mode))\n            visible = (_.indexOf(s.mode, mode) > -1);\n          if (visible)\n            visible = evalASFunc(s.visible);\n\n          groupInfo[s.id] = {\n            label: s.label || s.id,\n            version_compatible: ver_in_limit,\n            visible: visible\n          };\n          return;\n        }\n\n        if (!s.mode || (s && s.mode && _.isObject(s.mode) &&\n          _.indexOf(s.mode, mode) != -1)) {\n          // Each field is kept in specified group, or in\n          // 'General' category.\n          var group = s.group || gettext('General'),\n              control = s.control || Backform.getMappedControl(s.type, mode),\n              cell =  s.cell || Backform.getMappedControl(s.type, 'cell');\n\n          if (control == null) {\n            return;\n          }\n\n          // Generate the empty group list (if not exists)\n          groups[group] = (groups[group] || []);\n          var ver_in_limit = (_.isUndefined(server_info) ? true :\n                ((_.isUndefined(s.server_type) ? true :\n                  (server_info.type in s.server_type)) &&\n                (_.isUndefined(s.min_version) ? true :\n                 (server_info.version >= s.min_version)) &&\n                (_.isUndefined(s.max_version) ? true :\n                 (server_info.version <= s.max_version)))),\n              disabled = ((mode == 'properties') || !ver_in_limit || in_catalog),\n              schema_node = (s.node && _.isString(s.node) &&\n                  s.node in pgBrowser.Nodes &&  pgBrowser.Nodes[s.node]) || node;\n\n          var o = _.extend(_.clone(s), {\n            name: s.id,\n            // This can be disabled in some cases (if not hidden)\n\n            disabled: (disabled ? true : evalASFunc(s.disabled)),\n            editable: _.isUndefined(s.editable) ?\n                pgAdmin.editableCell : evalASFunc(s.editable),\n            subnode: ((_.isString(s.model) && s.model in pgBrowser.Nodes) ?\n                pgBrowser.Nodes[s.model].model : s.model),\n            canAdd: (disabled ? false : evalASFunc(s.canAdd)),\n            canAddRow: (disabled ? false : evalASFunc(s.canAddRow)),\n            canEdit: (disabled ? false : evalASFunc(s.canEdit)),\n            canDelete: (disabled ? false : evalASFunc(s.canDelete)),\n            canEditRow: (disabled ? false : evalASFunc(s.canEditRow)),\n            canDeleteRow: (disabled ? false : evalASFunc(s.canDeleteRow)),\n            transform: evalASFunc(s.transform),\n            mode: mode,\n            control: control,\n            cell: cell,\n            node_info: node_info,\n            schema_node: schema_node,\n            // Do we need to show this control in this mode?\n            visible: evalASFunc(s.visible),\n            node: node,\n            node_data: treeData,\n            version_compatible: ver_in_limit\n          });\n          delete o.id;\n\n          // Temporarily store in dictionary format for\n          // utilizing it later.\n          groups[group].push(o);\n\n          if (s.type == 'nested') {\n            delete o.name;\n            delete o.cell;\n\n            o.schema = Backform.generateViewSchema(\n                node_info, Model, mode, node, treeData, true, s.schema\n                );\n            o.control = o.control || 'tab';\n          }\n        }\n      });\n\n      // Do we have fields to genreate controls, which we\n      // understand?\n      if (_.isEmpty(groups)) {\n        return null;\n      }\n\n      if (!noSQL && node && node.hasSQL && (mode == 'create' || mode == 'edit')) {\n        groups[gettext('SQL')] = [{\n            name: 'sql',\n            visible: true,\n            disabled: false,\n            type: 'text',\n            control: 'sql-tab',\n            node_info: node_info,\n            schema_node: node,\n            node_data: treeData\n        }];\n      }\n\n      // Create an array from the dictionary with proper required\n      // structure.\n      _.each(groups, function(val, key) {\n        fields.push(\n          _.extend(\n            _.defaults(\n              groupInfo[key] || {label: key},\n              {version_compatible: true, visible: true}\n            ), {fields: val})\n          );\n      });\n    }\n\n    return fields;\n  };\n\n  var Select2Formatter = function() {};\n  _.extend(Select2Formatter.prototype, {\n    fromRaw: function(rawData, model) {\n      return encodeURIComponent(rawData);\n    },\n    toRaw: function(formattedData, model) {\n      if (_.isArray(formattedData)) {\n        return _.map(formattedData, decodeURIComponent);\n      } else {\n        if(!_.isNull(formattedData) && !_.isUndefined(formattedData)) {\n          return decodeURIComponent(formattedData);\n        } else {\n          return null;\n        }\n      }\n    }\n  });\n\n  /*\n   *  Backform Select2 control.\n   */\n  var Select2Control = Backform.Select2Control = Backform.SelectControl.extend({\n    defaults: _.extend({}, Backform.SelectControl.prototype.defaults, {\n      select2: {\n        first_empty: true,\n        multiple: false,\n        emptyOptions: false\n      }\n    }),\n    formatter: Select2Formatter,\n    template: _.template([\n      '<label class=\"<%=Backform.controlLabelClassName%>\"><%=label%></label>',\n      '<div class=\"<%=Backform.controlsClassName%>\">',\n      ' <select class=\"<%=Backform.controlClassName%> <%=extraClasses.join(\\' \\')%>\"',\n      '  name=\"<%=name%>\" value=\"<%-value%>\" <%=disabled ? \"disabled\" : \"\"%>',\n      '  <%=required ? \"required\" : \"\"%><%= select2.multiple ? \" multiple>\" : \">\" %>',\n      '  <%=select2.first_empty ? \" <option></option>\" : \"\"%>',\n      '  <% for (var i=0; i < options.length; i++) {%>',\n      '   <% var option = options[i]; %>',\n      '   <option ',\n      '    <% if (option.image) { %> data-image=<%=option.image%> <%}%>',\n      '    value=<%= formatter.fromRaw(option.value) %>',\n      '    <% if (option.selected) {%>selected=\"selected\"<%} else {%>',\n      '    <% if (!select2.multiple && option.value === rawValue) {%>selected=\"selected\"<%}%>',\n      '    <% if (select2.multiple && rawValue && rawValue.indexOf(option.value) != -1){%>selected=\"selected\" data-index=\"rawValue.indexOf(option.value)\"<%}%>',\n      '    <%}%>',\n      '    <%= disabled ? \"disabled\" : \"\"%>><%-option.label%></option>',\n      '  <%}%>',\n      ' </select>',\n      ' <% if (helpMessage && helpMessage.length) { %>',\n      ' <span class=\"<%=Backform.helpMessageClassName%>\"><%=helpMessage%></span>',\n      ' <% } %>',\n      '</div>'\n    ].join(\"\\n\")),\n    render: function() {\n\n      if(this.$sel && this.$sel.select2 &&\n        this.$sel.select2.hasOwnProperty('destroy')) {\n        this.$sel.select2('destroy');\n      }\n\n      var field = _.defaults(this.field.toJSON(), this.defaults),\n          attributes = this.model.toJSON(),\n          attrArr = field.name.split('.'),\n          name = attrArr.shift(),\n          path = attrArr.join('.'),\n          rawValue = this.keyPathAccessor(attributes[name], path),\n          data = _.extend(field, {\n            rawValue: rawValue,\n            value: this.formatter.fromRaw(rawValue, this.model),\n            attributes: attributes,\n            formatter: this.formatter\n          }),\n          evalF = function(f, d, m) {\n            return (_.isFunction(f) ? !!f.apply(d, [m]) : !!f);\n          };\n\n      data.select2 = data.select2 || {};\n      _.defaults(data.select2, this.defaults.select2, {\n        first_empty: true,\n        multiple: false,\n        emptyOptions: false\n      });\n\n      // Evaluate the disabled, visible, and required option\n      _.extend(data, {\n        disabled: evalF(data.disabled, data, this.model),\n        visible:  evalF(data.visible, data, this.model),\n        required: evalF(data.required, data, this.model)\n      });\n\n      // Evaluation the options\n      if (_.isFunction(data.options)) {\n        try {\n          data.options = data.options(this)\n        } catch(e) {\n          // Do nothing\n          data.options = []\n          this.model.trigger(\n            'pgadmin-view:transform:error', this.model, this.field, e\n          );\n        }\n      }\n\n      // Clean up first\n      this.$el.removeClass(Backform.hiddenClassName);\n\n      if (!data.visible)\n        this.$el.addClass(Backform.hiddenClassName);\n\n      this.$el.html(this.template(data)).addClass(field.name);\n\n      var select2Opts = _.extend({\n              disabled: data.disabled\n            }, field.select2, {\n                options: (this.field.get('options') || this.defaults.options)\n            });\n\n      // If disabled then no need to show placeholder\n      if(data.disabled || data.mode === 'properties') {\n        select2Opts['placeholder'] = '';\n      }\n\n      /*\n       * Add empty option as Select2 requires any empty '<option><option>' for\n       * some of its functionality to work and initialize select2 control.\n       */\n\n      if (data.select2.tags && data.select2.emptyOptions) {\n        select2Opts.data = data.rawValue;\n      }\n\n      this.$sel = this.$el.find(\"select\").select2(select2Opts);\n\n      // Add or remove tags from select2 control\n      if (data.select2.tags && data.select2.emptyOptions) {\n        this.$sel.val(data.rawValue);\n        this.$sel.trigger('change.select2');\n        this.$sel.on('select2:unselect', function(evt) {\n\n          $(this).find('option[value=\"'+evt.params.data.text.replace(\"'\",\"\\\\'\").replace('\"','\\\\\"')+'\"]').remove();\n          $(this).trigger('change.select2');\n          if ($(this).val() == null) {\n            $(this).empty();\n          }\n        });\n\n\n      }\n\n      // Select the highlighted item on Tab press.\n      if (this.$sel) {\n        this.$sel.data('select2').on(\"keypress\", function(ev) {\n          var self = this;\n\n          // keycode 9 is for TAB key\n          if (ev.which === 9 && self.isOpen()) {\n            ev.preventDefault();\n            self.trigger('results:select', {});\n          }\n        });\n      }\n\n      this.updateInvalid();\n\n      return this;\n    },\n    getValueFromDOM: function() {\n      var val = Backform.SelectControl.prototype.getValueFromDOM.apply(\n                  this, arguments\n                ),\n        select2Opts = _.extend({}, this.field.get(\"select2\") || this.defaults.select2);\n\n      if (select2Opts.multiple && val == null) {\n        return [];\n      }\n      return val;\n    }\n  });\n\n  var FieldsetControl = Backform.FieldsetControl = Backform.Fieldset.extend({\n    initialize: function(opts) {\n      Backform.Control.prototype.initialize.apply(\n        this, arguments\n        );\n      Backform.Dialog.prototype.initialize.apply(\n        this, [{schema: opts.field.get('schema')}]\n        );\n      this.dialog = opts.dialog;\n      this.tabIndex = opts.tabIndex;\n\n      // Listen to the dependent fields in the model for any change\n      var deps = this.field.get('deps');\n      var self = this;\n\n      if (deps && _.isArray(deps)) {\n        _.each(deps, function(d) {\n          var attrArr = d.split('.'),\n            name = attrArr.shift();\n          self.listenTo(self.model, \"change:\" + name, self.render);\n        });\n      }\n    },\n    // Render using Backform.Fieldset (only if this control is visible)\n    orig_render: Backform.Fieldset.prototype.render,\n    render: function() {\n      var field = _.defaults(this.field.toJSON(), this.defaults),\n          evalF = function(f, d, m) {\n            return (_.isFunction(f) ? !!f.apply(d, [m]) : !!f);\n          };\n\n      if (!field.version_compatible ||\n          !evalF(field.visible, field, this.model)) {\n        this.cleanup();\n        this.$el.empty()\n      } else {\n        this.orig_render.apply(this, arguments);\n      }\n      return this;\n    },\n    formatter: function() {},\n    cleanup: function() {\n      Backform.Fieldset.prototype.cleanup.apply(this);\n    },\n    remove: function() {\n      Backform.Control.prototype.remove.apply(this, arguments);\n      Backform.Dialog.prototype.remove.apply(this, arguments);\n    },\n    className: function() {\n      return 'set-group';\n    },\n    tabPanelClassName: function() {\n      return Backform.tabClassName;\n    },\n    fieldsetClass: 'inline-fieldset',\n    legendClass: '',\n    contentClass: '',\n    collapse: false\n  });\n\n\n  // Backform Tab Control (in bootstrap tabbular)\n  // A collection of field models.\n  var TabControl = Backform.TabControl = Backform.FieldsetControl.extend({\n    tagName: \"div\",\n    className: 'inline-tab-panel',\n    tabPanelClassName: 'inline-tab-panel',\n    initialize: function(opts) {\n      Backform.FieldsetControl.prototype.initialize.apply(\n        this, arguments\n        );\n      this.tabIndex = (opts.tabIndex || parseInt(Math.random() * 1000)) + 1;\n    },\n    // Render using Backform.Dialog (tabular UI) (only if this control is\n    // visible).\n    orig_render: Backform.Dialog.prototype.render,\n    template: Backform.Dialog.prototype.template\n  });\n\n\n  // Backform Tab Control (in bootstrap tabbular)\n  // A collection of field models.\n  var PlainFieldsetControl = Backform.PlainFieldsetControl = Backform.FieldsetControl.extend({\n    initialize: function(opts) {\n      Backform.FieldsetControl.prototype.initialize.apply(\n        this, arguments\n        );\n    },\n    template: {\n      'header': _.template([\n        '<fieldset class=\"<%=fieldsetClass%>\" <%=disabled ? \"disabled\" : \"\"%>>',\n        ' <% if (legend != false) { %>',\n        '  <legend class=\"<%=legendClass%>\" <%=collapse ? \"data-toggle=\\'collapse\\'\" : \"\"%> data-target=\"#<%=cId%>\"><%=collapse ? \"<span class=\\'caret\\'></span>\" : \"\" %></legend>',\n        ' <% } %>',\n        '</fieldset>'\n      ].join(\"\\n\")),\n      'content': _.template(\n        '  <div id=\"<%= cId %>\" class=\"<%=contentClass%>\"></div>'\n    )},\n    fieldsetClass: 'inline-fieldset-without-border',\n    legend: false,\n  });\n\n  /*\n   * Control For Code Mirror SQL text area.\n   */\n  var SqlFieldControl = Backform.SqlFieldControl = Backform.TextareaControl.extend({\n\n    defaults: {\n      label: \"\",\n      extraClasses: [], // Add default control height\n      helpMessage: null,\n      maxlength: 4096,\n      rows: undefined\n    },\n\n    // Customize template to add new styles\n    template: _.template([\n      '<label class=\"<%=Backform.controlLabelClassName%>\"><%=label%></label>',\n      '<div class=\"<%=Backform.controlsClassName%> sql_field_layout <%=extraClasses.join(\\' \\')%>\">',\n      '  <textarea ',\n      '    class=\"<%=Backform.controlClassName%> \" name=\"<%=name%>\"',\n      '    maxlength=\"<%=maxlength%>\" placeholder=\"<%-placeholder%>\" <%=disabled ? \"disabled\" : \"\"%>',\n      '    rows=<%=rows%>',\n      '    <%=required ? \"required\" : \"\"%>><%-value%></textarea>',\n      '  <% if (helpMessage && helpMessage.length) { %>',\n      '    <span class=\"<%=Backform.helpMessageClassName%>\"><%=helpMessage%></span>',\n      '  <% } %>',\n      '</div>'\n    ].join(\"\\n\")),\n\n    /*\n     * Initialize the SQL Field control properly\n     */\n    initialize: function(o) {\n      Backform.TextareaControl.prototype.initialize.apply(this, arguments);\n      this.sqlCtrl = null;\n\n      _.bindAll(this, 'onFocus', 'onBlur', 'refreshTextArea');\n    },\n\n    getValueFromDOM: function() {\n      return this.sqlCtrl.getValue();\n    },\n\n    render: function() {\n      // Clean up the existing sql control\n      if (this.sqlCtrl) {\n        this.model.off('pg-property-tab-changed', this.refreshTextArea, this);\n        this.sqlCtrl.off('focus', this.onFocus);\n        this.sqlCtrl.off('blur', this.onBlur);\n\n        this.sqlCtrl.toTextArea();\n        delete this.sqlCtrl;\n        this.sqlCtrl = null;\n        this.$el.empty();\n      }\n\n      // Use the Backform TextareaControl's render function\n      Backform.TextareaControl.prototype.render.apply(this, arguments);\n\n      var field = _.defaults(this.field.toJSON(), this.defaults),\n          attributes = this.model.toJSON(),\n          attrArr = field.name.split('.'),\n          name = attrArr.shift(),\n          path = attrArr.join('.'),\n          rawValue = this.keyPathAccessor(attributes[name], path),\n          data = _.extend(field, {\n            rawValue: rawValue,\n            value: this.formatter.fromRaw(rawValue, this.model),\n            attributes: attributes,\n            formatter: this.formatter\n          }),\n          evalF = function(f, d, m) {\n            return (_.isFunction(f) ? !!f.apply(d, [m]) : !!f);\n          };\n\n      // Evaluate the disabled, visible option\n      var isDisabled = evalF(data.disabled, data, this.model),\n          isVisible = evalF(data.visible, data, this.model),\n          self = this;\n\n      self.sqlCtrl = CodeMirror.fromTextArea(\n            (self.$el.find(\"textarea\")[0]), {\n            lineNumbers: true,\n            mode: \"text/x-pgsql\",\n            extraKeys: pgAdmin.Browser.editor_shortcut_keys,\n            tabSize: pgAdmin.Browser.editor_options.tabSize,\n            lineWrapping: pgAdmin.Browser.editor_options.wrapCode,\n            autoCloseBrackets: pgAdmin.Browser.editor_options.insert_pair_brackets,\n            matchBrackets: pgAdmin.Browser.editor_options.brace_matching\n          });\n\n      // Disable editor\n      if (isDisabled) {\n        self.sqlCtrl.setOption(\"readOnly\", \"nocursor\");\n        var cm = self.sqlCtrl.getWrapperElement();\n        if (cm) {\n          cm.className += ' cm_disabled';\n        }\n      }\n\n      if (!isVisible)\n        self.$el.addClass(Backform.hiddenClassName);\n\n      // There is an issue with the Code Mirror SQL.\n      //\n      // It does not initialize the code mirror object completely when the\n      // referenced textarea is hidden (not visible), hence - we need to\n      // refresh the code mirror object on 'pg-property-tab-changed' event to\n      // make it work properly.\n      self.model.on('pg-property-tab-changed', this.refreshTextArea, this);\n\n      this.sqlCtrl.on('focus', this.onFocus);\n      this.sqlCtrl.on('blur', this.onBlur);\n\n      var self = this;\n      // Refresh SQL Field to refresh the control lazily after it renders\n      setTimeout(function() {\n        self.refreshTextArea.apply(self);\n      }, 0);\n\n      return self;\n    },\n\n    onFocus: function() {\n      var $ctrl = this.$el.find('.pgadmin-controls').first();\n      if (!$ctrl.hasClass('focused'))\n        $ctrl.addClass('focused');\n    },\n\n    onBlur: function() {\n      this.$el.find('.pgadmin-controls').first().removeClass('focused');\n    },\n\n    refreshTextArea: function() {\n      if (this.sqlCtrl) {\n        this.sqlCtrl.refresh();\n      }\n    },\n\n    remove: function() {\n      // Clean up the sql control\n      if (this.sqlCtrl) {\n        this.sqlCtrl.off('focus', this.onFocus);\n        this.sqlCtrl.off('blur', this.onBlur);\n        delete this.sqlCtrl;\n        this.sqlCtrl = null;\n        this.$el.empty();\n      }\n\n      this.model.off(\"pg-property-tab-changed\", this.refreshTextArea, this);\n\n      Backform.TextareaControl.prototype.remove.apply(this, arguments);\n    }\n  });\n\n  // We will use this control just as a annotate in Backform\n  var NoteControl = Backform.NoteControl = Backform.Control.extend({\n    defaults: {\n      label: gettext(\"Note\"),\n      text: '',\n      extraClasses: [],\n      noteClass: 'backform_control_notes'\n    },\n    template: _.template([\n      '<div class=\"<%=noteClass%> pg-el-xs-12 <%=extraClasses.join(\\' \\')%>\">',\n      '<label class=\"control-label\"><%=label%>:</label>',\n      '<span><%=text%></span></div>'\n    ].join(\"\\n\"))\n  });\n\n  /*\n  * Input File Control: This control is used with Storage Manager Dialog,\n  * It allows user to perform following operations:\n  * - Select File\n  * - Select Folder\n  * - Create File\n  * - Opening Storage Manager Dialog itself.\n  */\n  var FileControl = Backform.FileControl = Backform.InputControl.extend({\n    defaults: {\n      type: \"text\",\n      label: \"\",\n      min: undefined,\n      max: undefined,\n      maxlength: 255,\n      extraClasses: [],\n      dialog_title: '',\n      btn_primary: '',\n      helpMessage: null,\n      dialog_type: 'select_file'\n    },\n    initialize: function(){\n      Backform.InputControl.prototype.initialize.apply(this, arguments);\n\n      // Listen click events of Storage Manager dialog buttons\n      pgAdmin.Browser.Events.on('pgadmin-storage:finish_btn:'+this.field.get('dialog_type'), this.storage_dlg_hander, this);\n    },\n    template: _.template([\n      '<label class=\"<%=Backform.controlLabelClassName%>\"><%=label%></label>',\n      '<div class=\"<%=Backform.controlsClassName%>\">',\n        '<div class=\"file_selection_ctrl form-control\">',\n          '<input type=\"<%=type%>\" class=\"browse_file_input form-control <%=extraClasses.join(\\' \\')%>\" name=\"<%=name%>\" min=\"<%=min%>\" max=\"<%=max%>\"maxlength=\"<%=maxlength%>\" value=\"<%-value%>\" placeholder=\"<%-placeholder%>\" <%=disabled ? \"disabled\" : \"\"%> <%=required ? \"required\" : \"\"%> />',\n          '<button class=\"btn fa fa-ellipsis-h select_item pull-right\" <%=disabled ? \"disabled\" : \"\"%> ></button>',\n          '<% if (helpMessage && helpMessage.length) { %>',\n          '<span class=\"<%=Backform.helpMessageClassName%>\"><%=helpMessage%></span>',\n          '<% } %>',\n        '</div>',\n      '</div>'\n    ].join(\"\\n\")),\n    events: function() {\n      // Inherit all default events of InputControl\n      return _.extend({}, Backform.InputControl.prototype.events, {\n        \"click .select_item\": \"onSelect\"\n      });\n    },\n    onSelect: function(ev) {\n      var dialog_type = this.field.get('dialog_type'),\n          supp_types = this.field.get('supp_types'),\n          btn_primary = this.field.get('btn_primary'),\n          dialog_title = this.field.get('dialog_title'),\n          params = {\n            supported_types: supp_types,\n            dialog_type: dialog_type,\n            dialog_title: dialog_title,\n            btn_primary: btn_primary\n          };\n\n      pgAdmin.FileManager.init();\n      pgAdmin.FileManager.show_dialog(params);\n    },\n    storage_dlg_hander: function(value) {\n      var field = _.defaults(this.field.toJSON(), this.defaults),\n          attrArr = this.field.get(\"name\").split('.'),\n          name = attrArr.shift();\n\n      // Set selected value into the model\n      this.model.set(name, decodeURI(value));\n    },\n    clearInvalid: function() {\n      Backform.InputControl.prototype.clearInvalid.apply(this, arguments);\n      this.$el.removeClass(\"pgadmin-file-has-error\");\n      return this;\n    },\n    updateInvalid: function() {\n      Backform.InputControl.prototype.updateInvalid.apply(this, arguments);\n      // Introduce a new class to fix the error icon placement on the control\n      this.$el.addClass(\"pgadmin-file-has-error\");\n    }\n  });\n\n  var DatetimepickerControl = Backform.DatetimepickerControl =\n      Backform.InputControl.extend({\n    defaults: {\n      type: \"text\",\n      label: \"\",\n      options: {\n        format: \"YYYY-MM-DD HH:mm:ss Z\",\n        showClear: true,\n        showTodayButton: true,\n        toolbarPlacement: 'top',\n        widgetPositioning: {\n          horizontal: 'auto',\n          vertical: 'bottom'\n        },\n      },\n      placeholder: \"YYYY-MM-DD HH:mm:ss Z\",\n      extraClasses: [],\n      helpMessage: null\n    },\n    events: {\n      \"blur input\": \"onChange\",\n      \"change input\": \"onChange\",\n      \"changeDate input\": \"onChange\",\n      \"focus input\": \"clearInvalid\",\n      'db.change': \"onChange\",\n      'click': 'openPicker'\n    },\n    openPicker: function() {\n      if (this.has_datepicker) {\n        this.$el.find(\"input\").datetimepicker('show');\n      }\n    },\n    template: _.template([\n      '<label class=\"<%=Backform.controlLabelClassName%>\"><%=label%></label>',\n      '<div class=\"input-group  <%=Backform.controlsClassName%>\">',\n      ' <input type=\"text\" class=\"<%=Backform.controlClassName%> <%=extraClasses.join(\\' \\')%>\" name=\"<%=name%>\" value=\"<%-value%>\" placeholder=\"<%-placeholder%>\" <%=disabled ? \"disabled\" : \"\"%> <%=required ? \"required\" : \"\"%> />',\n      ' <span class=\"input-group-addon\">',\n      '  <span class=\"fa fa-calendar\"></span>',\n      ' </span>',\n      '</div>',\n      '<% if (helpMessage && helpMessage.length) { %>',\n      ' <div class=\"<%=Backform.controlsClassName%>\">',\n      '   <span class=\"<%=Backform.helpMessageClassName%>\"><%=helpMessage%></span>',\n      ' </div>',\n      '<% } %>'\n    ].join(\"\\n\")),\n    render: function() {\n      var field = _.defaults(this.field.toJSON(), this.defaults),\n          attributes = this.model.toJSON(),\n          attrArr = field.name.split('.'),\n          name = attrArr.shift(),\n          path = attrArr.join('.'),\n          rawValue = this.keyPathAccessor(attributes[name], path),\n          data = _.extend(field, {\n            rawValue: rawValue,\n            value: this.formatter.fromRaw(rawValue, this.model),\n            attributes: attributes,\n            formatter: this.formatter\n          }),\n          evalF = function(f, m) {\n            return (_.isFunction(f) ? !!f(m) : !!f);\n          };\n\n      // Evaluate the disabled, visible, and required option\n      _.extend(data, {\n        disabled: evalF(data.disabled, this.model),\n        visible:  evalF(data.visible, this.model),\n        required: evalF(data.required, this.model)\n      });\n      if (!data.disabled) {\n        data.placeholder = data.placeholder || this.defaults.placeholder;\n      }\n\n      // Clean up first\n      if (this.has_datepicker)\n        this.$el.find(\"input\").datetimepicker('destroy');\n      this.$el.empty();\n      this.$el.removeClass(Backform.hiddenClassName);\n\n\n      this.$el.html(this.template(data)).addClass(field.name);\n\n      if (!data.visible) {\n        this.has_datepicker = false;\n        this.$el.addClass(Backform.hiddenClassName);\n      } else {\n        this.has_datepicker = true;\n        var self = this;\n        this.$el.find(\"input\").first().datetimepicker(\n          _.extend({\n            keyBinds: {\n              enter: function(widget) {\n                var picker = this;\n                if (widget) {\n                  setTimeout(function() {\n                    picker.toggle();\n                    self.$el.find('input').first().blur();\n                  }, 10);\n                } else {\n                  setTimeout(function() { picker.toggle(); }, 10);\n                }\n              },\n              tab: function(widget) {\n                if (!widget) {\n                  // blur the input\n                  setTimeout(\n                    function() { self.$el.find('input').first().blur(); }, 10\n                  );\n                }\n              },\n              escape: function(widget) {\n                if (widget) {\n                  var picker = this;\n                  setTimeout(function() {\n                    picker.toggle();\n                    self.$el.find('input').first().blur();\n                  }, 10);\n                }\n              }\n            }\n          }, this.defaults.options, this.field.get(\"options\"),\n          {'date': data.value})\n        );\n      }\n      this.updateInvalid();\n\n      return this;\n    },\n    cleanup: function() {\n      if (this.has_datepicker)\n        this.$el.find(\"input\").datetimepicker('destroy');\n      this.$el.empty();\n    }\n  });\n\n  return Backform;\n}));\n\n\n\n// WEBPACK FOOTER //\n// pgadmin/static/js/backform.pgadmin.js","define('pgadmin.preferences', [\n  'sources/gettext', 'sources/url_for', 'jquery', 'underscore', 'alertify',\n  'sources/pgadmin', 'backform', 'pgadmin.browser', 'pgadmin.backform'\n], function(gettext, url_for, $, _, alertify, pgAdmin, Backform, pgBrowser) {\n  // This defines the Preference/Options Dialog for pgAdmin IV.\n    pgAdmin = pgAdmin || window.pgAdmin || {};\n\n    /*\n     * Hmm... this module is already been initialized, we can refer to the old\n     * object from here.\n     */\n    if (pgAdmin.Preferences)\n        return pgAdmin.Preferences;\n\n    pgAdmin.Preferences = {\n      init: function() {\n        if (this.initialized)\n          return;\n\n        this.initialized = true;\n\n        // Declare the Preferences dialog\n        alertify.dialog('preferencesDlg', function() {\n\n          var jTree,         // Variable to create the aci-tree\n              controls = [], // Keep tracking of all the backform controls\n                             // created by the dialog.\n              // Dialog containter\n              $container = $(\"<div class='preferences_dialog'></div>\");\n\n\n          /*\n           * Preference Model\n           *\n           * This model will be used to keep tracking of the changes done for\n           * an individual option.\n           */\n          var PreferenceModel = Backbone.Model.extend({\n            idAttribute: 'id',\n            defaults: {\n              id: undefined,\n              value: undefined\n            }\n          });\n\n          /*\n           * Preferences Collection object.\n           *\n           * We will use only one collection object to keep track of all the\n           * preferences.\n           */\n          var changed = {},\n              preferences = this.preferences = new (Backbone.Collection.extend({\n                model: PreferenceModel,\n                url: url_for('preferences.index'),\n                updateAll: function() {\n                  // We will send only the modified data to the server.\n                  for (var key in changed) {\n                    this.get(key).save();\n                  }\n                  return true;\n                }\n              }))(null);\n\n          preferences.on('reset', function() {\n            // Reset the changed variables\n            changed = {};\n          });\n\n          preferences.on('change', function(m) {\n            var id = m.get('id');\n            if (!(id in changed)) {\n              // Keep track of the original value\n              changed[id] = m._previousAttributes.value;\n            } else if (_.isEqual(m.get('value'), changed[id])) {\n              // Remove unchanged models.\n              delete changed[id];\n            }\n          });\n\n          /*\n           * Function: renderPreferencePanel\n           *\n           * Renders the preference panel in the content div based on the given\n           * preferences.\n           */\n          var renderPreferencePanel = function(prefs) {\n            /*\n             * Clear the existing html in the preferences content\n             */\n            var content = $container.find('.preferences_content');\n            content.empty();\n\n            /*\n             * We should clean up the existing controls.\n             */\n            if (controls) {\n              _.each(controls, function(c) {\n                c.remove();\n              });\n            }\n            controls = [];\n\n            /*\n             * We will create new set of controls and render it based on the\n             * list of preferences using the Backform Field, Control.\n             */\n            _.each(prefs, function(p) {\n\n              var m = preferences.get(p.id);\n              m.errorModel = new Backbone.Model();\n              var f = new Backform.Field(\n                    _.extend({}, p, {id: 'value', name: 'value'})\n                    ),\n                  cntr = new (f.get(\"control\")) ({\n                    field: f,\n                    model: m\n                  });\n                  content.append(cntr.render().$el);\n\n                  // We will keep track of all the controls rendered at the\n                  // moment.\n                  controls.push(cntr);\n            });\n\n          };\n\n          /*\n           * Function: dialogContentCleanup\n           *\n           * Do the dialog container cleanup on openning.\n           */\n\n          var dialogContentCleanup = function() {\n              // Remove the existing preferences\n              if (!jTree)\n                return;\n\n              /*\n               * Remove the aci-tree (mainly to remove the jquery object of\n               * aciTree from the system for this container).\n               */\n              try {\n                jTreeApi = jTree.aciTree('destroy');\n              } catch(ex) {\n                // Sometimes - it fails to destroy the tree properly and throws\n                // exception.\n              }\n              jTree.off('acitree', treeEventHandler);\n\n              // We need to reset the data from the preferences too\n              preferences.reset();\n\n              /*\n               * Clean up the existing controls.\n               */\n              if (controls) {\n                _.each(controls, function(c) {\n                  c.remove();\n                });\n              }\n              controls = [];\n\n              // Remove all the objects now.\n              $container.empty();\n            },\n            /*\n             * Function: selectFirstCategory\n             *\n             * Whenever a user select a module instead of a category, we should\n             * select the first categroy of it.\n             */\n            selectFirstCategory = function(api, item) {\n              var  data = item ? api.itemData(item) : null;\n\n              if (data && data.preferences) {\n                  api.select(item);\n                  return;\n              }\n              item = api.first(item);\n              selectFirstCategory(api, item);\n            },\n            /*\n             * A map on how to create controls for each datatype in preferences\n             * dialog.\n             */\n            getControlMappedForType = function(p) {\n              switch(p.type) {\n                case 'text':\n                    return 'input';\n                case 'boolean':\n                  p.options = {\n                      onText: gettext('True'),\n                      offText: gettext('False'),\n                      onColor: 'success',\n                      offColor: 'default',\n                      size: 'mini'\n                    };\n                  return 'switch';\n                case 'node':\n                    p.options = {\n                      onText: gettext('Show'),\n                      offText: gettext('Hide'),\n                      onColor: 'success',\n                      offColor: 'default',\n                      size: 'mini'\n                    };\n                    return 'switch';\n                case 'integer':\n                  return 'numeric';\n                case 'numeric':\n                  return 'numeric';\n                case 'date':\n                  return 'datepicker';\n                case 'datetime':\n                  return 'datetimepicker';\n                case 'options':\n                  var opts = [];\n                  // Convert the array to SelectControl understandable options.\n                  _.each(p.options, function(o) {\n                    if('label' in o && 'value' in o){\n                      opts.push({'label': o.label, 'value': o.value});\n                    } else {\n                      opts.push({'label': o, 'value': o});\n                    }\n                  });\n                  p.options = opts;\n                  return 'select2';\n                case 'multiline':\n                  return 'textarea';\n                case 'switch':\n                  return 'switch';\n                default:\n                    if (console && console.log) {\n                      // Warning for developer only.\n                       console.log(\n                         \"Hmm.. We don't know how to render this type - ''\" + type + \"' of control.\"\n                       );\n                    }\n                  return 'input';\n              }\n            },\n            /*\n             * function: treeEventHandler\n             *\n             * It is basically a callback, which listens to aci-tree events,\n             * and act accordingly.\n             *\n             * + Selection of the node will existance of the preferences for\n             *   the selected tree-node, if not pass on to select the first\n             *   category under a module, else pass on to the render function.\n             *\n             * + When a new node is added in the tree, it will add the relavent\n             *   preferences in the preferences model collection, which will be\n             *   called during initialization itself.\n             *\n             *\n             */\n            treeEventHandler = function(event, api, item, eventName) {\n              // Look for selected item (if none supplied)!\n              item = item || api.selected();\n\n              // Event tree item has itemData\n              var d = item ? api.itemData(item) : null;\n\n              /*\n               * boolean (switch/checkbox), string, enum (combobox - enumvals),\n               * integer (min-max), font, color\n               */\n              switch (eventName) {\n                case \"selected\":\n                  if (!d)\n                    return true;\n\n                  if (d.preferences) {\n                    /*\n                     * Clear the existing html in the preferences content\n                     */\n                    renderPreferencePanel(d.preferences);\n\n                    return true;\n                  } else{\n                    selectFirstCategory(api, item);\n                  }\n                  break;\n                case 'added':\n                  if (!d)\n                    return true;\n\n                  // We will add the preferences in to the preferences data\n                  // collection.\n                  if (d.preferences && _.isArray(d.preferences)) {\n                    _.each(d.preferences, function(p) {\n                      preferences.add({\n                        'id': p.id, 'value': p.value, 'cid': d.id, 'mid': d.mid\n                      });\n                      /*\n                       * We don't know until now, how to render the control for\n                       * this preference.\n                       */\n                      if (!p.control) {\n                        p.control = getControlMappedForType(p);\n                      }\n                      if (p.help_str) {\n                        p.helpMessage = p.help_str;\n                      }\n                    });\n                  }\n                  d.sortable = false;\n                  break;\n                case 'loaded':\n                  // Let's select the first category from the prefrences.\n                  // We need to wait for sometime before all item gets loaded\n                  // properly.\n                  setTimeout(\n                    function() {\n                      selectFirstCategory(api, null);\n                    }, 300);\n                  break;\n              }\n              return true;\n          };\n\n          // Dialog property\n          return {\n            main: function() {\n\n              // Remove the existing content first.\n              dialogContentCleanup();\n\n              $container.append(\n                \"<div class='pg-el-xs-3 preferences_tree aciTree'></div>\"\n              ).append(\n                \"<div class='pg-el-xs-9 preferences_content'>\" +\n                gettext('Category is not selected.') +\n                \"</div>\"\n              );\n\n              // Create the aci-tree for listing the modules and categories of\n              // it.\n              jTree = $container.find('.preferences_tree');\n              jTree.on('acitree', treeEventHandler);\n\n              jTree.aciTree({\n                selectable: true,\n                expand: true,\n                ajax: {\n                  url: url_for('preferences.index')\n                }\n              });\n\n              this.show();\n            },\n            setup: function() {\n              return {\n                buttons:[{\n                  text: '', key: 112,\n                  className: 'btn btn-default pull-left fa fa-lg fa-question',\n                  attrs:{\n                    name:'dialog_help', type:'button',\n                    label: gettext('Preferences'),\n                    url: url_for(\n                      'help.static', {'filename': 'preferences.html'}\n                    )\n                  }\n                },{\n                  text: gettext('OK'), key: 13, className: \"btn btn-primary fa fa-lg fa-save pg-alertify-button\"\n                },{\n                  text: gettext('Cancel'), key: 27, className: \"btn btn-danger fa fa-lg fa-times pg-alertify-button\"\n                }],\n                focus: { element: 0 },\n                options: {\n                  padding: !1,\n                  overflow: !1,\n                  title: gettext('Preferences'),\n                  closableByDimmer: false,\n                  modal:false,\n                  pinnable: false\n                }\n              };\n            },\n            callback: function(e) {\n              if (e.button.element.name == \"dialog_help\") {\n                  e.cancel = true;\n                  pgBrowser.showHelp(e.button.element.name, e.button.element.getAttribute('url'),\n                    null, null, e.button.element.getAttribute('label'));\n                  return;\n               }\n\n              if (e.button.text == gettext('OK')){\n                preferences.updateAll();\n                // Refresh preferences cache\n                pgBrowser.cache_preferences();\n              }\n            },\n            build: function() {\n              this.elements.content.appendChild($container.get(0));\n              alertify.pgDialogBuild.apply(this)\n            },\n            hooks: {\n              onshow: function() {\n                $(this.elements.body).addClass('pgadmin-preference-body');\n              }\n            }\n          };\n        });\n\n      },\n      show: function() {\n        alertify.preferencesDlg(true).resizeTo('60%', '60%');\n      }\n    };\n\n    return pgAdmin.Preferences;\n  });\n\n\n\n// WEBPACK FOOTER //\n// pgadmin/preferences/static/js/preferences.js","define(\n    ['sources/gettext', 'underscore', 'alertify', 'sources/pgadmin'],\nfunction(gettext, _, alertify, pgAdmin) {\n  pgAdmin.Browser = pgAdmin.Browser || {};\n\n  _.extend(pgAdmin.Browser, {\n    report_error: function(title, message, info) {\n      var text = '<div class=\"panel-group\" id=\"accordion\" role=\"tablist\" aria-multiselectable=\"true\">\\\n           <div class=\"panel panel-default\">\\\n           <div class=\"panel-heading\" role=\"tab\" id=\"headingOne\">\\\n           <h4 class=\"panel-title\">\\\n           <a data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseOne\" aria-expanded=\"true\" aria-controls=\"collapseOne\">\\\n           ' + gettext(\"Error message\") + '</a>\\\n        </h4>\\\n        </div>\\\n        <div id=\"collapseOne\" class=\"panel-collapse collapse in\" role=\"tabpanel\" aria-labelledby=\"headingOne\">\\\n        <div class=\"panel-body\" style=\"overflow: auto;\">' + unescape(message) + '</div>\\\n        </div>\\\n        </div>';\n\n      if (info != null && info != '') {\n        text += '<div class=\"panel panel-default\">\\\n            <div class=\"panel-heading\" role=\"tab\" id=\"headingTwo\">\\\n            <h4 class=\"panel-title\">\\\n            <a class=\"collapsed\" data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseTwo\" aria-expanded=\"false\" aria-controls=\"collapseTwo\">\\\n            ' + gettext(\"Additional info\") + '</a>\\\n          </h4>\\\n          </div>\\\n          <div id=\"collapseTwo\" class=\"panel-collapse collapse\" role=\"tabpanel\" aria-labelledby=\"headingTwo\">\\\n          <div class=\"panel-body\" style=\"overflow: auto;\">' + unescape(info) + '</div>\\\n          </div>\\\n          </div>\\\n          </div>'\n      }\n\n      text += '</div>';\n      alertify.alert(\n        title,\n        text\n      )\n    },\n  });\n\n  return pgAdmin.Browser.report_error;\n});\n\n\n\n// WEBPACK FOOTER //\n// pgadmin/browser/static/js/error.js","define(\n   ['underscore', 'underscore.string', 'sources/pgadmin', 'jquery', 'backbone'],\nfunction(_, S, pgAdmin, $, Backbone) {\n  var pgBrowser = pgAdmin.Browser = pgAdmin.Browser || {};\n\n  pgBrowser.DataModel = Backbone.Model.extend({\n      /*\n       * Parsing the existing data\n       */\n      on_server: false,\n      parse: function(res) {\n        var self = this;\n        if (res && _.isObject(res) && 'node' in res && res['node']) {\n          self.tnode = _.extend({}, res.node);\n          delete res.node;\n        }\n        var objectOp = function(schema) {\n          if (schema && _.isArray(schema)) {\n            _.each(schema, function(s) {\n              var obj, val;\n              switch(s.type) {\n                case 'collection':\n                  obj = self.get(s.id);\n                  val = res[s.id];\n                  if (_.isArray(val) || _.isObject(val)) {\n                    if (!obj || !(obj instanceof Backbone.Collection)) {\n                      obj = new (pgBrowser.Node.Collection)(val, {\n                        model: ((_.isString(s.model) &&\n                                 s.model in pgBrowser.Nodes) ?\n                                pgBrowser.Nodes[s.model].model : s.model),\n                        top: self.top || self,\n                        handler: self,\n                        parse: true,\n                        silent: true,\n                        attrName: s.id\n                        });\n\n                      /*\n                       * Nested collection models may or may not have idAttribute.\n                       * So to decide whether model is new or not set 'on_server'\n                       * flag on such models.\n                       */\n\n                      self.set(s.id, obj, {silent: true, parse: true, on_server : true});\n                    } else {\n                      /*\n                       * Nested collection models may or may not have idAttribute.\n                       * So to decide whether model is new or not set 'on_server'\n                       * flag on such models.\n                       */\n                      obj.reset(val, {silent: true, parse: true, on_server : true});\n                    }\n                  }\n                  else {\n                    obj = null;\n                  }\n                  self.set(s.id, obj, {silent: true});\n                  res[s.id] = obj;\n                  break;\n                case 'model':\n                  obj = self.get(s.id);\n                  val = res[s.id];\n                  if (!_.isUndefined(val) && !_.isNull(val)) {\n                    if (!obj || !(obj instanceof Backbone.Model)) {\n                      if (_.isString(s.model) &&\n                          s.model in pgBrowser.Nodes[s.model]) {\n                        obj = new (pgBrowser.Nodes[s.model].Model)(\n                            obj, {\n                              silent: true, top: self.top || self, handler: self,\n                              attrName: s.id\n                            }\n                            );\n                      } else {\n                        obj = new (s.model)(obj, {\n                          silent: true, top: self.top || self, handler: self,\n                          attrName: s.id\n                        });\n                      }\n                    }\n                    obj.set(val, {parse: true, silent: true});\n                  } else {\n                    obj = null;\n                  }\n                  res[s.id] = obj;\n                  break;\n                case 'nested':\n                  objectOp(s.schema);\n\n                  break;\n                default:\n                  break;\n              }\n            });\n          }\n        };\n\n        objectOp(self.schema);\n\n        return res;\n      },\n      isNew: function() {\n        if (this.has(this.idAttribute)) {\n          return !this.has(this.idAttribute);\n        }\n        return !this.on_server;\n      },\n      primary_key: function() {\n        if (this.keys && _.isArray(this.keys)) {\n          var res = {}, self = this;\n\n          _.each(self.keys, function(k) {\n            res[k] = self.attributes[k];\n          });\n\n          return JSON.stringify(res);\n        }\n        return this.cid;\n      },\n      initialize: function(attributes, options) {\n        var self = this;\n        self._previous_key_values = {};\n\n        if (!_.isUndefined(options) && 'on_server' in options && options.on_server) {\n          self.on_server = true;\n        }\n\n        Backbone.Model.prototype.initialize.apply(self, arguments);\n\n        if (_.isUndefined(options) || _.isNull(options)) {\n          options = attributes || {};\n          attributes = null;\n        }\n\n        self.sessAttrs = {};\n        self.fieldData = {};\n        self.origSessAttrs = {};\n        self.objects = [];\n        self.arrays = [];\n        self.attrName = options.attrName,\n        self.top = (options.top || self.collection && self.collection.top || self.collection || self);\n        self.handler = options.handler ||\n          (self.collection && self.collection.handler);\n        self.trackChanges = false;\n        self.errorModel = new Backbone.Model();\n        self.node_info = options.node_info;\n\n        var obj;\n        var objectOp = function(schema) {\n          if (schema && _.isArray(schema)) {\n            _.each(schema, function(s) {\n\n              switch(s.type) {\n                case 'int':\n                case 'numeric':\n                  self.fieldData[s.id] = {\n                    id: s.id,\n                    label: s.label,\n                    type: s.type,\n                    min: s.min || undefined,\n                    max: s.max || undefined\n                  }\n                  break;\n                default:\n                  self.fieldData[s.id] = {\n                      id: s.id,\n                      label: s.label,\n                      type: s.type\n                    }\n              }\n\n              switch(s.type) {\n                case 'array':\n                  self.arrays.push(s.id);\n\n                  break;\n                case 'collection':\n                  obj = self.get(s.id)\n                  if (!obj || !(obj instanceof pgBrowser.Node.Collection)) {\n                    if (_.isString(s.model) &&\n                      s.model in pgBrowser.Nodes) {\n                      var node = pgBrowser.Nodes[s.model];\n                      obj = new (node.Collection)(obj, {\n                        model: node.model,\n                        top: self.top || self,\n                        handler: self,\n                        attrName: s.id\n                      });\n                    } else {\n                      obj = new (pgBrowser.Node.Collection)(obj, {\n                        model: s.model,\n                        top: self.top || self,\n                        handler: self,\n                        attrName: s.id\n                      });\n                    }\n                  }\n\n                  obj.name = s.id;\n                  self.objects.push(s.id);\n                  self.set(s.id, obj, {silent: true});\n\n                  break;\n                case 'model':\n                  obj = self.get(s.id)\n                  if (!obj || !(obj instanceof Backbone.Model)) {\n                    if (_.isString(s.model) &&\n                        s.model in pgBrowser.Nodes[s.model]) {\n                      obj = new (pgBrowser.Nodes[s.model].Model)(\n                          obj, {\n                            top: self.top || self, handler: self, attrName: s.id\n                          }\n                          );\n                    } else {\n                      obj = new (s.model)(\n                          obj, {\n                            top: self.top || self, handler: self, attrName: s.id\n                          });\n                    }\n                  }\n\n                  obj.name = s.id;\n                  self.objects.push(s.id);\n                  self.set(s.id, obj, {silent: true});\n\n                  break;\n                case 'nested':\n                  objectOp(s.schema);\n                  break;\n                default:\n                  return;\n              }\n            });\n          }\n        };\n        objectOp(self.schema);\n\n        if (self.handler && self.handler.trackChanges) {\n          self.startNewSession();\n        }\n\n        if ('keys' in self && _.isArray(self.keys)) {\n          _.each(self.keys, function(key) {\n              self.on(\"change:\" + key, function(m) {\n                self._previous_key_values[key] =  m.previous(key);\n              })\n          })\n        }\n        return self;\n      },\n      // Create a reset function, which allow us to remove the nested object.\n      reset: function(opts) {\n        var obj;\n\n        if (opts && opts.stop)\n            this.stopSession();\n\n        for(var id in this.objects) {\n          obj = this.get(id);\n\n          if (obj) {\n            if (obj instanceof pgBrowser.DataModel) {\n              obj.reset(opts);\n            } else if (obj instanceof Backbone.Model) {\n              obj.clear(opts);\n            } else if (obj instanceof pgBrowser.DataCollection) {\n              obj.reset(opts);\n            } else if (obj instanceof Backbone.Collection) {\n              obj.each(function(m) {\n                if (m instanceof Backbone.DataModel) {\n                  obj.reset();\n                  obj.clear(opts);\n                }\n              });\n              if (!(opts instanceof Array)){ opts = [opts] }\n              Backbone.Collection.prototype.reset.apply(obj, opts);\n            }\n          }\n        }\n        this.clear(opts);\n      },\n      sessChanged: function() {\n        var self = this;\n\n        return (_.size(self.sessAttrs) > 0 ||\n            _.some(self.objects, function(k) {\n              var obj = self.get(k);\n              if (!(_.isNull(obj) || _.isUndefined(obj))) {\n                return obj.sessChanged();\n              }\n              return false;\n            }));\n      },\n      sessValid: function() {\n        var self = this;\n        // Perform default validations.\n        if ('default_validate' in self && typeof(self.default_validate) == 'function' &&\n            _.isString(self.default_validate())) {\n          return false;\n        }\n\n        if ('validate' in self && _.isFunction(self.validate) &&\n            _.isString(self.validate.apply(self))) {\n          return false;\n        }\n        return true;\n      },\n      set: function(key, val, options) {\n        var opts = _.isObject(key) ? val : options;\n\n        this._changing = true;\n        this._previousAttributes = _.clone(this.attributes);\n        this.changed = {};\n\n        var res = Backbone.Model.prototype.set.call(this, key, val, options);\n        this._changing = false;\n\n        if ((opts&& opts.internal) || !this.trackChanges) {\n          return true;\n        }\n\n        if (key != null && res) {\n          var attrs = {},\n              self = this,\n              msg;\n\n          var attrChanged = function(v, k) {\n            if (k in self.objects) {\n              return;\n            }\n            attrs[k] = v;\n            if (_.isEqual(self.origSessAttrs[k], v)) {\n              delete self.sessAttrs[k];\n            } else {\n              self.sessAttrs[k] = v;\n            }\n          };\n\n          // Handle both `\"key\", value` and `{key: value}` -style arguments.\n          if (typeof key === 'object') {\n            _.each(key, attrChanged);\n          } else {\n            attrChanged(val, key);\n          }\n\n          self.trigger('pgadmin-session:set', self, attrs);\n          if (!options || !options.silent) {\n            self.trigger('change', self, options);\n          }\n\n          // Perform default validations.\n\n          if ('default_validate' in self && typeof(self.default_validate) == 'function') {\n            msg = self.default_validate();\n          }\n\n          if ('validate' in self && typeof(self['validate']) === 'function') {\n\n            if (!msg) {\n              msg = self.validate(_.keys(attrs));\n            }\n          }\n\n          /*\n           * If any parent present, we will need to inform the parent - that\n           * I have some issues/fixed the issue.\n           *\n           * If not parent found, we will raise the issue\n           */\n          if (_.size(self.errorModel.attributes) == 0) {\n              if (self.collection || self.handler) {\n                (self.collection || self.handler).trigger(\n                    'pgadmin-session:model:valid', self, (self.collection || self.handler)\n                    );\n              } else {\n                self.trigger('pgadmin-session:valid', self.sessChanged(), self);\n              }\n            } else {\n              msg = msg || _.values(self.errorModel.attributes)[0];\n              if (self.collection || self.handler) {\n                (self.collection || self.handler).trigger(\n                    'pgadmin-session:model:invalid', msg, self, (self.collection || self.handler)\n                    );\n              } else {\n                self.trigger('pgadmin-session:invalid', msg, self);\n              }\n            }\n\n          return res;\n        }\n        return res;\n      },\n      /*\n       * We do support modified data only through session by tracking changes.\n       *\n       * In normal mode, we will use the toJSON function of Backbone.Model.\n       * In session mode, we will return all the modified data only. And, the\n       * objects (collection, and model) will be return as stringified JSON,\n       * only from the parent object.\n       */\n      toJSON: function(session, method) {\n        var self = this, res, isNew = self.isNew();\n\n        session = (typeof(session) != \"undefined\" && session == true);\n\n        if (!session || isNew) {\n          res = Backbone.Model.prototype.toJSON.call(this, arguments);\n        } else {\n          res = {};\n          res[self.idAttribute || '_id'] = self.get(self.idAttribute || '_id');\n          res = _.extend(res, self.sessAttrs);\n        }\n\n        /*\n         * We do have number objects (models, collections), which needs to be\n         * converted to JSON data manually.\n         */\n        _.each(\n            self.objects,\n            function(k) {\n              var obj = self.get(k);\n              /*\n               * For session changes, we only need the modified data to be\n               * transformed to JSON data.\n               */\n              if (session) {\n                if (res[k] instanceof Array) {\n                  res[k] = JSON.stringify(res[k]);\n                } else if ((obj && obj.sessChanged && obj.sessChanged()) || isNew) {\n                  res[k] = obj && obj.toJSON(!isNew);\n                  /*\n                   * We will run JSON.stringify(..) only from the main object,\n                   * not for the JSON object within the objects, that only when\n                   * HTTP method is 'GET'.\n                   *\n                   * We do stringify the object, so that - it will not be\n                   * translated to wierd format using jQuery.\n                   */\n                  if (obj && method && method == 'GET') {\n                    res[k] = JSON.stringify(res[k]);\n                  }\n                } else {\n                  delete res[k];\n                }\n              } else if (!(res[k] instanceof Array)) {\n                res[k] = (obj && obj.toJSON());\n              }\n            });\n        if (session) {\n          _.each(\n              self.arrays,\n              function(a) {\n                /*\n                 * For session changes, we only need the modified data to be\n                 * transformed to JSON data.\n                 */\n                if (res[a] && res[a] instanceof Array) {\n                  res[a] = JSON.stringify(res[a]);\n                }\n              });\n        }\n        return res;\n      },\n      startNewSession: function() {\n        var self = this;\n\n        if (self.trackChanges) {\n          self.trigger('pgadmin-session:stop', self);\n          self.off('pgadmin-session:model:invalid', self.onChildInvalid);\n          self.off('pgadmin-session:model:valid', self.onChildValid);\n          self.off('pgadmin-session:changed', self.onChildChanged);\n          self.off('pgadmin-session:added', self.onChildChanged);\n          self.off('pgadmin-session:removed', self.onChildChanged);\n        }\n\n        self.trackChanges = true;\n        self.sessAttrs = {};\n        self.origSessAttrs = _.clone(self.attributes);\n\n        var res = false;\n\n        _.each(self.objects, function(o) {\n          var obj = self.get(o);\n\n          if (_.isUndefined(obj) || _.isNull(obj)) {\n            return;\n          }\n\n          delete self.origSessAttrs[o];\n\n          if (obj && 'startNewSession' in obj && _.isFunction(obj.startNewSession)) {\n            obj.startNewSession();\n          }\n        });\n\n        // Let people know, I have started session hanlding\n        self.trigger('pgadmin-session:start', self);\n\n        // Let me listen to the my child invalid/valid messages\n        self.on('pgadmin-session:model:invalid', self.onChildInvalid);\n        self.on('pgadmin-session:model:valid', self.onChildValid);\n        self.on('pgadmin-session:changed', self.onChildChanged);\n        self.on('pgadmin-session:added', self.onChildChanged);\n        self.on('pgadmin-session:removed', self.onChildChanged);\n      },\n\n      onChildInvalid: function(msg, obj) {\n        var self = this;\n\n        if (self.trackChanges && obj) {\n          var objName = obj.attrName;\n\n          if (!objName) {\n            var hasPrimaryKey = obj.primary_key &&\n                  typeof(obj.primary_key) === 'function';\n              var key = hasPrimaryKey ? obj.primary_key() : obj.cid,\n                comparator = hasPrimaryKey ?\n                  function(k) {\n                    var o = self.get('k');\n\n                    if (o && o.primary_key() === key) {\n                      objName = k;\n                      return true;\n                    }\n\n                    return false;\n                  } :\n                  function(k) {\n                    var o = self.get(k);\n\n                    if (o.cid === key) {\n                      objName = k;\n                      return true;\n                    }\n\n                    return false;\n                  };\n            _.findIndex(self.objects, comparator);\n          }\n\n          if (objName) {\n            /*\n             * Update the error message for this object.\n             */\n            self.errorModel.set(objName, msg);\n\n            if (self.handler) {\n              (self.handler).trigger('pgadmin-session:model:invalid', msg, self, self.handler);\n            } else  {\n              self.trigger('pgadmin-session:invalid', msg, self);\n            }\n          }\n        }\n\n        return this;\n      },\n      onChildValid: function(obj) {\n        var self = this;\n\n        if (self.trackChanges && obj) {\n          var objName = obj.attrName;\n\n          if (!objName) {\n              var hasPrimaryKey = (obj.primary_key &&\n                (typeof(obj.primary_key) === 'function'));\n              var key = hasPrimaryKey ? obj.primary_key() : obj.cid,\n              comparator = hasPrimaryKey ?\n                function(k) {\n                  var o = self.get('k');\n\n                  if (o && o.primary_key() === key) {\n                    objName = k;\n                    return true;\n                  }\n\n                  return false;\n                } :\n                function(k) {\n                  var o = self.get('k');\n\n                  if (o && o.cid === key) {\n                    objName = k;\n                    return true;\n                  }\n\n                  return false;\n                };\n\n              _.findIndex(self.objects, comparator);\n          }\n\n          var msg = null,\n              validate = function(m, attrs) {\n                if ('default_validate' in m && typeof(m.default_validate) == 'function') {\n                  msg = m.default_validate();\n                  if (_.isString(msg)) {\n                    return msg;\n                  }\n                }\n\n                if ('validate' in m && typeof(m.validate) == 'function') {\n                  msg = m.validate(attrs);\n\n                  return msg;\n                }\n                return null;\n              };\n\n          if (obj instanceof Backbone.Collection) {\n            for (var idx in obj.models) {\n              if (validate(obj.models[idx]))\n                break;\n            }\n          } else if (obj instanceof Backbone.Model) {\n            validate(obj);\n          }\n\n          if (objName && self.errorModel.has(objName)) {\n            if (!msg) {\n              self.errorModel.unset(objName);\n            } else {\n              self.errorModel.set(objName, msg);\n            }\n          }\n\n          /*\n           * The object is valid, but does this has any effect on parent?\n           * Let's validate this object itself, before making it clear.\n           *\n           * We will trigger validation information.\n           */\n          if (_.size(self.errorModel.attributes) == 0 &&\n              !validate(self, (objName && [objName]))) {\n            if (self.handler) {\n              (self.handler).trigger('pgadmin-session:model:valid', self, self.handler);\n            } else  {\n              self.trigger(\n                  'pgadmin-session:valid', self.sessChanged(), self\n                  );\n            }\n          } else {\n            msg = msg || _.values(self.errorModel.attributes)[0];\n\n            if (self.handler) {\n              (self.handler).trigger(\n                  'pgadmin-session:model:invalid', msg, self, self.handler\n                  );\n            } else  {\n              self.trigger('pgadmin-session:invalid', msg, self);\n            }\n          }\n        }\n      },\n\n      onChildChanged: function(obj) {\n        var self = this;\n\n        if (self.trackChanges && self.collection) {\n          (self.collection).trigger('change', self);\n        }\n      },\n\n      stopSession: function() {\n        var self = this;\n\n        if (self.trackChanges) {\n          self.off('pgadmin-session:model:invalid', self.onChildInvalid);\n          self.off('pgadmin-session:model:valid', self.onChildValid);\n          self.off('pgadmin-session:changed', self.onChildChanged);\n          self.off('pgadmin-session:added', self.onChildChanged);\n          self.off('pgadmin-session:removed', self.onChildChanged);\n        }\n\n        self.trackChanges = false;\n        self.sessAttrs = {};\n        self.origSessAttrs = {};\n\n        _.each(self.objects, function(o) {\n          var obj = self.get(o);\n\n          if (_.isUndefined(obj) || _.isNull(obj)) {\n            return;\n          }\n\n          self.origSessAttrs[o] = null;\n          delete self.origSessAttrs[o];\n\n          if (obj && 'stopSession' in obj && _.isFunction(obj.stopSession)) {\n            obj.stopSession();\n          }\n        });\n\n        self.trigger('pgadmin-session:stop');\n      },\n      default_validate: function() {\n        var msg, field, value, type;\n\n        for (var i = 0, keys = _.keys(this.attributes), l = keys.length;\n                 i<l;\n                 i++) {\n\n          value = this.attributes[keys[i]];\n          field  = this.fieldData[keys[i]]\n          msg = null;\n\n          if (!(_.isUndefined(value) || _.isNull(value) ||\n                String(value).replace(/^\\s+|\\s+$/g, '') == '')) {\n\n            if (!field) {\n              continue;\n            }\n\n            type = field.type || undefined;\n            if (!type) {\n              continue;\n            }\n\n            switch(type) {\n              case 'int':\n                msg = this.integer_validate(value, field);\n                break;\n              case 'numeric':\n                msg = this.number_validate(value, field);\n                break;\n            }\n\n            if (msg) {\n              this.errorModel.set(field.id, msg);\n              return msg;\n            } else {\n              this.errorModel.unset(field.id);\n            }\n          } else {\n            if (field) {\n              this.errorModel.unset(field.id);\n            }\n          }\n        }\n        return null;\n      },\n\n      check_min_max: function (value, field) {\n        var label = field.label,\n            min_value = field.min,\n            max_value =  field.max;\n\n        if (min_value && value < min_value) {\n          return S(pgAdmin.Browser.messages.MUST_GR_EQ).sprintf(label, min_value).value();\n        } else if (max_value && value > max_value) {\n          return S(pgAdmin.Browser.messages.MUST_LESS_EQ).sprintf(label, max_value).value();\n        }\n        return null;\n      },\n      number_validate: function (value, field) {\n        var pattern = new RegExp(\"^-?[0-9]+(\\.?[0-9]*)?$\");\n        if (!pattern.test(value)) {\n          return S(pgAdmin.Browser.messages.MUST_BE_NUM).sprintf(field.label).value()\n        }\n        return this.check_min_max(value, field)\n      },\n      integer_validate: function(value, field) {\n        var pattern = new RegExp(\"^-?[0-9]*$\");\n        if (!pattern.test(value)) {\n          return S(pgAdmin.Browser.messages.MUST_BE_INT).sprintf(field.label).value()\n        }\n        return this.check_min_max(value, field)\n      }\n    });\n\n    pgBrowser.DataCollection = Backbone.Collection.extend({\n      // Model collection\n      initialize: function(attributes, options) {\n        var self = this;\n\n        options = options || {};\n        /*\n         * Session changes will be kept in this object.\n         */\n        self.sessAttrs = {\n          'changed': [],\n          'added': [],\n          'deleted': [],\n          'invalid': []\n        };\n        self.top = options.top || self;\n        self.attrName = options.attrName;\n        self.handler = options.handler;\n        self.trackChanges = false;\n\n        /*\n         * Listen to the model changes for the session changes.\n         */\n        self.on('add', self.onModelAdd);\n        self.on('remove', self.onModelRemove);\n        self.on('change', self.onModelChange);\n\n        /*\n         * We need to start the session, if the handler is already in session\n         * tracking mode.\n         */\n        if (self.handler && self.handler.trackChanges) {\n          self.startNewSession();\n        }\n\n        return self;\n      },\n      startNewSession: function() {\n        var self = this,\n            msg;\n\n        if (self.trackChanges) {\n          // We're stopping the existing session.\n          self.trigger('pgadmin-session:stop', self);\n\n          self.off('pgadmin-session:model:invalid', self.onModelInvalid);\n          self.off('pgadmin-session:model:valid', self.onModelValid);\n        }\n\n        self.trackChanges = true;\n        self.sessAttrs = {\n          'changed': [],\n          'added': [],\n          'deleted': [],\n          'invalid': []\n        };\n\n        _.each(self.models, function(m) {\n          if ('startNewSession' in m && _.isFunction(m.startNewSession)) {\n            m.startNewSession();\n          }\n\n          if ('default_validate' in m && typeof(m.default_validate) == 'function') {\n            msg = m.default_validate();\n          }\n\n          if (_.isString(msg)) {\n            self.sessAttrs['invalid'][m.cid] = msg;\n          } else if ('validate' in m && typeof(m.validate) === 'function') {\n            msg = m.validate();\n\n            if (msg) {\n              self.sessAttrs['invalid'][m.cid] = msg;\n            }\n          }\n        });\n\n        // Let people know, I have started session hanlding\n        self.trigger('pgadmin-session:start', self);\n\n        self.on('pgadmin-session:model:invalid', self.onModelInvalid);\n        self.on('pgadmin-session:model:valid', self.onModelValid);\n      },\n      onModelInvalid: function(msg, m) {\n        var self = this,\n            invalidModels = self.sessAttrs['invalid'];\n\n        if (self.trackChanges) {\n          // Do not add the existing invalid object\n          invalidModels[m.cid] = msg;\n\n          // Inform the parent that - I am an invalid model.\n          if (self.handler) {\n            (self.handler).trigger('pgadmin-session:model:invalid', msg, self, self.handler);\n          } else {\n            self.trigger('pgadmin-session:invalid', msg, self);\n          }\n        }\n\n        return true;\n      },\n      onModelValid: function(m) {\n        var self = this,\n            invalidModels = self.sessAttrs['invalid'];\n\n        if (self.trackChanges) {\n          // Now check uniqueness of current model with other models.\n          var isUnique = self.checkDuplicateWithModel(m);\n\n          // If unique then find the object the invalid list, if found remove it from the list\n          // and inform the parent that - I am a valid object now.\n\n          if (isUnique && m.cid in invalidModels) {\n            delete invalidModels[m.cid];\n          }\n\n          if (isUnique) {\n            this.triggerValidationEvent.apply(this);\n          }\n        }\n\n        return true;\n      },\n      stopSession: function() {\n        var self = this;\n\n        self.trackChanges = false;\n        self.sessAttrs = {\n          'changed': [],\n          'added': [],\n          'deleted': [],\n          'invalid': []\n        };\n\n        _.each(self.models, function(m) {\n          if ('stopSession' in m && _.isFunction(m.stopSession)) {\n            m.stopSession();\n          }\n        });\n      },\n      sessChanged: function() {\n        return (\n            this.sessAttrs['changed'].length > 0 ||\n            this.sessAttrs['added'].length > 0 ||\n            this.sessAttrs['deleted'].length > 0\n            );\n      },\n      /*\n       * We do support the changes through session tracking in general.\n       *\n       * In normal mode, we will use the general toJSON(..) function of\n       * Backbone.Colletion.\n       *\n       * In session mode, we will return session changes as:\n       * We will be returning the session changes as:\n       * {\n       *  'added': [JSON of each new model],\n       *  'delete': [JSON of each deleted model],\n       *  'changed': [JSON of each modified model with session changes]\n       * }\n       */\n      toJSON: function(session) {\n        var self = this,\n            session = (typeof(session) != \"undefined\" && session == true);\n\n        if (!session) {\n          return Backbone.Collection.prototype.toJSON.call(self);\n        } else {\n          var res = {};\n\n          res['added'] = [];\n          _.each(this.sessAttrs['added'], function(o) {\n            res['added'].push(o.toJSON());\n          });\n          if (res['added'].length == 0) {\n            delete res['added'];\n          }\n          res['changed'] = [];\n          _.each(self.sessAttrs['changed'], function(o) {\n            res['changed'].push(o.toJSON(true));\n          });\n          if (res['changed'].length == 0) {\n            delete res['changed'];\n          }\n          res['deleted'] = [];\n          _.each(self.sessAttrs['deleted'], function(o) {\n            res['deleted'].push(o.toJSON());\n          });\n          if (res['deleted'].length == 0) {\n            delete res['deleted'];\n          }\n\n          return (_.size(res) == 0 ? null : res);\n        }\n      },\n      // Override the reset function, so that - we can reset the model\n      // properly.\n      reset: function(opts) {\n        if (opts && opts.stop)\n            this.stopSession();\n        this.each(function(m) {\n          if (!m)\n            return;\n          if (m instanceof pgBrowser.DataModel) {\n            m.reset(opts);\n          } else {\n            m.clear(opts);\n          }\n        });\n        Backbone.Collection.prototype.reset.apply(this, arguments);\n      },\n      objFindInSession: function(m, type) {\n        var hasPrimaryKey = m.primary_key &&\n              typeof(m.primary_key) == 'function',\n            key = hasPrimaryKey ? m.primary_key() : m.cid,\n            comparator = hasPrimaryKey ? function(o) {\n              return (o.primary_key() === key);\n            } : function(o) {\n              return (o.cid === key);\n            };\n\n        return (_.findIndex(this.sessAttrs[type], comparator));\n      },\n      onModelAdd: function(obj) {\n        if (!this.trackChanges)\n          return true;\n\n        var self = this,\n            msg,\n            isAlreadyInvalid = (_.size(self.sessAttrs['invalid']) != 0),\n            idx = self.objFindInSession(obj, 'deleted');\n\n        // Hmm.. - it was originally deleted from this collection, we should\n        // remove it from the 'deleted' list.\n        if (idx >= 0) {\n          var origObj = self.sessAttrs['deleted'][idx];\n\n          obj.origSessAttrs = _.clone(origObj.origSessAttrs);\n          obj.attributes = _.extend(obj.attributes, origObj.attributes);\n          obj.sessAttrs = _.clone(origObj.sessAttrs);\n\n          self.sessAttrs['deleted'].splice(idx, 1);\n\n          // It has been changed originally!\n          if ((!'sessChanged' in obj) || obj.sessChanged()) {\n            self.sessAttrs['changed'].push(obj);\n          }\n\n          (self.handler || self).trigger('pgadmin-session:added', self, obj);\n\n\n          if ('default_validate' in obj && typeof(obj.default_validate) == 'function') {\n            msg = obj.default_validate();\n          }\n\n          if (_.isString(msg)) {\n            (self.sessAttrs['invalid'])[obj.cid] = msg;\n          } else if ('validate' in obj && typeof(obj.validate) === 'function') {\n            msg = obj.validate();\n\n            if (msg) {\n              (self.sessAttrs['invalid'])[obj.cid] = msg;\n            }\n          }\n        } else {\n\n          if ('default_validate' in obj && typeof(obj.default_validate) == 'function') {\n            msg = obj.default_validate();\n          }\n\n          if (_.isString(msg)) {\n            (self.sessAttrs['invalid'])[obj.cid] = msg;\n          } else if ('validate' in obj && typeof(obj.validate) === 'function') {\n            msg = obj.validate();\n\n            if (msg) {\n              (self.sessAttrs['invalid'])[obj.cid] = msg;\n            }\n          }\n          self.sessAttrs['added'].push(obj);\n\n          /*\n           * Session has been changed\n           */\n          (self.handler || self).trigger('pgadmin-session:added', self, obj);\n        }\n\n        // Let the parent/listener know about my status (valid/invalid).\n        this.triggerValidationEvent.apply(this);\n\n        return true;\n      },\n      onModelRemove: function(obj) {\n        if (!this.trackChanges)\n          return true;\n\n        /* Once model is removed from collection clear its errorModel as it's no longer relevant\n         * for us. Otherwise it creates problem in 'clearInvalidSessionIfModelValid' function.\n         */\n        obj.errorModel.clear();\n\n        var self = this,\n            invalidModels = self.sessAttrs['invalid'],\n            copy = _.clone(obj),\n            idx = self.objFindInSession(obj, 'added');\n\n        // We need to remove it from the invalid object list first.\n        if (obj.cid in invalidModels) {\n          delete invalidModels[obj.cid];\n        }\n\n        // Hmm - it was newly added, we can safely remove it.\n        if (idx >= 0) {\n          self.sessAttrs['added'].splice(idx, 1);\n\n          (self.handler || self).trigger('pgadmin-session:removed', self, copy);\n\n          self.checkDuplicateWithModel(copy);\n\n          // Let the parent/listener know about my status (valid/invalid).\n          this.triggerValidationEvent.apply(this);\n\n          return true;\n        }\n\n        // Hmm - it was changed in this session, we should remove it from the\n        // changed models.\n        idx = self.objFindInSession(obj, 'changed');\n\n        if (idx >= 0) {\n          self.sessAttrs['changed'].splice(idx, 1);\n          (self.handler || self).trigger('pgadmin-session:removed', self, copy);\n        } else {\n          (self.handler || self).trigger('pgadmin-session:removed', self, copy);\n        }\n\n        self.sessAttrs['deleted'].push(obj);\n\n        self.checkDuplicateWithModel(obj);\n\n        // Let the parent/listener know about my status (valid/invalid).\n        this.triggerValidationEvent.apply(this);\n\n        /*\n         * This object has been remove, we need to check (if we still have any\n         * other invalid message pending).\n         */\n\n        return true;\n      },\n      triggerValidationEvent: function() {\n        var self = this,\n            msg = null,\n            invalidModels = self.sessAttrs['invalid'],\n            validModels = [];\n\n        for (var key in invalidModels) {\n          msg = invalidModels[key];\n          if (msg) {\n            break;\n          }\n          else {\n            // Hmm..\n            // How come - you have been assigned in invalid list.\n            // I will make a list of it, and remove it later.\n            validModels.push(key);\n          }\n        }\n\n        // Let's remove the un\n        for (key in validModels) {\n          delete invalidModels[validModels[key]];\n        }\n\n        if (!msg) {\n          if (self.handler) {\n            self.handler.trigger('pgadmin-session:model:valid', self, self.handler);\n          } else {\n            self.trigger('pgadmin-session:valid', self.sessChanged(), self);\n          }\n        } else {\n          if (self.handler) {\n            self.handler.trigger('pgadmin-session:model:invalid', msg, self, self.handler);\n          } else {\n            self.trigger('pgadmin-session:invalid', msg, self);\n          }\n        }\n      },\n      onModelChange: function(obj) {\n        var  self = this;\n\n        if (!this.trackChanges || !(obj instanceof pgBrowser.Node.Model))\n          return true;\n\n        var idx = self.objFindInSession(obj, 'added');\n\n        // It was newly added model, we don't need to add into the changed\n        // list.\n        if (idx >= 0) {\n          (self.handler || self).trigger('pgadmin-session:changed', self, obj);\n\n          return true;\n        }\n\n        idx = self.objFindInSession(obj, 'changed');\n\n        if (!'sessChanged' in obj) {\n          (self.handler || self).trigger('pgadmin-session:changed', self, obj);\n\n          if (idx >= 0) {\n            return true;\n          }\n\n          self.sessAttrs['changed'].push(obj);\n\n          return true;\n        }\n\n        if (idx >= 0) {\n\n          if (!obj.sessChanged()) {\n            // This object is no more updated, removing it from the changed\n            // models list.\n            self.sessAttrs['changed'].splice(idx, 1);\n\n            (self.handler || self).trigger('pgadmin-session:changed',self, obj);\n            return true;\n          }\n\n          (self.handler || self).trigger('pgadmin-session:changed',self, obj);\n\n          return true;\n        }\n\n        if (obj.sessChanged()) {\n          self.sessAttrs['changed'].push(obj);\n          (self.handler || self).trigger('pgadmin-session:changed', self, obj);\n        }\n\n        return true;\n      },\n\n      /*\n       * This function will check if given model is unique or duplicate in\n       * collection and set/clear duplicate errors on models.\n       */\n      checkDuplicateWithModel: function(model) {\n        if (!('keys' in model) || _.isEmpty(model.keys)) {\n          return true;\n        }\n\n        var self = this,\n            condition = {},\n            previous_condition = {};\n\n        _.each(model.keys, function(key) {\n          condition[key] = model.get(key);\n          if(key in model._previous_key_values) {\n              previous_condition[key] = model._previous_key_values[key];\n            } else {\n              previous_condition[key] = model.previous(key);\n            }\n        });\n\n        // Reset previously changed values.\n        model._previous_key_values = {};\n\n        var old_conflicting_models =  self.where(previous_condition);\n\n        if (old_conflicting_models.length == 1) {\n          var m = old_conflicting_models[0];\n          self.clearInvalidSessionIfModelValid(m);\n        }\n\n        var new_conflicting_models = self.where(condition);\n        if (new_conflicting_models.length == 0) {\n          self.clearInvalidSessionIfModelValid(model);\n        } else if (new_conflicting_models.length == 1) {\n          self.clearInvalidSessionIfModelValid(model);\n          self.clearInvalidSessionIfModelValid(new_conflicting_models[0]);\n        } else {\n          var msg = \"Duplicate rows.\";\n          setTimeout(function() {\n            _.each(new_conflicting_models, function(m) {\n              self.trigger(\n                    'pgadmin-session:model:invalid', msg, m, self.handler\n                    );\n              m.trigger(\n                    'pgadmin-session:model:duplicate', m, msg\n                    );\n            });\n          }, 10);\n\n          return false;\n        }\n        return true;\n      },\n      clearInvalidSessionIfModelValid: function(m) {\n        var errors = m.errorModel.attributes,\n            invalidModels = this.sessAttrs['invalid'];\n\n        m.trigger('pgadmin-session:model:unique', m\n                    );\n        if (_.size(errors) == 0) {\n          delete invalidModels[m.cid];\n        } else {\n          invalidModels[m.cid] = errors[Object.keys(errors)[0]];\n        }\n      }\n    });\n\n    pgBrowser.Events = _.extend({}, Backbone.Events);\n\n    return pgBrowser;\n});\n\n\n\n// WEBPACK FOOTER //\n// pgadmin/browser/static/js/datamodel.js","define('pgadmin.settings',\n  [\n    'jquery', 'alertify', 'sources/pgadmin', 'underscore', 'backform',\n    'sources/gettext', 'sources/url_for', 'pgadmin.backform'\n  ],\n  // This defines the Preference/Options Dialog for pgAdmin IV.\n  function($, alertify, pgAdmin, _, Backform, gettext, url_for) {\n    pgAdmin = pgAdmin || window.pgAdmin || {};\n\n    /*\n     * Hmm... this module is already been initialized, we can refer to the old\n     * object from here.\n     */\n    if (pgAdmin.Settings)\n        return pgAdmin.Settings;\n\n    pgAdmin.Settings = {\n      init: function() {\n        if (this.initialized)\n          return;\n\n        this.initialized = true;\n      },\n      // We will force unload method to not to save current layout\n      // and reload the window\n      show: function() {\n        var obj = this;\n        alertify.confirm(gettext('Reset layout'),\n          gettext('Are you sure you want to reset the current layout? This will cause the application to reload and any un-saved data will be lost.'),\n          function() {\n            var reloadingIndicator = $('<div id=\"reloading-indicator\"></div>');\n            $('body').append(reloadingIndicator);\n            // Delete the record from database as well, then only reload page\n            $.ajax({\n              url: url_for('settings.reset_layout'),\n              type: 'DELETE',\n              async: false,\n              success: function() {\n                // Prevent saving layout on server for next page reload.\n                $(window).unbind('unload');\n                window.onbeforeunload = null;\n                // Now reload page\n                location.reload(true);\n              },\n              error: function() {\n                console.log('Something went wrong on server while resetting layout');\n              }\n            });\n\n          },\n          function() {\n            // Do nothing as user canceled the operation.\n          }\n        );\n      }\n    };\n\n    return pgAdmin.Settings;\n  });\n\n\n\n// WEBPACK FOOTER //\n// pgadmin/settings/static/js/settings.js","define(\n    ['underscore', 'backbone', 'sources/pgadmin', 'pgadmin.browser'],\nfunction(_, Backbone, pgAdmin, pgBrowser) {\n\n  pgBrowser = pgBrowser || pgAdmin.Browser || {};\n\n  /* Wizard individual Page Model */\n  var WizardPage = pgBrowser.WizardPage = Backbone.Model.extend({\n    defaults: {\n      id: undefined, /* Id */\n      page_title: undefined, /* Page Title */\n      view: undefined, /* A Backbone View */\n      html: undefined, /* HTML tags to be rendered */\n      image: undefined, /* Left hand side image */\n      disable_prev: false, /*  Previous Button Flag */\n      disable_next: false, /*  Next Button Flag */\n      disable_cancel: false, /* Cancel Button Flag */\n      show_progress_bar: '',\n      /* Callback for OnLoad */\n      onLoad: function() {\n        return true;\n      },\n      /* Callback for before Next */\n      beforeNext: function() {\n        return true;\n      },\n      onNext: function(){},\n      onBefore: function() {},\n      /* Callback for before Previous */\n      beforePrev: function() {\n        return true;\n      }\n    }\n  });\n\n  var Wizard = pgBrowser.Wizard = Backbone.View.extend({\n    options: {\n      title: 'Wizard', /* Main Wizard Title */\n      image: 'left_panel.png', /* TODO:: We can use default image here */\n      curr_page: 0, /* Current Page to Load */\n      disable_next: false,\n      disable_prev: false,\n      disable_finish: false,\n      disable_cancel: false,\n      show_header_cancel_btn: false, /* show cancel button at wizard header */\n      show_header_maximize_btn: false, /* show maximize button at wizard header */\n      dialog_api: null,\n      height: 400,\n      width: 650,\n      show_left_panel: true,\n      wizard_help: ''\n    },\n    tmpl: _.template(\n       \"    <div class='pgadmin-wizard' style='height: <%= this.options.height %>px;\"\n       + \"    width: <%= this.options.width %>px'>\"\n       + \"      <div class='wizard-header wizard-badge'>\"\n       + \"        <div class='row'>\"\n       + \"          <div class='col-sm-10'>\"\n       + \"              <h3><span id='main-title'><%= this.options.title %></span> -\"\n       + \"              <span id='step-title'><%= page_title %></span></h3>\"\n       + \"          </div>\"\n       + \"          <% if (this.options.show_header_cancel_btn) { %>\"\n       + \"            <div class='col-sm-2'>\"\n       + \"              <button class='ajs-close wizard-cancel-event pull-right'></button>\"\n       + \"              <% if (this.options.show_header_maximize_btn) { %>\"\n       + \"                <button class='ajs-maximize wizard-maximize-event pull-right'></button>\"\n       + \"              <% } %>\"\n       + \"            </div>\"\n       + \"          <% } %>\"\n       + \"        </div>\"\n       + \"      </div>\"\n       + \"      <div class='wizard-content col-sm-12'>\"\n       + \"        <% if (this.options.show_left_panel) { %>\"\n       + \"          <div class='col-sm-3 wizard-left-panel'>\"\n       + \"              <img src='<%= this.options.image %>'></div>\"\n       + \"        <% } %>\"\n       + \"        <div class='col-sm-<% if (this.options.show_left_panel) { %>9<% }\"\n       + \"          else { %>12<% } %> wizard-right-panel'>\"\n       + \"          <% if ( typeof show_description !=  'undefined'){ %>\"\n       + \"            <div class='wizard-description'>\"\n       + \"              <%= show_description %>\"\n       + \"            </div>\"\n       + \"          <% } %>\"\n       + \"          <div class='wizard-progress-bar'><% if (show_progress_bar) { %>\"\n       + \"            <p class='alert alert-info col-sm-12'><%= show_progress_bar %></p><% } %>\"\n       + \"          </div>\"\n       + \"          <div class='wizard-right-panel_content col-xs-12'>\"\n       + \"          </div>\"\n       + \"        </div>\"\n       + \"      </div>\"\n       + \"      <div class='col-sm-12 pg-prop-status-bar' style='visibility:hidden'>\"\n       + \"        <div class='media error-in-footer bg-red-1 border-red-2 font-red-3 text-14'>\"\n       + \"          <div class='media-body media-middle'>\"\n       + \"            <div class='alert-icon error-icon'>\"\n       + \"              <i class='fa fa-exclamation-triangle' aria-hidden='true'></i>\"\n       + \"            </div>\"\n       + \"            <div class='alert-text'>\"\n       + \"            </div>\"\n       + \"          </div>\"\n       + \"        </div>\"\n       + \"      </div>\"\n       + \"      <div class='footer col-sm-12'>\"\n       + \"        <div class='row'>\"\n       + \"          <div class='col-sm-4 wizard-buttons pull-left'>\"\n       + \"            <button title = 'Help for this dialog.' class='btn btn-default pull-left wizard-help' <%=this.options.wizard_help ? '' : 'disabled' %>>\"\n       + \"              <span class='fa fa-lg fa-question'></span></button>\"\n       + \"          </div>\"\n       + \"          <div class='col-sm-8'>\"\n       + \"            <div class='wizard-buttons'>\"\n       + \"              <button class='btn btn-primary wizard-back' <%=this.options.disable_prev ? 'disabled' : ''%>>\"\n       + \"                <i class='fa fa-backward'></i>Back</button>\"\n       + \"              <button class='btn btn-primary wizard-next' <%=this.options.disable_next ? 'disabled' : ''%>>Next\"\n       + \"                <i class='fa fa-forward'></i></button>\"\n       + \"              <button class='btn btn-danger wizard-cancel' <%=this.options.disable_cancel ? 'disabled' : ''%>>\"\n       + \"                <i class='fa fa-lg fa-close'></i>Cancel</button>\"\n       + \"              <button class='btn btn-primary wizard-finish' <%=this.options.disable_finish ? 'disabled' : ''%>>\"\n       + \"                Finish</button>\"\n       + \"            </div>\"\n       + \"          </div>\"\n       + \"        </div>\"\n       + \"      </div>\"\n       + \"    </div>\"),\n    events: {\n      \"click button.wizard-next\" : \"nextPage\",\n      \"click button.wizard-back\" : \"prevPage\",\n      \"click button.wizard-cancel\" : \"onCancel\",\n      \"click button.wizard-cancel-event\" : \"onCancel\",\n      \"click button.wizard-maximize-event\" : \"onMaximize\",\n      \"click button.wizard-finish\" : \"finishWizard\",\n      \"click button.wizard-help\" : \"onDialogHelp\",\n    },\n    initialize: function(options) {\n      this.options = _.extend({}, this.options, options.options);\n      this.currPage = this.collection.at(this.options.curr_page).toJSON();\n    },\n    render: function() {\n      var data = this.currPage;\n\n      /* Check Status of the buttons */\n      this.options.disable_next = (this.options.disable_next ? true : this.evalASFunc(this.currPage.disable_next));\n      this.options.disable_prev = (this.options.disable_prev ? true : this.evalASFunc(this.currPage.disable_prev));\n      this.options.disable_cancel = (this.currPage.canCancel ? true : this.evalASFunc(this.currPage.disable_cancel));\n\n      var that = this;\n\n      /* HTML Content */\n      if (data.html) { data.content = data.html; }\n      /* Backbone View */\n      else if (data.view) { data.content = data.view.render().el;}\n\n      $(this.el).html(this.tmpl(data));\n      $(this.el).find(\".wizard-right-panel_content\").html(data.content);\n\n      /* OnLoad Callback */\n      this.onLoad();\n\n      return this;\n    },\n    nextPage: function() {\n      if (!this.beforeNext()) { return false; }\n\n      var page_id = this.onNext();\n\n      if (page_id ) {\n        this.currPage = this.collection.get(page_id).toJSON();\n        this.options.curr_page = this.collection.indexOf(this.collection.get(page_id));\n      }\n      else if (this.options.curr_page < (this.collection.length-1)) {\n        this.options.curr_page = this.options.curr_page + 1;\n        this.currPage = this.collection.at(this.options.curr_page).toJSON();\n      }\n\n      this.enableDisableNext();\n      this.enableDisablePrev();\n\n      return this.render();\n    },\n    prevPage: function() {\n      if (!this.beforePrev()) { return false; }\n\n      var page_id = this.onPrev();\n\n      if (page_id){\n        this.currPage = this.collection.get(page_id).toJSON();\n        this.options.curr_page = this.collection.indexOf(this.collection.get(page_id));\n      }\n      else if (this.options.curr_page > 0) {\n        this.options.curr_page = this.options.curr_page - 1;\n        this.currPage = this.collection.at(this.options.curr_page).toJSON();\n      }\n\n      this.enableDisableNext();\n      this.enableDisablePrev();\n\n      return this.render();\n    },\n    finishWizard: function() {\n      this.onFinish();\n      this.remove(); // Remove view from DOM\n      this.unbind(); // Unbind all local event bindings\n      delete this.$el; // Delete the jQuery wrapped object variable\n      delete this.el; // Delete the variable reference to this node\n      return true;\n    },\n    enableDisableNext: function(disable) {\n        if (typeof(disable) != 'undefined') {\n          this.options.disable_next = disable;\n        }\n        else if (this.options.curr_page >= (this.collection.length-1)) {\n          this.options.disable_next = true;\n        }\n        else {\n          this.options.disable_next = false;\n        }\n    },\n    enableDisablePrev: function(disable) {\n        if (typeof(disable) != 'undefined') {\n          this.options.disable_prev = disable;\n        }\n        else if (this.options.curr_page <= 0) {\n          this.options.disable_prev = true;\n        }\n        else {\n          this.options.disable_prev = false;\n        }\n    },\n    beforeNext: function(){\n      return this.evalASFunc(this.currPage.beforeNext);\n    },\n    beforePrev: function(){\n      return this.evalASFunc(this.currPage.beforePrev);\n    },\n    onPrev: function(){\n      return this.evalASFunc(this.currPage.onPrev);\n    },\n    onNext: function(){\n      return this.evalASFunc(this.currPage.onNext);\n    },\n    onLoad: function() {\n      return this.evalASFunc(this.currPage.onLoad);\n    },\n    onFinish: function() {\n      return true;\n    },\n    onCancel: function() {\n      this.$el.remove();\n      return true;\n    },\n    onMaximize: function() {\n      var dialog_api = this.options.dialog_api,\n      old_classes, _el = this.$el.find('.wizard-maximize-event');\n\n      // If no dialog api found then return\n      if(!dialog_api) return;\n\n      if(dialog_api.isMaximized()) {\n        // toggle the icon\n        _el.removeClass('ajs-maximized');\n        dialog_api.restore();\n      } else {\n        // toggle the icon\n        _el.addClass('ajs-maximized ' + _el.attr('class'));\n        dialog_api.maximize();\n      }\n    },\n    evalASFunc: function(func, ctx) {\n      var self = this;\n      ctx = ctx || self.currPage;\n\n      return (_.isFunction(func) ? func.apply(ctx, [self]) : func);\n    },\n    onDialogHelp: function() {\n      // See if we can find an existing panel, if not, create one\n      var pnlDialogHelp = pgBrowser.docker.findPanels('pnl_online_help')[0];\n\n      if (pnlDialogHelp == null) {\n        var pnlProperties = pgBrowser.docker.findPanels('properties')[0];\n        pgBrowser.docker.addPanel('pnl_online_help', wcDocker.DOCK.STACKED, pnlProperties);\n        pnlDialogHelp = pgBrowser.docker.findPanels('pnl_online_help')[0];\n      }\n\n      // Update the panel\n      var iframe = $(pnlDialogHelp).data('embeddedFrame');\n\n      pnlDialogHelp.focus();\n      iframe.openURL(this.options.wizard_help);\n    }\n  });\n\n  return pgBrowser;\n\n});\n\n\n\n// WEBPACK FOOTER //\n// pgadmin/browser/static/js/wizard.js","(function(root, factory) {\n  // Set up Backform appropriately for the environment. Start with AMD.\n  if (typeof define === 'function' && define.amd) {\n    define([\n      'sources/gettext', 'underscore', 'jquery', 'backbone', 'backform', 'backgrid', 'alertify',\n      'moment', 'bignumber', 'bootstrap.datetimepicker', 'bootstrap.switch'\n    ],\n     function(gettext, _, $, Backbone, Backform, Backgrid, Alertify, moment, BigNumber) {\n      // Export global even in AMD case in case this script is loaded with\n      // others that may still expect a global Backform.\n      return factory(root, gettext, _, $, Backbone, Backform, Backgrid, Alertify, moment, BigNumber);\n    });\n\n  // Next for Node.js or CommonJS. jQuery may not be needed as a module.\n  } else if (typeof exports !== 'undefined') {\n    var gettext = require('sources/gettext'),\n      _ = require('underscore') || root._,\n      $ = root.jQuery || root.$ || root.Zepto || root.ender,\n      Backbone = require('backbone') || root.Backbone,\n      Backform = require('backform') || root.Backform,\n      Backgrid = require('backgrid') || root.Backgrid,\n      Alertify = require('alertify') || root.Alertify,\n      moment = require('moment') || root.moment;\n    factory(root, gettext, _, $, Backbone, Backform, Backgrid, Alertify, moment);\n\n  // Finally, as a browser global.\n  } else {\n    factory(root, root.gettext, root._, (root.jQuery || root.Zepto || root.ender || root.$), root.Backbone, root.Backform, root.Alertify, root.moment);\n  }\n} (this, function(root, gettext, _, $, Backbone, Backform, Backgrid, Alertify, moment, BigNumber) {\n  /*\n     * Add mechanism in backgrid to render different types of cells in\n     * same column;\n   */\n\n  // Add new property cellFunction in Backgrid.Column.\n  _.extend(Backgrid.Column.prototype.defaults, {cellFunction: undefined});\n\n  // Add tooltip to cell if cell content is larger than\n  // cell width\n  _.extend(Backgrid.Cell.prototype.events, {\n    'mouseover': function(e) {\n      var $el = $(this.el);\n      if($el.text().length > 0 && !$el.attr('title') &&\n        ($el.innerWidth() + 1) < $el[0].scrollWidth\n      ) {\n        $el.attr('title', $.trim($el.text()));\n      }\n    }\n  });\n\n  /* Overriding backgrid sort method.\n   * As we are getting numeric, integer values as string\n   * from server side, but on client side javascript truncates\n   * large numbers automatically due to which backgrid was unable\n   * to sort numeric values properly in the grid.\n   * To fix this issue, now we check if cell type is integer/number\n   * convert it into BigNumber object and make comparison to perform sorting.\n   */\n\n  _.extend(Backgrid.Body.prototype, {\n    sort: function (column, direction) {\n\n      if (!_.contains([\"ascending\", \"descending\", null], direction)) {\n        throw new RangeError('direction must be one of \"ascending\", \"descending\" or `null`');\n      }\n\n      if (_.isString(column)) column = this.columns.findWhere({name: column});\n\n      var collection = this.collection;\n\n      var order;\n      if (direction === \"ascending\") order = -1;\n      else if (direction === \"descending\") order = 1;\n      else order = null;\n\n      // Get column type and pass it to comparator.\n      var col_type = column.get('cell').prototype.className || 'string-cell',\n          comparator = this.makeComparator(column.get(\"name\"), order,\n                                          order ?\n                                          column.sortValue() :\n                                          function (model) {\n                                            return model.cid.replace('c', '') * 1;\n                                          }, col_type);\n\n      if (Backbone.PageableCollection &&\n          collection instanceof Backbone.PageableCollection) {\n\n        collection.setSorting(order && column.get(\"name\"), order,\n                              {sortValue: column.sortValue()});\n\n        if (collection.fullCollection) {\n          // If order is null, pageable will remove the comparator on both sides,\n          // in this case the default insertion order comparator needs to be\n          // attached to get back to the order before sorting.\n          if (collection.fullCollection.comparator == null) {\n            collection.fullCollection.comparator = comparator;\n          }\n          collection.fullCollection.sort();\n          collection.trigger(\"backgrid:sorted\", column, direction, collection);\n        }\n        else collection.fetch({reset: true, success: function () {\n          collection.trigger(\"backgrid:sorted\", column, direction, collection);\n        }});\n      }\n      else {\n        collection.comparator = comparator;\n        collection.sort();\n        collection.trigger(\"backgrid:sorted\", column, direction, collection);\n      }\n\n      column.set(\"direction\", direction);\n\n      return this;\n    },\n    makeComparator: function (attr, order, func, type) {\n\n      return function (left, right) {\n        // extract the values from the models\n\n        var l = func(left, attr), r = func(right, attr), t;\n        if (_.isUndefined(l) || _.isUndefined(r)) return;\n\n        var types = ['number-cell', 'integer-cell'];\n        if (_.include(types, type)) {\n          var _l, _r;\n          // NaN if invalid number\n          try {\n            _l = new BigNumber(l);\n          } catch(err) {\n            _l = NaN;\n          }\n\n          try {\n            _r = new BigNumber(r);\n          } catch(err) {\n            _r = NaN;\n          }\n\n          // if descending order, swap left and right\n          if (order === 1) t = _l, _l = _r, _r = t;\n\n          if (_l.eq(_r))  // If both are equals\n            return 0;\n          else if (_l.lt(_r)) // If left is less than right\n            return -1;\n          else\n            return 1;\n        }\n        else {\n          // if descending order, swap left and right\n          if (order === 1) t = l, l = r, r = t;\n\n           // compare as usual\n          if (l === r) return 0;\n          else if (l < r) return -1;\n          return 1;\n        }\n      };\n    }\n  });\n\n  _.extend(Backgrid.Row.prototype, {\n    makeCell: function (column) {\n      return new (this.getCell(column))({\n        column: column,\n        model: this.model\n      });\n    },\n    /*\n     * getCell function will check and execute user given cellFunction to get\n     * appropriate cell class for current cell being rendered.\n     * User provided cellFunction must return valid cell class.\n     * cellFunction will be called with context (this) as column and model as\n     * argument.\n     */\n    getCell: function (column) {\n      var cf = column.get(\"cellFunction\");\n      if (_.isFunction(cf)){\n        var cell = cf.apply(column, [this.model]);\n        try {\n          return Backgrid.resolveNameToClass(cell, \"Cell\");\n        } catch (e) {\n          if (e instanceof ReferenceError) {\n            // Fallback to column cell.\n            return column.get(\"cell\");\n          } else {\n            throw e; // Let other exceptions bubble up\n          }\n        }\n      } else {\n        return column.get(\"cell\");\n      }\n    }\n  });\n\n  var ObjectCellEditor = Backgrid.Extension.ObjectCellEditor = Backgrid.CellEditor.extend({\n    modalTemplate: _.template([\n      '<div class=\"subnode-dialog\" tabindex=\"1\">',\n      '    <div class=\"subnode-body\"></div>',\n      '</div>'\n    ].join(\"\\n\")),\n    stringTemplate: _.template([\n      '<div class=\"form-group\">',\n      '  <label class=\"control-label col-sm-4\"><%=label%></label>',\n      '  <div class=\"col-sm-8\">',\n      '    <input type=\"text\" class=\"form-control\" name=\"<%=name%>\" value=\"<%=value%>\" placeholder=\"<%=placeholder%>\" />',\n      '  </div>',\n      '</div>'\n    ].join(\"\\n\")),\n    extendWithOptions: function(options) {\n      _.extend(this, options);\n    },\n    render: function () {\n      return this;\n    },\n    postRender: function(model, column) {\n      var editor = this,\n          el = this.el,\n          columns_length = this.columns_length,\n          // To render schema directly from Backgrid cell we use columns schema attribute\n          schema = this.schema.length ? this.schema : this.column.get('schema');\n\n      if (column != null && column.get(\"name\") != this.column.get(\"name\"))\n        return false;\n\n      if (!_.isArray(schema)) throw new TypeError(\"schema must be an array\");\n\n      // Create a Backbone model from our object if it does not exist\n      var $dialog = this.createDialog(columns_length);\n\n      // Add the Bootstrap form\n      var $form = $('<form class=\"form-dialog\"></form>');\n      $dialog.find('div.subnode-body').append($form);\n\n      // Call Backform to prepare dialog\n      var back_el = $dialog.find('form.form-dialog');\n\n      this.objectView = new Backform.Dialog({\n        el: back_el, model: this.model, schema: schema,\n        tabPanelClassName: function() {\n          return 'sub-node-form col-sm-12';\n        }\n      });\n\n      this.objectView.render();\n\n      return this;\n    },\n    createDialog: function(noofcol) {\n      var $dialog = this.$dialog = $(this.modalTemplate({title: \"\"})),\n          tr = $(\"<tr>\"),\n          noofcol = noofcol || 1,\n          td = $(\"<td>\", {class: 'editable sortable renderable', style: 'height: auto', colspan: noofcol+2}).appendTo(tr);\n\n      this.tr = tr;\n\n      // Show the Bootstrap modal dialog\n      td.append($dialog.css('display', 'block'));\n      this.el.parent('tr').after(tr);\n\n      return $dialog;\n    },\n    save: function() {\n      // Retrieve values from the form, and store inside the object model\n      this.model.trigger(\"backgrid:edited\", this.model, this.column, new Backgrid.Command({keyCode:13}));\n      if (this.tr) {\n        this.tr.remove();\n      }\n\n      return this;\n    },\n    remove: function() {\n      this.objectView.remove();\n      Backgrid.CellEditor.prototype.remove.apply(this, arguments);\n      if (this.tr) {\n        this.tr.remove();\n      }\n      return this;\n    }\n  });\n\n  var PGSelectCell = Backgrid.Extension.PGSelectCell = Backgrid.SelectCell.extend({\n    // It's possible to render an option group or use a\n    // function to provide option values too.\n    optionValues: function() {\n      var res = [],\n          opts = _.result(this.column.attributes, 'options');\n      _.each(opts, function(o) {\n        res.push([o.label, o.value]);\n      });\n      return res;\n    }\n  });\n\n  var ObjectCell = Backgrid.Extension.ObjectCell = Backgrid.Cell.extend({\n    editorOptionDefaults: {\n      schema: []\n    },\n    className: \"edit-cell\",\n    editor: ObjectCellEditor,\n    initialize: function(options) {\n      Backgrid.Cell.prototype.initialize.apply(this, arguments);\n\n      // Pass on cell options to the editor\n      var cell = this,\n          editorOptions = {};\n      _.each(this.editorOptionDefaults, function(def, opt) {\n        if (!cell[opt]) cell[opt] = def;\n        if (options && options[opt]) cell[opt] = options[opt];\n        editorOptions[opt] = cell[opt];\n      });\n\n      editorOptions['el'] = $(this.el);\n      editorOptions['columns_length'] = this.column.collection.length;\n      editorOptions['el'].attr('tabindex' , 1);\n\n      this.listenTo(this.model, \"backgrid:edit\", function (model, column, cell, editor) {\n        if (column.get(\"name\") == this.column.get(\"name\"))\n          editor.extendWithOptions(editorOptions);\n      });\n    },\n    enterEditMode: function () {\n      // Notify that we are about to enter in edit mode for current cell.\n     // We will check if this row is editable first\n      var canEditRow = (!_.isUndefined(this.column.get('canEditRow')) &&\n                          _.isFunction(this.column.get('canEditRow'))) ?\n                          Backgrid.callByNeed(this.column.get('canEditRow'),\n                          this.column, this.model) : true;\n      if (canEditRow) {\n        // Notify that we are about to enter in edit mode for current cell.\n        this.model.trigger(\"enteringEditMode\", [this]);\n\n        Backgrid.Cell.prototype.enterEditMode.apply(this, arguments);\n        /* Make sure - we listen to the click event */\n        this.delegateEvents();\n        var editable = Backgrid.callByNeed(this.column.editable(), this.column, this.model);\n\n        if (editable) {\n          this.$el.html(\n            \"<i class='fa fa-pencil-square subnode-edit-in-process'></i>\"\n            );\n          this.model.trigger(\n            \"pg-sub-node:opened\", this.model, this\n            );\n        }\n      } else {\n          Alertify.alert(\"This object is not editable by user\",\n            function(){\n              return true;\n          });\n      }\n    },\n    render: function(){\n        this.$el.empty();\n        this.$el.html(\"<i class='fa fa-pencil-square-o'></i>\");\n        this.delegateEvents();\n        if (this.grabFocus)\n          this.$el.focus();\n        return this;\n    },\n    exitEditMode: function() {\n      var index = $(this.currentEditor.objectView.el)\n        .find('.nav-tabs > .active > a[data-toggle=\"tab\"]').first()\n        .data('tabIndex');\n      Backgrid.Cell.prototype.exitEditMode.apply(this, arguments);\n      this.model.trigger(\n          \"pg-sub-node:closed\", this, index\n          );\n      this.grabFocus = true;\n    },\n    events: {\n      'click': function(e) {\n        if (this.$el.find('i').first().hasClass('subnode-edit-in-process')) {\n          // Need to redundantly undelegate events for Firefox\n          this.undelegateEvents();\n          this.currentEditor.save();\n        } else {\n          this.enterEditMode.call(this, []);\n        }\n        e.preventDefault();\n      }\n    }\n  });\n\n  var DeleteCell = Backgrid.Extension.DeleteCell = Backgrid.Cell.extend({\n      defaults: _.defaults({\n        defaultDeleteMsg: gettext('Are you sure you wish to delete this row?'),\n        defaultDeleteTitle: gettext('Delete Row')\n      }, Backgrid.Cell.prototype.defaults),\n\n      /** @property */\n      className: \"delete-cell\",\n      events: {\n        \"click\": \"deleteRow\"\n      },\n      deleteRow: function (e) {\n        e.preventDefault();\n        var that = this;\n        // We will check if row is deletable or not\n        var canDeleteRow = (!_.isUndefined(this.column.get('canDeleteRow')) &&\n                            _.isFunction(this.column.get('canDeleteRow')) ) ?\n                             Backgrid.callByNeed(this.column.get('canDeleteRow'),\n                              this.column, this.model) : true;\n        if (canDeleteRow) {\n          var delete_msg = !_.isUndefined(this.column.get('customDeleteMsg')) ?\n                           this.column.get('customDeleteMsg'): that.defaults.defaultDeleteMsg;\n          var delete_title = !_.isUndefined(this.column.get('customDeleteTitle')) ?\n                           this.column.get('customDeleteTitle'): that.defaults.defaultDeleteTitle;\n          Alertify.confirm(\n            delete_title,\n            delete_msg,\n            function(evt) {\n              that.model.collection.remove(that.model);\n            },\n            function(evt) {\n              return true;\n            }\n          );\n        } else {\n          Alertify.alert(\"This object cannot be deleted\",\n            function(){\n              return true;\n            }\n          );\n        }\n      },\n      initialize: function () {\n          Backgrid.Cell.prototype.initialize.apply(this, arguments);\n      },\n      render: function () {\n          this.$el.empty();\n          this.$el.html(\"<i class='fa fa-trash'></i>\");\n          this.delegateEvents();\n          return this;\n      }\n  });\n\n  var CustomHeaderCell = Backgrid.Extension.CustomHeaderCell = Backgrid.HeaderCell.extend({\n    initialize: function () {\n      // Here, we will add custom classes to header cell\n      Backgrid.HeaderCell.prototype.initialize.apply(this, arguments);\n      var getClassName = this.column.get('cellHeaderClasses');\n      if (getClassName) {\n        this.$el.addClass(getClassName);\n      }\n    }\n  });\n\n  /**\n    SwitchCell renders a Bootstrap Switch in backgrid cell\n  */\n  $.fn.bootstrapSwitch = jQuery.fn.bootstrapSwitch;\n  var SwitchCell = Backgrid.Extension.SwitchCell = Backgrid.BooleanCell.extend({\n    defaults: {\n      options: _.defaults({\n        onText: 'True',\n        offText: 'False',\n        onColor: 'success',\n        offColor: 'default',\n        size: 'mini'\n        }, $.fn.bootstrapSwitch.defaults)\n    },\n\n    className: 'switch-cell',\n\n    initialize: function() {\n      Backgrid.BooleanCell.prototype.initialize.apply(this, arguments);\n      this.onChange = this.onChange.bind(this);\n    },\n\n    enterEditMode: function() {\n      this.$el.addClass('editor');\n      $(this.$el.find('input')).focus();\n    },\n\n    exitEditMode: function() {\n      this.$el.removeClass('editor');\n    },\n\n    events: {\n      'switchChange.bootstrapSwitch': 'onChange'\n    },\n\n    onChange: function () {\n      var model = this.model,\n          column = this.column,\n          val = this.formatter.toRaw(this.$input.prop('checked'), model);\n\n      // on bootstrap change we also need to change model's value\n      model.set(column.get(\"name\"), val);\n    },\n\n    render: function () {\n      var self = this, col = _.defaults(this.column.toJSON(), this.defaults),\n          attributes = this.model.toJSON(),\n          attrArr = col.name.split('.'),\n          name = attrArr.shift(),\n          path = attrArr.join('.'),\n          model = this.model, column = this.column,\n          rawValue = this.formatter.fromRaw(\n            model.get(column.get(\"name\")), model\n          ),\n          editable = Backgrid.callByNeed(col.editable, column, model);\n\n      this.undelegateEvents();\n\n      this.$el.empty();\n\n      this.$el.append(\n        $(\"<input>\", {\n          tabIndex: -1,\n          type: \"checkbox\"\n          }).prop('checked', rawValue).prop('disabled', !editable));\n      this.$input = this.$el.find('input[type=checkbox]').first();\n\n      // Override BooleanCell checkbox with Bootstrapswitch\n      this.$input.bootstrapSwitch(\n        _.defaults(\n          {'state': rawValue, 'disabled': !editable}, col.options,\n          this.defaults.options\n          ));\n\n      // Listen for Tab key\n      this.$el.on('keydown', function(e) {\n        var gotoCell;\n        if(e.keyCode == 9) {\n          // go to Next Cell & if Shift is also pressed go to Previous Cell\n          gotoCell = e.shiftKey ? self.$el.prev() : self.$el.next();\n        }\n\n        if(gotoCell) {\n            setTimeout(function() {\n              if(gotoCell.hasClass('editable')) {\n                e.preventDefault();\n                e.stopPropagation();\n                var command = new Backgrid.Command({\n                      key: \"Tab\", keyCode: 9,\n                      which: 9, shiftKey: e.shiftKey\n                    });\n                self.model.trigger(\"backgrid:edited\", self.model,\n                                    self.column, command);\n                gotoCell.focus();\n              }\n            }, 20);\n        }\n\n      });\n\n      this.delegateEvents();\n\n      return this;\n    }\n  });\n\n  /*\n   *  Select2Cell for backgrid.\n   */\n  var Select2Cell = Backgrid.Extension.Select2Cell =\n      Backgrid.SelectCell.extend({\n    className: \"select2-cell\",\n\n    /** @property */\n    editor: null,\n\n    defaults: _.defaults({\n      select2: {},\n      opt: {\n        label: null,\n        value: null,\n        selected: false\n       }\n      }, Backgrid.SelectCell.prototype.defaults),\n\n    enterEditMode: function() {\n      if (!this.$el.hasClass('editor'))\n        this.$el.addClass('editor');\n      this.$select.select2('focus');\n      this.$select.select2('open');\n      this.$select.on('blur', this.exitEditMode);\n    },\n\n    exitEditMode: function() {\n      this.$select.off('blur', this.exitEditMode);\n      this.$select.select2('close');\n      this.$el.removeClass('editor');\n    },\n\n    events: {\n      \"select2:open\": \"enterEditMode\",\n      \"select2:close\": \"exitEditMode\",\n      \"change\": \"onSave\",\n      \"select2:unselect\": \"onSave\"\n    },\n    /** @property {function(Object, ?Object=): string} template */\n    template: _.template([\n      '<option value=\"<%- value %>\" ',\n      '<%= selected ? \\'selected=\"selected\"\\' : \"\" %>>',\n      '<%- label %></option>'].join(''),\n      null,{\n        variable: null\n      }),\n\n    initialize: function() {\n      Backgrid.SelectCell.prototype.initialize.apply(this, arguments);\n      this.onSave = this.onSave.bind(this);\n      this.enterEditMode = this.enterEditMode.bind(this);\n      this.exitEditMode = this.exitEditMode.bind(this);\n    },\n\n    render: function () {\n      var col = _.defaults(this.column.toJSON(), this.defaults),\n          model = this.model, column = this.column,\n          editable = Backgrid.callByNeed(col.editable, column, model),\n          optionValues = _.clone(this.optionValues ||\n                (_.isFunction(this.column.get('options')) ?\n                    (this.column.get('options'))(this) :\n                    this.column.get('options')));\n\n      this.undelegateEvents();\n\n      if (this.$select) {\n        if ( this.$select.data('select2')) {\n          this.$select.select2('destroy');\n        }\n        delete this.$select;\n        this.$select = null;\n      }\n\n      this.$el.empty();\n\n      if (!_.isArray(optionValues))\n        throw new TypeError(\"optionValues must be an array\");\n\n      /*\n       * Add empty option as Select2 requires any empty '<option><option>' for\n       * some of its functionality to work.\n       */\n      optionValues.unshift(this.defaults.opt);\n\n      var optionText = null,\n          optionValue = null,\n          self = this,\n          model = this.model,\n          selectedValues = model.get(this.column.get(\"name\")),\n          select2_opts = _.extend(\n            {openOnEnter: false, multiple:false}, self.defaults.select2,\n            (col.select2 || {})\n            ),\n          selectTpl = _.template('<select <%=multiple ? \"multiple\" : \"\" %>></select>');\n\n      var $select = self.$select = $(selectTpl({\n        multiple: select2_opts.multiple\n      })).appendTo(self.$el);\n\n      for (var i = 0; i < optionValues.length; i++) {\n        var opt = optionValues[i];\n\n        if (_.isArray(opt)) {\n\n          optionText  = opt[0];\n          optionValue = opt[1];\n\n          $select.append(\n            self.template({\n               label: optionText,\n               value: optionValue,\n               selected: (selectedValues == optionValue) ||\n                 (select2_opts.multiple && _.indexOf(selectedValues, optionValue) > -1)\n            }));\n         } else {\n          opt = _.defaults({}, opt, {\n            selected: ((selectedValues == opt.value) ||\n                (select2_opts.multiple && _.indexOf(selectedValues, opt.value) > -1)),\n            }, self.defaults.opt);\n          $select.append(self.template(opt));\n        }\n      }\n\n      if(col && _.has(col.disabled)) {\n        _.extend(select2_opts, {\n          disabled: evalF(col.disabled, col, model)\n        });\n      } else {\n        _.extend(select2_opts, {disabled: !editable});\n      }\n\n      this.delegateEvents();\n\n      // If disabled then no need to show placeholder\n      if(!editable || col.mode === 'properties') {\n        select2_opts['placeholder'] = '';\n      }\n\n      // Initialize select2 control.\n      this.$sel = this.$select.select2(select2_opts);\n\n      // Select the highlighted item on Tab press.\n      if (this.$sel) {\n        this.$sel.data('select2').on(\"keypress\", function(ev) {\n          var self = this;\n\n          // keycode 9 is for TAB key\n          if (ev.which === 9 && self.isOpen()) {\n            self.trigger('results:select', {});\n            ev.preventDefault();\n          }\n        });\n      }\n\n      return this;\n    },\n\n    /**\n       Saves the value of the selected option to the model attribute.\n    */\n    onSave: function (e) {\n      var model = this.model;\n      var column = this.column;\n\n      model.set(column.get(\"name\"), this.$select.val());\n    },\n\n    remove: function() {\n      this.$select.off('change', this.onSave);\n      if (this.$select.data('select2')) {\n        this.$select.select2('destroy');\n      }\n      this.$el.empty();\n      Backgrid.SelectCell.prototype.remove.apply(this, arguments);\n    }\n  });\n\n  /**\n    TextareaCellEditor the cell editor renders a textarea multi-line text input\n    box as its editor.\n\n    @class Backgrid.TextareaCellEditor\n    @extends Backgrid.InputCellEditor\n  */\n  var TextareaCellEditor = Backgrid.TextareaCellEditor = Backgrid.InputCellEditor.extend({\n    /** @property */\n    tagName: \"textarea\",\n\n    events: {\n      \"blur\": \"saveOrCancel\",\n      \"keydown\": \"\"\n    }\n  });\n\n  /**\n    TextareaCell displays multiline HTML strings.\n\n      @class Backgrid.Extension.TextareaCell\n      @extends Backgrid.Cell\n  */\n  var TextareaCell = Backgrid.Extension.TextareaCell = Backgrid.Cell.extend({\n    /** @property */\n    className: \"textarea-cell\",\n\n    editor: TextareaCellEditor\n  });\n\n\n  /**\n   * Custom header icon cell to add the icon in table header.\n  */\n  var CustomHeaderIconCell = Backgrid.Extension.CustomHeaderIconCell = Backgrid.HeaderCell.extend({\n      /** @property */\n      className: \"header-icon-cell\",\n      events: {\n        \"click\": \"addHeaderIcon\"\n      },\n      addHeaderIcon: function (e) {\n        var self = this,\n        m = new (this.collection.model);\n        this.collection.add(m)\n        e.preventDefault();\n      },\n      render: function () {\n          this.$el.empty();\n          //this.$el.html(\"<i class='fa fa-plus-circle'></i>\");\n          this.$el.html(\"<label><a><span style='font-weight:normal;'>Array Values</a></span></label> <button class='btn-sm btn-default add'>Add</button>\");\n          this.delegateEvents();\n          return this;\n      }\n  });\n\n\n  var arrayCellModel = Backbone.Model.extend({\n    defaults: {\n        value: undefined\n    }\n  });\n\n  /**\n     Custom InputArrayCellEditor for editing user input array for debugger.\n   */\n  var InputArrayCellEditor = Backgrid.Extension.InputArrayCellEditor =\n    Backgrid.CellEditor.extend({\n      tagName: \"div\",\n\n    events: {\n      'blur': 'lostFocus'\n    },\n\n    render: function () {\n        var self = this,\n            arrayValuesCol = this.model.get(this.column.get(\"name\")),\n            tbl = $(\"<table></table>\").appendTo(this.$el),\n            gridCols = [\n                    {name: 'value', label:'Array Values', type: 'text', cell:'string', headerCell: Backgrid.Extension.CustomHeaderIconCell, cellHeaderClasses: 'width_percent_100'},\n                    ],\n            gridBody = $(\"<div class='pgadmin-control-group backgrid form-group col-xs-12 object subnode'></div>\");\n\n        this.$el.attr('tabindex', '1');\n\n        gridCols.unshift({\n          name: \"pg-backform-delete\", label: \"\",\n          cell: Backgrid.Extension.DeleteCell,\n          //headerCell: Backgrid.Extension.CustomHeaderIconCell,\n          editable: false, cell_priority: -1\n        });\n\n      this.$el.empty();\n      var grid = self.grid = new Backgrid.Grid({\n            columns: gridCols,\n            collection:arrayValuesCol\n          });\n\n      grid.render();\n\n      gridBody.append(grid.$el)\n\n      this.$el.html(gridBody);\n\n      $(self.$el).pgMakeVisible('backform-tab');\n      self.delegateEvents();\n\n      return this;\n    },\n\n    /*\n     * Call back function when the grid lost the focus\n     */\n    lostFocus: function(ev) {\n\n      var self = this,\n      /*\n       * Function to determine whether one dom element is descendant of another\n       * dom element.\n       */\n      isDescendant = function (parent, child) {\n         var node = child.parentNode;\n         while (node != null) {\n             if (node == parent) {\n                 return true;\n             }\n             node = node.parentNode;\n         }\n         return false;\n      }\n      /*\n       * Between leaving the old element focus and entering the new element focus the\n       * active element is the document/body itself so add timeout to get the proper\n       * focused active element.\n       */\n      setTimeout(function() {\n        if (self.$el[0] != document.activeElement && !isDescendant(self.$el[0], document.activeElement)){\n          var m = self.model,\n            column = self.column;\n          m.trigger('backgrid:edited', m, column, new Backgrid.Command(ev));\n\n          setTimeout(function(){\n            if (self.grid) {\n                self.grid.remove();\n                self.grid = null;\n            }\n          }, 10);\n\n\n        } },10);\n      return;\n    }\n  });\n\n  /*\n   * This will help us transform the user input string array values in proper format to be\n   * displayed in the cell.\n   */\n  var InputStringArrayCellFormatter = Backgrid.Extension.InputStringArrayCellFormatter =\n    function () {};\n  _.extend(InputStringArrayCellFormatter.prototype, {\n    /**\n     * Takes a raw value from a model and returns an optionally formatted\n     * string for display.\n     */\n    fromRaw: function (rawData, model) {\n        var values = []\n        rawData.each(function(m){\n            var val = m.get('value');\n            if (_.isUndefined(val)) {\n                values.push(\"null\");\n            } else {\n                values.push(m.get(\"value\"));\n            }\n          }\n        );\n        return values.toString();\n    },\n    toRaw: function (formattedData, model) {\n      return formattedData;\n    }\n  });\n\n  /*\n   * This will help us transform the user input integer array values in proper format to be\n   * displayed in the cell.\n   */\n  var InputIntegerArrayCellFormatter = Backgrid.Extension.InputIntegerArrayCellFormatter =\n    function () {};\n  _.extend(InputIntegerArrayCellFormatter.prototype, {\n    /**\n     * Takes a raw value from a model and returns an optionally formatted\n     * string for display.\n     */\n    fromRaw: function (rawData, model) {\n        var values = []\n        rawData.each(function(m){\n            var val = m.get('value');\n            if (_.isUndefined(val)) {\n                values.push(\"null\");\n            } else {\n                values.push(m.get(\"value\"));\n            }\n          }\n        );\n        return values.toString();\n    },\n    toRaw: function (formattedData, model) {\n        formattedData.each(function(m){\n            m.set(\"value\", parseInt(m.get('value')), {silent: true});\n        });\n\n      return formattedData;\n    }\n  });\n\n  /*\n   *  InputStringArrayCell for rendering and taking input for string array type in debugger\n   */\n  var InputStringArrayCell = Backgrid.Extension.InputStringArrayCell = Backgrid.Cell.extend({\n    className: \"width_percent_25\",\n    formatter: InputStringArrayCellFormatter,\n    editor: InputArrayCellEditor,\n\n    initialize: function() {\n      Backgrid.Cell.prototype.initialize.apply(this, arguments);\n        // set value to empty array.\n        var m = arguments[0].model;\n        if (_.isUndefined(this.collection)) {\n            this.collection = new (Backbone.Collection.extend({\n            model: arrayCellModel}))(m.get('value'));\n        }\n\n        this.model.set(this.column.get('name'), this.collection);\n\n        this.listenTo(this.collection, \"remove\", this.render);\n    },\n  });\n\n  /*\n   *  InputIntegerArrayCell for rendering and taking input for integer array type in debugger\n   */\n  var InputIntegerArrayCell = Backgrid.Extension.InputIntegerArrayCell = Backgrid.Cell.extend({\n    className: \"width_percent_25\",\n    formatter: InputIntegerArrayCellFormatter,\n    editor: InputArrayCellEditor,\n\n    initialize: function() {\n      Backgrid.Cell.prototype.initialize.apply(this, arguments);\n        // set value to empty array.\n        var m = arguments[0].model;\n        if (_.isUndefined(this.collection)) {\n            this.collection = new (Backbone.Collection.extend({\n            model: arrayCellModel}))(m.get('value'));\n        }\n\n\n        this.model.set(this.column.get('name'),this.collection);\n\n        this.listenTo(this.collection, \"remove\", this.render);\n    },\n  });\n\n  /**\n   * DependentCell functions can be used with the different cell type in order\n   * to setup the callback for the depedent attribute change in the model.\n   *\n   * Please implement the 'dependentChanged' as the callback in the used cell.\n   *\n   * @class Backgrid.Extension.DependentCell\n   **/\n  var DependentCell = Backgrid.Extension.DependentCell = function() {};\n\n  _.extend(\n    DependentCell.prototype, {\n      initialize: function(){\n        // Listen to the dependent fields in the model for any change\n        var deps = this.column.get('deps');\n        var self = this;\n\n        if (deps && _.isArray(deps)) {\n          _.each(deps, function(d) {\n            var attrArr = d.split('.'),\n            name = attrArr.shift();\n            self.listenTo(self.model, \"change:\" + name, self.dependentChanged);\n          });\n        }\n      },\n      remove: function() {\n        // Remove the events for the dependent fields in the model\n        var self = this,\n          deps = self.column.get('deps');\n\n        if (deps && _.isArray(deps)) {\n          _.each(deps, function(d) {\n            var attrArr = d.split('.'),\n              name = attrArr.shift();\n\n            self.stopListening(self.model, \"change:\" + name, self.dependentChanged);\n          });\n        }\n      }\n    });\n\n  /**\n   Formatter for PasswordCell.\n\n   @class Backgrid.PasswordFormatter\n   @extends Backgrid.CellFormatter\n   @constructor\n  */\n  var PasswordFormatter = Backgrid.PasswordFormatter = function () {};\n  PasswordFormatter.prototype = new Backgrid.CellFormatter();\n  _.extend(PasswordFormatter.prototype, {\n    fromRaw: function (rawValue, model) {\n\n      if (_.isUndefined(rawValue) || _.isNull(rawValue)) return '';\n\n      var pass = '';\n      for(var i = 0; i < rawValue.length; i++) {\n        pass += '*';\n      }\n      return pass;\n    }\n  });\n\n  var PasswordCell = Backgrid.Extension.PasswordCell  = Backgrid.StringCell.extend({\n\n    formatter: PasswordFormatter,\n\n    editor: Backgrid.InputCellEditor.extend({\n      attributes: {\n        type: \"password\"\n      },\n\n      render: function () {\n        var model = this.model;\n        this.$el.val(model.get(this.column.get(\"name\")));\n        return this;\n      }\n    })\n  });\n\n  /*\n   * Override NumberFormatter to support NaN, Infinity values.\n   * On client side, JSON do not directly support NaN & Infinity,\n   * we explicitly converted it into string format at server side\n   * and we need to parse it again in float at client side.\n   */\n  _.extend(Backgrid.NumberFormatter.prototype, {\n    fromRaw: function (number, model) {\n      if (_.isNull(number) || _.isUndefined(number)) return '';\n\n      number = parseFloat(number).toFixed(~~this.decimals);\n\n      var parts = number.split('.');\n      var integerPart = parts[0];\n      var decimalPart = parts[1] ? (this.decimalSeparator || '.') + parts[1] : '';\n\n      return integerPart.replace(this.HUMANIZED_NUM_RE, '$1' + this.orderSeparator) + decimalPart;\n    }\n  });\n\n  /*\n   *  JSONBCell Formatter.\n   */\n  var JSONBCellFormatter = Backgrid.Extension.JSONBCellFormatter =\n    function () {};\n  _.extend(JSONBCellFormatter.prototype, {\n    fromRaw: function (rawData, model) {\n        // json data\n        if(_.isArray(rawData)) {\n          var converted_data = '';\n          converted_data = _.map(rawData, function(data) {\n            return JSON.stringify(JSON.stringify(data));\n          });\n          return '{' + converted_data.join() + '}';\n        } else if(_.isObject(rawData)) {\n          return JSON.stringify(rawData);\n        } else {\n          return rawData;\n        }\n    },\n    toRaw: function (formattedData, model) {\n      return formattedData;\n    }\n  });\n\n  /*\n   *  JSONBCell for backgrid.\n   */\n  var JSONBCell = Backgrid.Extension.JSONBCell =\n      Backgrid.StringCell.extend({\n        className: \"jsonb-cell\",\n        formatter: JSONBCellFormatter\n      });\n\n  var DatepickerCell = Backgrid.Extension.DatepickerCell = Backgrid.Cell.extend({\n    editor: DatepickerCellEditor\n  });\n\n  var DatepickerCellEditor = Backgrid.InputCellEditor.extend({\n    events:{},\n    initialize:function() {\n      Backgrid.InputCellEditor.prototype.initialize.apply(this, arguments);\n      var input = this;\n      $(this.el).prop('readonly', true);\n      $(this.el).datepicker({\n        onClose: function(newValue){\n          var command = new Backgrid.Command({});\n          input.model.set(input.column.get(\"name\"), newValue);\n          input.model.trigger(\n            \"backgrid:edited\", input.model, input.column, command\n          );\n          command = input = null;\n        }\n      });\n    }\n  });\n\n  // Reference:\n  // https://github.com/wyuenho/backgrid-moment-cell/blob/master/backgrid-moment-cell.js\n  /**\n   MomentFormatter converts bi-directionally any datetime values in any format\n   supported by [moment()](http://momentjs.com/docs/#/parsing/) to any\n   datetime format\n   [moment.fn.format()](http://momentjs.com/docs/#/displaying/format/)\n   supports.\n   @class Backgrid.Extension.MomentFormatter\n   @extends Backgrid.CellFormatter\n   @constructor\n   */\n  var MomentFormatter = Backgrid.Extension.MomentFormatter = function (options) {\n    _.extend(this, this.defaults, options);\n  };\n\n  MomentFormatter.prototype = new Backgrid.CellFormatter;\n  _.extend(MomentFormatter.prototype, {\n    /**\n       @cfg {Object} options\n       @cfg {boolean} [options.modelInUnixOffset=false] Whether the model values\n       should be read/written as the number of milliseconds since UNIX Epoch.\n       @cfg {boolean} [options.modelInUnixTimestamp=false] Whether the model\n       values should be read/written as the number of seconds since UNIX Epoch.\n       @cfg {boolean} [options.modelInUTC=true] Whether the model values should\n       be read/written in UTC mode or local mode.\n       @cfg {string} [options.modelLang=moment.locale() moment>=2.8.0 |\n       moment.lang() moment<2.8.0] The locale the model values should be\n       read/written in.\n       @cfg {string} [options.modelFormat=moment.defaultFormat] The format this\n       moment formatter should use to read/write model values. Only meaningful if\n       the values are strings.\n       @cfg {boolean} [options.displayInUnixOffset=false] Whether the display\n       values should be read/written as the number of milliseconds since UNIX\n       Epoch.\n       @cfg {boolean} [options.displayInUnixTimestamp=false] Whether the display\n       values should be read/written as the number of seconds since UNIX Epoch.\n       @cfg {boolean} [options.displayInUTC=true] Whether the display values\n       should be read/written in UTC mode or local mode.\n       @cfg {string} [options.displayLang=moment.locale() moment>=2.8.0 |\n       moment.lang() moment<2.8.0] The locale the display values should be\n       read/written in.\n       @cfg {string} [options.displayFormat=moment.defaultFormat] The format\n       this moment formatter should use to read/write dislay values.\n       */\n    defaults: {\n      modelInUnixOffset: false,\n      modelInUnixTimestamp: false,\n      modelInUTC: true,\n      modelLang: moment.locale(),\n      modelFormat: moment.defaultFormat,\n      displayInUnixOffset: false,\n      displayInUnixTimestamp: false,\n      displayInUTC: true,\n      displayLang: moment.locale(),\n      displayFormat: moment.defaultFormat,\n      allowEmpty: false\n    },\n\n    /**\n       Converts datetime values from the model for display.\n       @member Backgrid.Extension.MomentFormatter\n       @param {*} rawData\n       @return {string}\n       */\n    fromRaw: function (rawData) {\n      if (rawData == null) return '';\n\n      var m = this.modelInUnixOffset ? moment(rawData) :\n        this.modelInUnixTimestamp ? moment.unix(rawData) :\n        this.modelInUTC ?\n        moment.utc(rawData, this.modelFormat, this.modelLang) :\n        moment(rawData, this.modelFormat, this.modelLang);\n\n      if (this.displayInUnixOffset) return +m;\n\n      if (this.displayInUnixTimestamp) return m.unix();\n\n      if (this.displayLang) m.locale(this.displayLang);\n\n      if (this.displayInUTC) m.utc(); else m.local();\n\n      if (this.displayFormat != moment.defaultFormat) {\n        return m.format(this.displayFormat);\n      }\n\n      return m.format();\n    },\n\n    /**\n       Converts datetime values from user input to model values.\n       @member Backgrid.Extension.MomentFormatter\n       @param {string} formattedData\n       @return {string}\n       */\n    toRaw: function (formattedData) {\n\n      var m = this.displayInUnixOffset ? moment(+formattedData) :\n        this.displayInUnixTimestamp ? moment.unix(+formattedData) :\n        this.displayInUTC ?\n        moment.utc(formattedData, this.displayFormat, this.displayLang) :\n        moment(formattedData, this.displayFormat, this.displayLang);\n\n      if (!m || !m.isValid()) return (this.allowEmpty && formattedData === '') ? null : undefined;\n\n      if (this.modelInUnixOffset) return +m;\n\n      if (this.modelInUnixTimestamp) return m.unix();\n\n      if (this.modelLang) m.locale(this.modelLang);\n\n      if (this.modelInUTC) m.utc(); else m.local()\n\n      if (this.modelFormat != moment.defaultFormat) {\n        return m.format(this.modelFormat);\n      }\n\n      return m.format();\n    }\n  });\n\n  var MomentCell = Backgrid.Extension.MomentCell = Backgrid.Cell.extend({\n\n    editor: Backgrid.InputCellEditor,\n\n    /** @property */\n    className: \"datetime-cell\",\n\n    /** @property {Backgrid.CellFormatter} [formatter=Backgrid.Extension.MomentFormatter] */\n    formatter: MomentFormatter,\n\n    /**\n       Initializer. Accept Backgrid.Extension.MomentFormatter.options and\n       Backgrid.Cell.initialize required parameters.\n     */\n    initialize: function (options) {\n\n      MomentCell.__super__.initialize.apply(this, arguments);\n\n      var formatterDefaults = MomentFormatter.prototype.defaults;\n      var formatterDefaultKeys = _.keys(formatterDefaults);\n      var classAttrs = _.pick(this, formatterDefaultKeys);\n      var formatterOptions = _.pick(options, formatterDefaultKeys);\n      var columnsAttrs = _.pick(this.column.toJSON(), formatterDefaultKeys);\n\n      // Priority of the options for the formatter, from highest to lowerest\n      // 1. MomentCell instance options\n      // 2. MomentCell class attributes\n      // 3. MomentFormatter defaults\n\n      // this.formatter will have been instantiated now\n      _.extend(this.formatter, formatterDefaults, classAttrs, formatterOptions, columnsAttrs);\n\n      this.editor = this.editor.extend({\n        attributes: _.extend({}, this.editor.prototype.attributes || this.editor.attributes || {}, {\n          placeholder: this.formatter.displayFormat\n        }),\n        options: this.column.get('options')\n      });\n    }\n  });\n\n  var DatetimePickerEditor = Backgrid.Extension.DatetimePickerEditor = Backgrid.InputCellEditor.extend({\n    postRender: function() {\n      var self = this,\n          evalF = function() {\n            var args = [];\n            Array.prototype.push.apply(args, arguments);\n            var f = args.shift();\n\n            if (typeof(f) === 'function') {\n              return f.apply(self, args);\n            }\n            return f;\n          },\n          options = _.extend({\n            format: \"YYYY-MM-DD HH:mm:ss Z\",\n            showClear: true,\n            showTodayButton: true,\n            toolbarPlacement: 'top'\n          }, evalF(this.column.get('options')), {\n            keyBinds: {\n              \"shift tab\": function(widget) {\n                if (widget) {\n                  // blur the input\n                  setTimeout(\n                    function() {\n                      self.closeIt({keyCode: 9, shiftKey: true});\n                    }, 10\n                  );\n                }\n              },\n              tab: function(widget) {\n                if (widget) {\n                  // blur the input\n                  setTimeout(\n                    function() {\n                      self.closeIt({keyCode: 9});\n                    }, 10\n                  );\n                }\n              }\n            }\n          });\n      this.$el.datetimepicker(options);\n      this.$el.datetimepicker('show');\n      this.picker = this.$el.data('DateTimePicker');\n    },\n    events: {\n      'dp.hide': 'closeIt'\n    },\n    closeIt: function(ev) {\n      var formatter = this.formatter,\n          model = this.model,\n          column = this.column,\n          val = this.$el.val(),\n          newValue = formatter.toRaw(val, model);\n\n      if (this.is_closing)\n        return;\n      this.is_closing = true;\n      this.$el.datetimepicker('destroy');\n      this.is_closing = false;\n\n      var command = new Backgrid.Command(ev);\n\n      if (_.isUndefined(newValue)) {\n        model.trigger(\"backgrid:error\", model, column, val);\n      } else {\n        model.set(column.get(\"name\"), newValue);\n        model.trigger(\"backgrid:edited\", model, column, command);\n      }\n    }\n  });\n\n  _.extend(MomentCell.prototype, MomentFormatter.prototype.defaults);\n\n\n  Backgrid.Extension.StringDepCell = Backgrid.StringCell.extend({\n      initialize: function() {\n        Backgrid.StringCell.prototype.initialize.apply(this, arguments);\n        Backgrid.Extension.DependentCell.prototype.initialize.apply(this, arguments);\n      },\n      dependentChanged: function () {\n        this.$el.empty();\n\n        var self = this,\n            model = this.model,\n            column = this.column,\n            editable = this.column.get(\"editable\");\n\n        this.render();\n\n        var is_editable = _.isFunction(editable) ? !!editable.apply(column, [model]) : !!editable;\n        setTimeout(function() {\n          self.$el.removeClass(\"editor\");\n          if (is_editable){ self.$el.addClass(\"editable\"); }\n          else { self.$el.removeClass(\"editable\"); }\n        }, 10);\n\n        this.delegateEvents();\n        return this;\n      },\n      remove: Backgrid.Extension.DependentCell.prototype.remove\n    });\n\n  Backgrid.Extension.Select2DepCell = Backgrid.Extension.Select2Cell.extend({\n    initialize: function() {\n      Backgrid.Extension.Select2Cell.prototype.initialize.apply(this, arguments);\n      Backgrid.Extension.DependentCell.prototype.initialize.apply(this, arguments);\n    },\n\n    dependentChanged: function () {\n      var model = this.model;\n      var column = this.column;\n      editable = this.column.get(\"editable\");\n\n      this.render();\n\n      is_editable = _.isFunction(editable) ? !!editable.apply(column, [model]) : !!editable;\n      if (is_editable){ this.$el.addClass(\"editable\"); }\n      else { this.$el.removeClass(\"editable\"); }\n\n      this.delegateEvents();\n      return this;\n    },\n    remove: Backgrid.Extension.DependentCell.prototype.remove\n  });\n\n  return Backgrid;\n\n}));\n\n\n\n// WEBPACK FOOTER //\n// pgadmin/static/js/backgrid.pgadmin.js","define(\n  'pgadmin.browser.node', [\n    'sources/gettext', 'jquery', 'underscore', 'underscore.string', 'sources/pgadmin',\n    'pgadmin.browser.menu', 'backbone', 'pgadmin.alertifyjs', 'pgadmin.browser.datamodel',\n    'backform', 'sources/browser/generate_url', 'pgadmin.browser.utils', 'pgadmin.backform'\n], function(gettext, $, _, S, pgAdmin, Menu, Backbone, Alertify, pgBrowser, Backform, generateUrl) {\n\n  var wcDocker = window.wcDocker,\n    keyCode = {\n      ENTER: 13,\n      ESCAPE: 27,\n      F1: 112\n    };\n\n  // It has already been defined.\n  // Avoid running this script again.\n  if (pgBrowser.Node)\n    return pgBrowser.Node;\n\n  pgBrowser.Nodes = pgBrowser.Nodes || {};\n\n  // A helper (base) class for all the nodes, this has basic\n  // operations/callbacks defined for basic operation.\n  pgBrowser.Node = function() {};\n\n  // Helper function to correctly set up the property chain, for subclasses.\n  // Uses a hash of class properties to be extended.\n  //\n  // It is unlikely - we will instantiate an object for this class.\n  // (Inspired by Backbone.extend function)\n  pgBrowser.Node.extend = function(props) {\n    var parent = this;\n    var child;\n\n    // The constructor function for the new subclass is defined to simply call\n    // the parent's constructor.\n    child = function(){ return parent.apply(this, arguments); };\n\n    // Add static properties to the constructor function, if supplied.\n    _.extend(child, parent, _.omit(props, 'callbacks'));\n\n    // Make sure - a child have all the callbacks of the parent.\n    child.callbacks = _.extend({}, parent.callbacks, props.callbacks);\n\n    var bindToChild = function(cb) {\n          if (typeof(child.callbacks[cb]) == 'function') {\n            child.callbacks[cb] = child.callbacks[cb].bind(child);\n          }\n        },\n        callbacks = _.keys(child.callbacks);\n    for(var idx = 0; idx < callbacks.length; idx++) bindToChild(callbacks[idx]);\n\n    // Registering the node by calling child.Init(...) function\n    child.Init.apply(child);\n\n    // Initialize the parent\n    this.Init.apply(child);\n\n    return child;\n  };\n\n  _.extend(pgAdmin.Browser.Node, Backbone.Events, {\n    // Node type\n    type: undefined,\n    // Label\n    label: '',\n    // Help pages\n    sqlAlterHelp: '',\n    sqlCreateHelp: '',\n    dialogHelp: '',\n\n    title: function(o, d) {\n      return o.label + (d ? (' - ' + d.label) : '');\n    },\n    hasId: true,\n    ///////\n    // Initialization function\n    // Generally - used to register the menus for this type of node.\n    //\n    // Also, look at pgAdmin.Browser.add_menus(...) function.\n    //\n    // NOTE: Override this for each node for initialization purpose\n    Init: function() {\n      var self = this;\n      if (self.node_initialized)\n        return;\n      self.node_initialized = true;\n\n      pgAdmin.Browser.add_menus([{\n        name: 'refresh', node: self.type, module: self,\n        applies: ['object', 'context'], callback: 'refresh',\n        priority: 1, label: gettext('Refresh...'),\n        icon: 'fa fa-refresh'\n      }]);\n\n      if (self.canEdit) {\n        pgAdmin.Browser.add_menus([{\n        name: 'show_obj_properties', node: self.type, module: self,\n        applies: ['object', 'context'], callback: 'show_obj_properties',\n        priority: 999, label: gettext('Properties...'),\n        data: {'action': 'edit'}, icon: 'fa fa-pencil-square-o'\n      }]);\n      }\n\n      if (self.canDrop) {\n        pgAdmin.Browser.add_menus([{\n          name: 'delete_object', node: self.type, module: self,\n          applies: ['object', 'context'], callback: 'delete_obj',\n          priority: 2, label: gettext('Delete/Drop'),\n          data: {'url': 'drop'}, icon: 'fa fa-trash',\n          enable: _.isFunction(self.canDrop) ?\n            function() {\n              return !!(self.canDrop.apply(self, arguments));\n            } : (!!self.canDrop)\n        }]);\n        if (self.canDropCascade) {\n          pgAdmin.Browser.add_menus([{\n            name: 'delete_object_cascade', node: self.type, module: self,\n            applies: ['object', 'context'], callback: 'delete_obj',\n            priority: 3, label: gettext('Drop Cascade'),\n            data: {'url': 'delete'}, icon: 'fa fa-trash',\n            enable: _.isFunction(self.canDropCascade) ?\n              function() { return self.canDropCascade.apply(self, arguments); } : (!!self.canDropCascade)\n          }]);\n        }\n      }\n\n      // show query tool only in context menu of supported nodes.\n      if (true) {\n        if (_.indexOf(pgAdmin.unsupported_nodes, self.type) == -1) {\n          pgAdmin.Browser.add_menus([{\n            name: 'show_query_tool', node: self.type, module: self,\n            applies: ['context'], callback: 'show_query_tool',\n            priority: 998, label: gettext('Query Tool...'),\n            icon: 'fa fa-bolt',\n            enable: function(itemData, item, data) {\n              if (itemData._type == 'database' && itemData.allowConn)\n                return true;\n              else if(itemData._type != 'database')\n                return true;\n              else\n                return false;\n            }\n          }]);\n        }\n      }\n\n      // This will add options of scripts eg:'CREATE Script'\n      if (self.hasScriptTypes && _.isArray(self.hasScriptTypes)\n        &&  self.hasScriptTypes.length > 0) {\n          // For each script type create menu\n          _.each(self.hasScriptTypes, function(stype) {\n\n            var type_label = S(\n                gettext(\"%s Script\")\n                ).sprintf(stype.toUpperCase()).value(),\n              stype = stype.toLowerCase();\n\n            // Adding menu for each script type\n            pgAdmin.Browser.add_menus([{\n              name: 'show_script_' + stype, node: self.type, module: self,\n              applies: ['object', 'context'], callback: 'show_script',\n              priority: 4, label: type_label, category: 'Scripts',\n              data: {'script': stype}, icon: 'fa fa-pencil',\n              enable: self.check_user_permission\n            }]);\n          });\n      }\n    },\n    ///////\n    // Checks if Script Type is allowed to user\n    // First check if role node & create role allowed\n    // Otherwise test rest of database objects\n    // if no permission matched then do not allow create script\n    ///////\n    check_user_permission: function(itemData, item, data) {\n      // Do not display CREATE script on server group and server node\n      if (itemData._type == 'server_group' || itemData._type == 'server') {\n        return false;\n      }\n\n      // Do not display the menu if the database connection is not allowed\n      if (itemData._type == 'database' && !itemData.allowConn)\n        return false;\n\n      var node = pgBrowser.Nodes[itemData._type],\n        parentData = node.getTreeNodeHierarchy(item);\n      if ( _.indexOf(['create','insert','update', 'delete'], data.script) != -1) {\n        if (itemData.type == 'role' &&\n          parentData.server.user.can_create_role) {\n          return true;\n        } else if (\n           (\n            parentData.server && (\n            parentData.server.user.is_superuser ||\n            parentData.server.user.can_create_db)\n           ) ||\n           (\n            parentData.schema && parentData.schema.can_create\n           )\n           ) {\n            return true;\n        } else {\n           return false;\n        }\n      } else {\n        return true;\n      }\n    },\n    ///////\n    // Generate a Backform view using the node's model type\n    //\n    // Used to generate view for the particular node properties, edit,\n    // creation.\n    getView: function(item, type, el, node, formType, callback, ctx, cancelFunc) {\n      var that = this;\n\n      if (!this.type || this.type == '')\n        // We have no information, how to generate view for this type.\n        return null;\n\n      if (this.model) {\n        // This will be the URL, used for object manipulation.\n        // i.e. Create, Update in these cases\n        var urlBase = this.generate_url(item, type, node, false);\n\n        if (!urlBase)\n          // Ashamed of myself, I don't know how to manipulate this\n          // node.\n          return null;\n\n        var attrs = {};\n\n        // In order to get the object data from the server, we must set\n        // object-id in the model (except in the create mode).\n        if (type !== 'create') {\n          attrs[this.model.idAttribute || this.model.prototype.idAttribute ||\n            'id'] = node._id;\n        }\n\n        // We know - which data model to be used for this object.\n        var info = this.getTreeNodeHierarchy.apply(this, [item]),\n            newModel = new (this.model.extend({urlRoot: urlBase})) (\n                attrs, {node_info: info}\n                ),\n            fields = Backform.generateViewSchema(\n                info, newModel, type, this, node\n                );\n\n        if (type == 'create' || type == 'edit') {\n\n          if (callback && ctx) {\n              callback = callback.bind(ctx);\n          } else {\n            callback = function() {\n              console.log(\"Broke something!!! Why we don't have the callback or the context???\");\n            };\n          }\n\n          var onSessionInvalid = function(msg) {\n            var alertMessage = '\\\n              <div class=\"media error-in-footer bg-red-1 border-red-2 font-red-3 text-14\">\\\n                <div class=\"media-body media-middle\">\\\n                  <div class=\"alert-icon error-icon\">\\\n                    <i class=\"fa fa-exclamation-triangle\" aria-hidden=\"true\"></i>\\\n                  </div>\\\n                    <div class=\"alert-text\">' + msg + '</div>\\\n                </div>\\\n              </div>';\n            if(!_.isUndefined(that.statusBar)) {\n              that.statusBar.html(alertMessage).css(\"visibility\", \"visible\");\n            }\n            callback(true);\n\n            return true;\n          };\n\n          var onSessionValidated =  function(sessHasChanged) {\n\n            if(!_.isUndefined(that.statusBar)) {\n              that.statusBar.empty().css(\"visibility\", \"hidden\");\n            }\n\n            callback(false, sessHasChanged);\n          };\n\n          callback(false, false);\n\n          newModel.on('pgadmin-session:valid', onSessionValidated);\n          newModel.on('pgadmin-session:invalid', onSessionInvalid);\n        }\n        // 'schema' has the information about how to generate the form.\n        if (_.size(fields)) {\n          // This will contain the actual view\n          var view;\n\n          if (formType == 'fieldset') {\n            // It is used to show, edit, create the object in the\n            // properties tab.\n            view = new Backform.Fieldset({\n              el: el, model: newModel, schema: fields\n            });\n          } else {\n            // This generates a view to be used by the node dialog\n            // (for create/edit operation).\n            view = new Backform.Dialog({\n              el: el, model: newModel, schema: fields\n            });\n          }\n\n          var setFocusOnEl = function() {\n            setTimeout(function() {\n              $(el).find('.tab-pane.active:first').find('input:first').focus();\n            }, 500);\n          };\n\n          if (!newModel.isNew()) {\n            // This is definetely not in create mode\n            var msgDiv = '<div class=\"alert alert-info pg-panel-message pg-panel-properties-message\">'+\n                gettext(\"Retrieving data from the server...\") + '</div>',\n                $msgDiv = $(msgDiv);\n            var timer = setTimeout(function(ctx) {\n              // notify user if request is taking longer than 1 second\n\n              if (!_.isUndefined(ctx)) {\n                $msgDiv.appendTo(ctx);\n              }\n            }, 1000, ctx);\n\n            newModel.fetch({\n              success: function(res, msg, xhr) {\n                // clear timeout and remove message\n                clearTimeout(timer);\n                $msgDiv.addClass('hidden');\n\n                // We got the latest attributes of the\n                // object. Render the view now.\n                view.render();\n                setFocusOnEl();\n                newModel.startNewSession();\n              },\n              error: function(xhr, error, message) {\n                var _label = that && item ?\n                              that.getTreeNodeHierarchy(\n                                item\n                              )[that.type].label : '';\n                pgBrowser.Events.trigger(\n                  'pgadmin:node:retrieval:error', 'properties',\n                  xhr, error, message, item\n                );\n                if (\n                  !Alertify.pgHandleItemError(\n                    xhr, error, message, {item: item, info: info}\n                  )\n                ) {\n                  Alertify.pgNotifier(\n                    error, xhr,\n                    S(\n                      gettext(\"Error retrieving properties - %s\")\n                    ).sprintf(message || _label).value(),\n                    function() {\n                      console.log(arguments);\n                    }\n                  );\n                }\n                // Close the panel (if could not fetch properties)\n                if (cancelFunc) {\n                  cancelFunc();\n                }\n              }\n            });\n          } else {\n            // Yay - render the view now!\n            // $(el).focus();\n            view.render();\n            setFocusOnEl();\n            newModel.startNewSession();\n          }\n        }\n        return view;\n      }\n\n      return null;\n    },\n    register_node_panel: function() {\n      var w = pgBrowser.docker,\n        p = w.findPanels('node_props');\n\n      if (p && p.length == 1)\n        return;\n\n      var events = {};\n      events[wcDocker.EVENT.RESIZE_ENDED] = function() {\n        var $container = this.$container.find('.obj_properties').first(),\n            v = $container.data('obj-view');\n\n        if (v && v.model && v.model) {\n          v.model.trigger(\n            'pg-browser-resized', {\n              'view': v, 'panel': this, 'container': $container\n          });\n\n        }\n      };\n\n      p = new pgBrowser.Panel({\n          name: 'node_props',\n          showTitle: true,\n          isCloseable: true,\n          isPrivate: true,\n          elContainer: true,\n          content: '<div class=\"obj_properties\"><div class=\"alert alert-info pg-panel-message\">' + gettext('Please wait while we fetch information about the node from the server!') + '</div></div>',\n          onCreate: function(myPanel, $container) {\n            $container.addClass('pg-no-overflow');\n          },\n          events: events\n      });\n      p.load(pgBrowser.docker);\n    },\n    /*\n     * Default script type menu for node.\n     *\n     * Override this, to show more script type menus (e.g hasScriptTypes: ['create', 'select', 'insert', 'update', 'delete'])\n     *\n     * Or set it to empty array to disable script type menu on node (e.g hasScriptTypes: [])\n     */\n    hasScriptTypes: ['create'],\n    /******************************************************************\n     * This function determines the given item is editable or not.\n     *\n     * Override this, when a node is not editable.\n     */\n    canEdit: true,\n    /******************************************************************\n     * This function determines the given item is deletable or not.\n     *\n     * Override this, when a node is not deletable.\n     */\n    canDrop: false,\n    /************************************************************************\n     * This function determines the given item and children are deletable or\n     * not.\n     *\n     * Override this, when a node is not deletable.\n     */\n    canDropCascade: false,\n    // List of common callbacks - that can be used for different\n    // operations!\n    callbacks: {\n      /******************************************************************\n       * This function allows to create/edit/show properties of any\n       * object depending on the arguments provided.\n       *\n       * args must be a object containing:\n       *   action - create/edit/properties\n       *   item   - The properties of the item (tree ndoe item)\n       *\n       * NOTE:\n       * if item is not provided, the action will be done on the\n       * currently selected tree item node.\n       *\n       **/\n      show_obj_properties: function(args, item) {\n        var t = pgBrowser.tree,\n          i = args.item || item || t.selected(),\n          d = i && i.length == 1 ? t.itemData(i) : undefined,\n          o = this,\n          l = o.title.apply(this, [d]);\n\n        // Make sure - the properties dialog type registered\n        pgBrowser.Node.register_node_panel();\n\n        // No node selected.\n        if (!d)\n          return;\n\n        var self = this,\n            isParent = (_.isArray(this.parent_type) ?\n              function(d) {\n                return (_.indexOf(self.parent_type, d._type) != -1);\n              } : function(d) {\n                return (self.parent_type == d._type);\n              }),\n            addPanel = function() {\n              var d = window.document,\n                  b = d.body,\n                  el = d.createElement('div');\n\n              d.body.insertBefore(el, d.body.firstChild);\n\n              var pW = screen.width < 800 ? '95%' : '500px',\n                  pH = screen.height < 600 ? '95%' : '550px',\n                  w = pgAdmin.toPx(el, self.width || pW, 'width', true),\n                  h = pgAdmin.toPx(el, self.height|| pH, 'height', true),\n                  x = (b.offsetWidth - w) / 2,\n                  y = (b.offsetHeight - h) / 2;\n\n              var p = pgBrowser.docker.addPanel(\n                'node_props', wcDocker.DOCK.FLOAT, undefined,\n                {w: w + 'px', h: h + 'px', x: x + 'px', y: y + 'px'}\n              );\n\n              b.removeChild(el);\n              // delete(el);\n\n              return p;\n            };\n\n        if (args.action == 'create') {\n          // If we've parent, we will get the information of it for\n          // proper object manipulation.\n          //\n          // You know - we're working with RDBMS, relation is everything\n          // for us.\n          if (self.parent_type && !isParent(d)) {\n            // In browser tree, I can be under any node, But - that\n            // does not mean, it is my parent.\n            //\n            // We have some group nodes too.\n            //\n            // i.e.\n            // Tables, Views, etc. nodes under Schema node\n            //\n            // And, actual parent of a table is schema, not Tables.\n            while (i && t.hasParent(i)) {\n              i = t.parent(i);\n              var pd = t.itemData(i);\n\n              if (isParent(pd)) {\n                // Assign the data, this is my actual parent.\n                d = pd;\n                break;\n              }\n            }\n          }\n\n          // Seriously - I really don't have parent data present?\n          //\n          // The only node - which I know - who does not have parent\n          // node, is the Server Group (and, comes directly under root\n          // node - which has no parent.)\n          if (!d || (this.parent_type != null && !isParent(d))) {\n            // It should never come here.\n            // If it is here, that means - we do have some bug in code.\n            return;\n          }\n\n          if (!d)\n            return;\n\n          l = S( gettext('Create - %s')).sprintf(\n              [this.label]).value();\n          p = addPanel();\n\n          setTimeout(function() {\n            o.showProperties(i, d, p, args.action);\n          }, 10);\n        } else {\n          if (pgBrowser.Node.panels && pgBrowser.Node.panels[d.id] &&\n              pgBrowser.Node.panels[d.id].$container) {\n            var p = pgBrowser.Node.panels[d.id];\n            /**  TODO ::\n             *  Run in edit mode (if asked) only when it is\n             *  not already been running edit mode\n             **/\n            var mode = p.$container.attr('action-mode');\n            if (mode) {\n              var msg = gettext('Are you sure want to stop editing the properties of %s \"%s\"?');\n              if (args.action == 'edit') {\n                msg = gettext('Are you sure want to reset the current changes and re-open the panel for %s \"%s\"?');\n              }\n\n              Alertify.confirm(\n                gettext('Edit in progress?'),\n                S(msg).sprintf(o.label.toLowerCase(), d.label).value(),\n                function() {\n                  setTimeout(function() {\n                    o.showProperties(i, d, p, args.action);\n                  }, 10);\n                },\n                null).show();\n            } else {\n              setTimeout(function() {\n                o.showProperties(i, d, p, args.action);\n              }, 10);\n            }\n          } else {\n            pgBrowser.Node.panels = pgBrowser.Node.panels || {};\n            p = pgBrowser.Node.panels[d.id] = addPanel();\n\n            setTimeout(function() {\n              o.showProperties(i, d, p, args.action);\n            }, 10);\n          }\n        }\n\n        p.title(l);\n        p.icon('icon-' + this.type);\n\n        // Make sure the properties dialog is visible\n        p.focus();\n      },\n      // Delete the selected object\n      delete_obj: function(args, item) {\n          var input = args || {'url':'drop'},\n              obj = this,\n              t = pgBrowser.tree,\n              i = input.item || item || t.selected(),\n              d = i && i.length == 1 ? t.itemData(i) : undefined;\n\n        if (!d)\n          return;\n\n        /*\n         * Make sure - we're using the correct version of node\n         */\n        obj = pgBrowser.Nodes[d._type];\n        var objName = d.label;\n\n        var msg, title;\n        if (input.url == 'delete') {\n\n          msg = S( gettext('Are you sure you want to drop %s \"%s\" and all the objects that depend on it?'))\n            .sprintf(obj.label.toLowerCase(), d.label).value();\n          title = S( gettext('DROP CASCADE %s?')).sprintf(obj.label).value();\n\n          if (!(_.isFunction(obj.canDropCascade) ?\n                obj.canDropCascade.apply(obj, [d, i]) : obj.canDropCascade)) {\n                Alertify.error(\n                S('The %s \"%s\" cannot be dropped!')\n                .sprintf(obj.label, d.label).value(),\n                10\n                );\n            return;\n          }\n        } else {\n          msg = S( gettext('Are you sure you want to drop %s \"%s\"?'))\n            .sprintf(obj.label.toLowerCase(), d.label).value();\n          title = S( gettext('DROP %s?')).sprintf(obj.label).value();\n\n          if (!(_.isFunction(obj.canDrop) ?\n              obj.canDrop.apply(obj, [d, i]) : obj.canDrop)) {\n            Alertify.error(\n              S('The %s \"%s\" cannot be dropped!')\n              .sprintf(obj.label, d.label).value(),\n              10\n            );\n            return;\n          }\n        }\n        Alertify.confirm(title, msg,\n          function() {\n            $.ajax({\n              url: obj.generate_url(i, input.url, d, true),\n              type:'DELETE',\n              success: function(res) {\n                if (res.success == 0) {\n                  pgBrowser.report_error(res.errormsg, res.info);\n                } else {\n                  pgBrowser.removeTreeNode(i, true);\n                }\n                return true;\n              },\n              error: function(jqx) {\n                var msg = jqx.responseText;\n                /* Error from the server */\n                if (jqx.status == 417 || jqx.status == 410 || jqx.status == 500) {\n                  try {\n                    var data = $.parseJSON(jqx.responseText);\n                    msg = data.errormsg;\n                  } catch (e) {}\n                }\n                pgBrowser.report_error(\n                    S( gettext('Error dropping %s: \"%s\"'))\n                      .sprintf(obj.label, objName)\n                        .value(), msg);\n              }\n            });\n          },\n          null).show()\n      },\n      // Callback for creating script(s) & opening them in Query editor\n      show_script: function(args, item) {\n        var scriptType = args.script,\n          obj = this,\n          t = pgBrowser.tree,\n          i = item || t.selected(),\n          d = i && i.length == 1 ? t.itemData(i) : undefined;\n\n        if (!d)\n          return;\n\n        /*\n         * Make sure - we're using the correct version of node\n         */\n        obj = pgBrowser.Nodes[d._type];\n        var objName = d.label,\n          sql_url;\n\n        // URL for script type\n        if(scriptType == 'insert') {\n          sql_url = 'insert_sql';\n        } else if(scriptType == 'update') {\n          sql_url = 'update_sql';\n        } else if(scriptType == 'delete') {\n          sql_url = 'delete_sql';\n        } else if(scriptType == 'select') {\n          sql_url = 'select_sql';\n        } else if(scriptType == 'exec') {\n          sql_url = 'exec_sql';\n        } else {\n          // By Default get CREATE SQL\n          sql_url = 'sql';\n        }\n        // Open data grid & pass the URL for fetching\n        pgAdmin.DataGrid.show_query_tool(\n          obj.generate_url(i, sql_url, d, true),\n          i, scriptType\n        );\n      },\n\n      // Callback to render query editor\n      show_query_tool: function(args, item) {\n        var obj = this,\n          t = pgBrowser.tree,\n          i = item || t.selected(),\n          d = i && i.length == 1 ? t.itemData(i) : undefined;\n\n        if (!d)\n          return;\n\n        // Here call data grid method to render query tool\n        pgAdmin.DataGrid.show_query_tool('', i);\n      },\n      added: function(item, data, browser) {\n        var b = browser || pgBrowser,\n            t = b.tree,\n            pItem = t.parent(item),\n            pData = pItem && t.itemData(pItem),\n            pNode = pData && pgBrowser.Nodes[pData._type];\n\n        // Check node is a collection or not.\n        if (pNode && pNode.is_collection) {\n          /* If 'collection_count' is not present in data\n           * it means tree node expanded first time, so we will\n           * kept collection count and label in data itself.\n           */\n          if (!('collection_count' in pData)) {\n            pData.collection_count = 0;\n          }\n          pData.collection_count++;\n          t.setLabel(\n            pItem, {\n              label: (\n                _.escape(pData._label) + ' <span>(' + pData.collection_count + ')</span>'\n              )\n            }\n          );\n        }\n      },\n      // Callback called - when a node is selected in browser tree.\n      selected: function(item, data, browser) {\n        // Show the information about the selected node in the below panels,\n        // which are visible at this time:\n        // + Properties\n        // + Query (if applicable, otherwise empty)\n        // + Dependents\n        // + Dependencies\n        // + Statistics\n        var b = browser || pgBrowser,\n            t = b.tree,\n            d = data || t.itemData(item);\n\n        // Update the menu items\n        pgAdmin.Browser.enable_disable_menus.apply(b, [item]);\n\n        if (d && b) {\n          if ('properties' in b.panels &&\n              b.panels['properties'] &&\n              b.panels['properties'].panel &&\n              b.panels['properties'].panel.isVisible()) {\n            // Show object properties (only when the 'properties' tab\n            // is active).\n            this.showProperties(item, d, b.panels['properties'].panel);\n          }\n          if ('sql' in b.panels &&\n              b.panels['sql'] &&\n              b.panels['sql'].panel &&\n              b.panels['sql'].panel.isVisible()) {\n            // TODO:: Show reverse engineered query for this object (when 'sql'\n            // tab is active.)\n          }\n          if ('statistics' in b.panels &&\n              b.panels['statistics'] &&\n              b.panels['statistics'].panel &&\n              b.panels['statistics'].panel.isVisible()) {\n            // TODO:: Show statistics for this object (when the 'statistics'\n            // tab is active.)\n          }\n          if ('dependencies' in b.panels &&\n              b.panels['dependencies'] &&\n              b.panels['dependencies'].panel &&\n              b.panels['dependencies'].panel.isVisible()) {\n            // TODO:: Show dependencies for this object (when the\n            // 'dependencies' tab is active.)\n          }\n          if ('dependents' in b.panels &&\n              b.panels['dependents'] &&\n              b.panels['dependents'].panel &&\n              b.panels['dependents'].panel.isVisible()) {\n            // TODO:: Show dependents for this object (when the 'dependents'\n            // tab is active.)\n          }\n        }\n\n        return true;\n      },\n      removed: function(item) {\n        var self = this,\n            t = pgBrowser.tree,\n            pItem = t.parent(item),\n            pData = pItem && t.itemData(pItem),\n            pNode = pData && pgBrowser.Nodes[pData._type];\n\n        // Check node is a collection or not.\n        if (\n          pNode && pNode.is_collection && 'collection_count' in pData\n        ) {\n          pData.collection_count--;\n          t.setLabel(\n            pItem, {\n              label: (\n                _.escape(pData._label) + ' <span>(' + pData.collection_count + ')</span>'\n              )\n            }\n          );\n        }\n\n        setTimeout(function() { self.clear_cache.apply(self, item); }, 0);\n      },\n      unloaded: function(item) {\n        var self = this,\n            t = pgBrowser.tree,\n            data = item && t.itemData(item);\n\n        // In case of unload remove the collection counter\n        if (self.is_collection && 'collection_count' in data)\n        {\n          delete data.collection_count;\n          t.setLabel(item, {label: _.escape(data._label)});\n        }\n      },\n      refresh: function(cmd, i) {\n        var self = this,\n            t = pgBrowser.tree,\n            item = i || t.selected(),\n            d = t.itemData(item);\n\n        pgBrowser.Events.trigger('pgadmin:browser:tree:refresh', item);\n      }\n    },\n    /**********************************************************************\n     * A hook (not a callback) to show object properties in given HTML\n     * element.\n     *\n     * This has been used for the showing, editing properties of the node.\n     * This has also been used for creating a node.\n     **/\n    showProperties: function(item, data, panel, action) {\n      var that = this,\n        tree = pgAdmin.Browser.tree,\n        j = panel.$container.find('.obj_properties').first(),\n        view = j.data('obj-view'),\n        content = $('<div tabindex=\"1\"></div>')\n          .addClass('pg-prop-content col-xs-12');\n\n        // Handle key press events for Cancel, save and help button\n        var handleKeyDown = function(event, context) {\n          // If called on panel other than node_props, return\n          if (panel && panel['_type'] !== 'node_props') return;\n\n          switch (event.which) {\n            case keyCode.ESCAPE:\n              closePanel();\n              break;\n            case keyCode.ENTER:\n              // Return if event is fired from child element\n              if (event.target !== context) return;\n              if (view && view.model && view.model.sessChanged()) {\n                onSave.call(this, view);\n              }\n              break;\n            case keyCode.F1:\n              onDialogHelp();\n              break;\n            default:\n                break;\n          }\n        }.bind(panel);\n\n        setTimeout(function() {\n          // Register key press events with panel element\n          panel.$container.find('.backform-tab').on(\"keydown\", function(event) {\n              handleKeyDown(event, this);\n          });\n        }, 200); // wait for panel tab to render\n\n        // Template function to create the status bar\n        var createStatusBar = function(location){\n            var statusBar = $('<div></div>').addClass(\n                      'pg-prop-status-bar'\n                      ).appendTo(j);\n            statusBar.css(\"visibility\", \"hidden\");\n            if (location == \"header\") {\n                statusBar.appendTo(that.header);\n            } else {\n                statusBar.prependTo(that.footer);\n            }\n            that.statusBar = statusBar;\n            return statusBar;\n        }.bind(panel),\n        // Template function to create the button-group\n        createButtons = function(buttons, location, extraClasses) {\n          var panel = this;\n\n          // arguments must be non-zero length array of type\n          // object, which contains following attributes:\n          // label, type, extraClasses, register\n          if (buttons && _.isArray(buttons) && buttons.length > 0) {\n            // All buttons will be created within a single\n            // div area.\n            var btnGroup =\n              $('<div></div>').addClass(\n                  'pg-prop-btn-group'\n                  ),\n              // Template used for creating a button\n              tmpl = _.template([\n                '<button type=\"<%= type %>\" ',\n                'class=\"btn <%=extraClasses.join(\\' \\')%>\"',\n                '<% if (disabled) { %> disabled=\"disabled\"<% } %> title=\"<%-tooltip%>\">',\n                '<span class=\"<%= icon %>\"></span><% if (label != \"\") { %>&nbsp;<%-label%><% } %></button>'\n                ].join(' '));\n            if (location == \"header\"){\n                btnGroup.appendTo(that.header);\n            }else{\n                btnGroup.appendTo(that.footer);\n            }\n            if (extraClasses) {\n              btnGroup.addClass(extraClasses);\n            }\n            _.each(buttons, function(btn) {\n              // Create the actual button, and append to\n              // the group div\n\n              // icon may not present for this button\n              if (!btn.icon) {\n                btn.icon = \"\";\n              }\n              var b = $(tmpl(btn));\n              btnGroup.append(b);\n              // Register is a callback to set callback\n              // for certain operation for this button.\n              btn.register(b);\n            });\n            return btnGroup;\n          }\n          return null;\n        }.bind(panel),\n        // Callback to show object properties\n        properties = function() {\n\n          // Avoid unnecessary reloads\n          var panel = this,\n              i = tree.selected(),\n              d = i && tree.itemData(i),\n              n_type = d._type,\n              n_value = -1,\n              n = i && d && pgBrowser.Nodes[d._type],\n              treeHierarchy = n.getTreeNodeHierarchy(i);\n\n          if (_.isEqual($(panel).data('node-prop'), treeHierarchy)) {\n            return;\n          }\n\n          // Cache the current IDs for next time\n          $(panel).data('node-prop', treeHierarchy);\n\n          if (!content.hasClass('has-pg-prop-btn-group'))\n            content.addClass('has-pg-prop-btn-group');\n\n          // We need to release any existing view, before\n          // creating new view.\n          if (view) {\n            // Release the view\n            view.remove({data: true, internal: true, silent: true});\n            // Deallocate the view\n            // delete view;\n            view = null;\n            // Reset the data object\n            j.data('obj-view', null);\n          }\n          // Make sure the HTML element is empty.\n          j.empty();\n          that.header = $('<div></div>').addClass(\n                      'pg-prop-header'\n                      ).appendTo(j);\n          that.footer = $('<div></div>').addClass(\n                      'pg-prop-footer'\n                      ).appendTo(j);\n          // Create a view to show the properties in fieldsets\n          view = that.getView(item, 'properties', content, data, 'fieldset', undefined, j);\n          if (view) {\n            // Save it for release it later\n            j.data('obj-view', view);\n\n            // Create proper buttons\n\n            var buttons = [];\n\n            buttons.push({\n              label: '', type: 'edit',\n              tooltip: gettext('Edit'),\n              extraClasses: ['btn-default'],\n              icon: 'fa fa-lg fa-pencil-square-o',\n              disabled: !that.canEdit,\n              register: function(btn) {\n                btn.click(function() {\n                  onEdit();\n                });\n              }\n            });\n\n            buttons.push({\n              label: '', type: 'help',\n              tooltip: gettext('SQL help for this object type.'),\n              extraClasses: ['btn-default', 'pull-right'],\n              icon: 'fa fa-lg fa-info',\n              disabled: (that.sqlAlterHelp == '' && that.sqlCreateHelp == '') ? true : false,\n              register: function(btn) {\n                btn.click(function() {\n                  onSqlHelp();\n                });\n              }\n            });\n\n            createButtons(buttons, 'header', 'pg-prop-btn-group-above bg-gray-2 border-gray-3');\n          }\n          j.append(content);\n        }.bind(panel),\n        onSqlHelp = function() {\n          var panel = this;\n          // See if we can find an existing panel, if not, create one\n          var pnlSqlHelp = pgBrowser.docker.findPanels('pnl_sql_help')[0];\n\n          if (pnlSqlHelp == null) {\n            var pnlProperties = pgBrowser.docker.findPanels('properties')[0];\n            pgBrowser.docker.addPanel('pnl_sql_help', wcDocker.DOCK.STACKED, pnlProperties);\n            pnlSqlHelp = pgBrowser.docker.findPanels('pnl_sql_help')[0];\n          }\n\n          // Construct the URL\n          var server = that.getTreeNodeHierarchy(item).server;\n\n          var url = pgBrowser.utils.pg_help_path;\n          if (server.server_type == 'ppas') {\n            url = pgBrowser.utils.edbas_help_path;\n          }\n\n          var major = Math.floor(server.version / 10000),\n            minor = Math.floor(server.version / 100) - (major * 100);\n\n          url = url.replace('$VERSION$', major + '.' + minor);\n          if (!S(url).endsWith('/')) {\n            url = url + '/'\n          }\n          if (that.sqlCreateHelp == '' && that.sqlAlterHelp != '') {\n              url = url + that.sqlAlterHelp\n          } else if (that.sqlCreateHelp != '' && that.sqlAlterHelp == '') {\n              url = url + that.sqlCreateHelp\n          } else {\n            if (view.model.isNew()) {\n              url = url + that.sqlCreateHelp\n            } else {\n              url = url + that.sqlAlterHelp\n            }\n          }\n\n          // Update the panel\n          var iframe = $(pnlSqlHelp).data('embeddedFrame');\n          pnlSqlHelp.title('SQL: ' + that.label);\n\n          pnlSqlHelp.focus();\n          iframe.openURL(url);\n        }.bind(panel),\n\n        onDialogHelp = function() {\n          var panel = this;\n          // See if we can find an existing panel, if not, create one\n          var pnlDialogHelp = pgBrowser.docker.findPanels('pnl_online_help')[0];\n\n          if (pnlDialogHelp == null) {\n            var pnlProperties = pgBrowser.docker.findPanels('properties')[0];\n            pgBrowser.docker.addPanel('pnl_online_help', wcDocker.DOCK.STACKED, pnlProperties);\n            pnlDialogHelp = pgBrowser.docker.findPanels('pnl_online_help')[0];\n          }\n\n          // Update the panel\n          var iframe = $(pnlDialogHelp).data('embeddedFrame');\n\n          pnlDialogHelp.focus();\n          iframe.openURL(that.dialogHelp);\n        }.bind(panel),\n\n        onSave = function(view) {\n          var m = view.model,\n            d = m.toJSON(true),\n\n            // Generate a timer for the request\n            timer = setTimeout(function(){\n              $('.obj_properties').addClass('show_progress');\n            }, 1000);\n\n          if (d && !_.isEmpty(d)) {\n            m.save({}, {\n              attrs: d,\n              validate: false,\n              cache: false,\n              success: function() {\n                onSaveFunc.call();\n                // Hide progress cursor\n                $('.obj_properties').removeClass('show_progress');\n                clearTimeout(timer);\n\n                // Removing the node-prop property of panel\n                // so that we show updated data on panel\n                var pnlProperties = pgBrowser.docker.findPanels('properties')[0],\n                  pnlSql = pgBrowser.docker.findPanels('sql')[0],\n                  pnlStats = pgBrowser.docker.findPanels('statistics')[0],\n                  pnlDependencies = pgBrowser.docker.findPanels('dependencies')[0],\n                  pnlDependents = pgBrowser.docker.findPanels('dependents')[0];\n\n                if(pnlProperties)\n                    $(pnlProperties).removeData('node-prop');\n                if(pnlSql)\n                    $(pnlSql).removeData('node-prop');\n                if(pnlStats)\n                    $(pnlStats).removeData('node-prop');\n                if(pnlDependencies)\n                    $(pnlDependencies).removeData('node-prop');\n                if(pnlDependents)\n                    $(pnlDependents).removeData('node-prop');\n              },\n              error: function(m, jqxhr) {\n                Alertify.pgNotifier(\n                  \"error\", jqxhr,\n                  S(\n                    gettext(\"Error saving properties: %s\")\n                    ).sprintf(jqxhr.statusText).value()\n                  );\n\n                // Hide progress cursor\n                $('.obj_properties').removeClass('show_progress');\n                clearTimeout(timer);\n              }\n            });\n          }\n        }.bind(panel),\n\n        editFunc = function() {\n          var panel = this;\n          if (action && action == 'properties') {\n            action = 'edit';\n          }\n          panel.$container.attr('action-mode', action);\n          // We need to release any existing view, before\n          // creating the new view.\n          if (view) {\n            // Release the view\n            view.remove({data: true, internal: true, silent: true});\n            // Deallocate the view\n            view = null;\n            // Reset the data object\n            j.data('obj-view', null);\n          }\n          // Make sure the HTML element is empty.\n          j.empty();\n\n          that.header = $('<div></div>').addClass(\n                      'pg-prop-header'\n                      ).appendTo(j)\n          that.footer = $('<div></div>').addClass(\n                      'pg-prop-footer'\n                      ).appendTo(j);\n\n          var updateButtons = function(hasError, modified) {\n\n            var btnGroup = this.find('.pg-prop-btn-group'),\n                btnSave = btnGroup.find('button.btn-primary'),\n                btnReset = btnGroup.find('button.btn-warning');\n\n            if (hasError || !modified) {\n              btnSave.prop('disabled', true);\n              btnSave.attr('disabled', 'disabled');\n            } else {\n              btnSave.prop('disabled', false);\n              btnSave.removeAttr('disabled');\n            }\n\n            if (!modified) {\n              btnReset.prop('disabled', true);\n              btnReset.attr('disabled', 'disabled');\n            } else {\n              btnReset.prop('disabled', false);\n              btnReset.removeAttr('disabled');\n            }\n          };\n\n          // Create a view to edit/create the properties in fieldsets\n          view = that.getView(item, action, content, data, 'dialog', updateButtons, j, onCancelFunc);\n          if (view) {\n            // Save it to release it later\n            j.data('obj-view', view);\n\n            panel.icon(\n                _.isFunction(that['node_image']) ?\n                  (that['node_image']).apply(that, [data, view.model]) :\n                  (that['node_image'] || ('icon-' + that.type))\n                );\n\n            // Create proper buttons\n            createButtons([{\n              label: '', type: 'help',\n              tooltip: gettext('SQL help for this object type.'),\n              extraClasses: ['btn-default', 'pull-left'],\n              icon: 'fa fa-lg fa-info',\n              disabled: (that.sqlAlterHelp == '' && that.sqlCreateHelp == '') ? true : false,\n              register: function(btn) {\n                btn.click(function() {\n                  onSqlHelp();\n                });\n              }\n            },{\n              label: '', type: 'help',\n              tooltip: gettext('Help for this dialog.'),\n              extraClasses: ['btn-default', 'pull-left'],\n              icon: 'fa fa-lg fa-question',\n              disabled: (that.dialogHelp == '') ? true : false,\n              register: function(btn) {\n                btn.click(function() {\n                  onDialogHelp();\n                });\n              }\n            },{\n              label: gettext('Save'), type: 'save',\n              tooltip: gettext('Save this object.'),\n              extraClasses: ['btn-primary'],\n              icon: 'fa fa-lg fa-save',\n              disabled: true,\n              register: function(btn) {\n                // Save the changes\n                btn.click(function() {\n                  onSave.call(this, view);\n                });\n              }\n            },{\n              label: gettext('Cancel'), type: 'cancel',\n              tooltip: gettext('Cancel changes to this object.'),\n              extraClasses: ['btn-danger'],\n              icon: 'fa fa-lg fa-close',\n              disabled: false,\n              register: function(btn) {\n                btn.click(function() {\n                  // Removing the action-mode\n                  panel.$container.removeAttr('action-mode');\n                  onCancelFunc.call(arguments);\n                });\n              }\n            },{\n              label: gettext('Reset'), type: 'reset',\n              tooltip: gettext('Reset the fields on this dialog.'),\n              extraClasses: ['btn-warning'],\n              icon: 'fa fa-lg fa-recycle',\n              disabled: true,\n              register: function(btn) {\n                btn.click(function() {\n                  setTimeout(function() { editFunc.call(); }, 0);\n                });\n              }\n            }],'footer' ,'pg-prop-btn-group-below bg-gray-2 border-gray-3');\n          };\n\n          // Create status bar.\n          createStatusBar('footer');\n\n          // Add some space, so that - button group does not override the\n          // space\n          content.addClass('pg-prop-has-btn-group-below');\n\n          // Show contents before buttons\n          j.prepend(content);\n        }.bind(panel),\n        closePanel = function() {\n          // Closing this panel\n          this.close();\n        }.bind(panel),\n        updateTreeItem = function(that) {\n          var _old = data,\n              _new = _.clone(view.model.tnode),\n              info = _.clone(view.model.node_info);\n\n          // Clear the cache for this node now.\n          setTimeout(function() { that.clear_cache.apply(that, item); }, 0);\n\n          pgBrowser.Events.trigger(\n            'pgadmin:browser:tree:update',\n            _old, _new, info, {\n              success: function(_item, _newNodeData, _oldNodeData) {\n                pgBrowser.Events.trigger(\n                  'pgadmin:browser:node:updated', _item, _newNodeData,\n                  _oldNodeData\n                );\n                pgBrowser.Events.trigger(\n                  'pgadmin:browser:node:' + _newNodeData._type + ':updated',\n                  _item, _newNodeData, _oldNodeData\n                );\n              }\n            }\n          );\n          closePanel();\n        },\n        saveNewNode = function(that) {\n          var panel = this,\n              j = panel.$container.find('.obj_properties').first(),\n              view = j.data('obj-view');\n\n          // Clear the cache for this node now.\n          setTimeout(function() { that.clear_cache.apply(that, item); }, 0);\n          try {\n            pgBrowser.Events.trigger(\n              'pgadmin:browser:tree:add', _.clone(view.model.tnode),\n              _.clone(view.model.node_info)\n            );\n          } catch (e) {\n            console.log(e);\n          }\n          closePanel();\n        }.bind(panel, that),\n        editInNewPanel = function() {\n          // Open edit in separate panel\n          setTimeout(function() {\n            that.callbacks.show_obj_properties.apply(that, [{\n              'action': 'edit',\n              'item': item\n            }]);\n          }, 0);\n        },\n        onCancelFunc = closePanel,\n        onSaveFunc = updateTreeItem.bind(panel, that),\n        onEdit = editFunc.bind(panel);\n\n      if (action) {\n        if (action == 'create'){\n          onCancelFunc = closePanel;\n          onSaveFunc = saveNewNode;\n        }\n        if (action != 'properties') {\n          // We need to keep track edit/create mode for this panel.\n          editFunc();\n        } else {\n          properties();\n        }\n      } else {\n        /* Show properties */\n        properties();\n        onEdit = editInNewPanel.bind(panel);\n      }\n      if (panel.closeable()) {\n        var onCloseFunc = function() {\n          var j = this.$container.find('.obj_properties').first(),\n              view = j && j.data('obj-view');\n\n          if (view) {\n            view.remove({data: true, internal: true, silent: true});\n          }\n        }.bind(panel);\n        panel.on(wcDocker.EVENT.CLOSED, onCloseFunc);\n      }\n    },\n    _find_parent_node: function(t, i, d) {\n      if (this.parent_type) {\n        d = d || t.itemData(i);\n\n        if (_.isString(this.parent_type)) {\n          if (this.parent_type == d._type) {\n            return i;\n          }\n          while(t.hasParent(i)) {\n            i = t.parent(i);\n            d = t.itemData(i);\n\n            if (this.parent_type == d._type)\n              return i;\n          }\n        } else {\n          if (_.indexOf(this.parent_type, d._type) >= 0) {\n            return i;\n          }\n          while(t.hasParent(i)) {\n            i = t.parent(i);\n            d = t.itemData(i);\n\n            if (_.indexOf(this.parent_type, d._type) >= 0)\n              return i;\n          }\n        }\n      }\n      return null;\n    },\n    /**********************************************************************\n     * Generate the URL for different operations\n     *\n     * arguments:\n     *   type:  Create/drop/edit/properties/sql/depends/statistics\n     *   d:     Provide the ItemData for the current item node\n     *   with_id: Required id information at the end?\n     *\n     * Supports url generation for create, drop, edit, properties, sql,\n     * depends, statistics\n     */\n    generate_url: function(item, type, d, with_id, info) {\n\n      var opURL = {\n          'create': 'obj', 'drop': 'obj', 'edit': 'obj',\n          'properties': 'obj', 'statistics': 'stats'\n        }, self = this,\n        priority = -Infinity;\n\n      var treeInfo = (_.isUndefined(item) || _.isNull(item)) ?\n        info || {} : this.getTreeNodeHierarchy(item);\n      var actionType = type in opURL ? opURL[type] : type;\n      var itemID = with_id && d._type == self.type ? encodeURIComponent(d._id) : '';\n\n      if (self.parent_type) {\n        if (_.isString(self.parent_type)) {\n          var p = treeInfo[self.parent_type];\n          if (p) {\n            priority = p.priority;\n          }\n        } else {\n          _.each(self.parent_type, function(o) {\n            var p = treeInfo[o];\n            if (p) {\n              if (priority < p.priority) {\n                priority = p.priority;\n              }\n            }\n          });\n        }\n      }\n      var nodePickFunction = function (treeInfoValue) {\n        return (treeInfoValue.priority <= priority);\n      };\n      return generateUrl.generate_url(pgBrowser.URL, treeInfo, actionType, self.type, nodePickFunction, itemID);\n    },\n    // Base class for Node Data Collection\n    Collection: pgBrowser.DataCollection,\n    // Base class for Node Data Model\n    Model: pgBrowser.DataModel,\n    getTreeNodeHierarchy: function(i) {\n      var idx = 0,\n          res = {},\n          t = pgBrowser.tree,\n          d;\n      do {\n        d = t.itemData(i);\n        if (d._type in pgBrowser.Nodes && pgBrowser.Nodes[d._type].hasId) {\n          res[d._type] = _.extend({}, d, {\n            'priority': idx\n          });\n          idx -= 1;\n        }\n        i = t.hasParent(i) ? t.parent(i) : null;\n      } while (i);\n\n      return res;\n    },\n    cache: function(url, node_info, level, data) {\n      var cached = this.cached = this.cached || {},\n          hash = url,\n          min_priority = (\n              node_info && node_info[level] && node_info[level].priority\n              ) || 0;\n\n      if (node_info) {\n        _.each(\n            _.sortBy(\n              _.values(\n                _.pick(\n                  node_info,\n                  function(v, k, o) {\n                    return (v.priority <= min_priority);\n                  })),\n              function(o) { return o.priority; }),\n            function(o) {\n              hash = S('%s/%s').sprintf(hash, encodeURI(o._id)).value();\n            });\n      }\n\n      if (_.isUndefined(data)) {\n        var res = cached[hash];\n\n        if (!_.isUndefined(res) &&\n            (res.at - Date.now() > 300000)) {\n          res = undefined;\n        }\n        return res;\n      }\n\n      res = cached[hash] = {data: data, at: Date.now(), level: level};\n\n      return res;\n    },\n    clear_cache: function(item) {\n      /*\n       * Reset the cache, when new node is created.\n       *\n       * FIXME:\n       * At the moment, we will clear all the cache for this node. But - we\n       * would like to clear the cache only this nodes parent, so that - it\n       * fetches the new data.\n       */\n      this.cached = {};\n    },\n    cache_level: function(node_info, with_id) {\n      if (node_info) {\n        if (with_id && this.type in node_info) {\n          return this.type;\n        }\n        if (_.isArray(this.parent_type)) {\n          for (var parent in this.parent_type) {\n            if (parent in node_info) {\n              return parent;\n            }\n          }\n          return this.type;\n        }\n        return this.parent_type;\n      }\n    }\n  });\n\n  return pgAdmin.Browser.Node;\n});\n\n\n\n// WEBPACK FOOTER //\n// pgadmin/browser/static/js/node.js","/***\n * Contains pgAdmin4 related SlickGrid formatters.\n *\n * @module Formatters\n * @namespace Slick\n */\n\n(function ($) {\n  // register namespace\n  $.extend(true, window, {\n    \"Slick\": {\n      \"Formatters\": {\n        \"JsonString\": JsonFormatter,\n        \"Numbers\": NumbersFormatter,\n        \"Checkmark\": CheckmarkFormatter,\n        \"Text\": TextFormatter,\n        \"Binary\": BinaryFormatter,\n        \"JsonStringArray\": JsonArrayFormatter,\n        \"NumbersArray\": NumbersArrayFormatter,\n        \"TextArray\": TextArrayFormatter,\n      }\n    }\n  });\n\n  function NullAndDefaultFormatter(row, cell, value, columnDef, dataContext) {\n    if (_.isUndefined(value) && columnDef.has_default_val) {\n        return \"<span class='pull-left disabled_cell'>[default]</span>\";\n    }\n    else if (\n      (_.isUndefined(value) && columnDef.not_null) ||\n      (_.isUndefined(value) || value === null)\n    ) {\n      return \"<span class='pull-left disabled_cell'>[null]</span>\";\n    }\n    return null;\n  }\n\n  function NullAndDefaultNumberFormatter(row, cell, value, columnDef, dataContext) {\n    if (_.isUndefined(value) && columnDef.has_default_val) {\n        return \"<span class='pull-right disabled_cell'>[default]</span>\";\n    }\n    else if (\n      (_.isUndefined(value) && columnDef.not_null) ||\n      (_.isUndefined(value) || value === null)\n    ) {\n      return \"<span class='pull-right disabled_cell'>[null]</span>\";\n    }\n    return null;\n  }\n\n  function JsonFormatter(row, cell, value, columnDef, dataContext) {\n    // If column has default value, set placeholder\n    var data = NullAndDefaultFormatter(row, cell, value, columnDef, dataContext);\n    if (data) {\n      return data;\n    } else {\n      // Stringify only if it's json object\n      if (typeof value === \"object\" && !Array.isArray(value)) {\n        return _.escape(JSON.stringify(value));\n      } else if (Array.isArray(value)) {\n        var temp = [];\n        $.each(value, function(i, val) {\n          if (typeof val === \"object\") {\n            temp.push(JSON.stringify(val));\n          } else {\n            temp.push(val)\n          }\n        });\n        return _.escape(\"[\" + temp.join() + \"]\")\n      } else {\n        return _.escape(value);\n      }\n    }\n  }\n\n  function JsonArrayFormatter(row, cell, value, columnDef, dataContext) {\n    // If column has default value, set placeholder\n    var data = NullAndDefaultFormatter(row, cell, value, columnDef, dataContext);\n    if (data) {\n      return data;\n    } else {\n      var data = [];\n      for (var k in value) {\n        // Stringify only if it's json object\n        var v = value[k];\n        if (typeof v === \"object\" && !Array.isArray(v)) {\n          return data.push(_.escape(JSON.stringify(v)));\n        } else if (Array.isArray(v)) {\n          var temp = [];\n          $.each(v, function(i, val) {\n            if (typeof val === \"object\") {\n              temp.push(JSON.stringify(val));\n            } else {\n              temp.push(val)\n            }\n          });\n          return data.push(_.escape(\"[\" + temp.join() + \"]\"));\n        } else {\n          return data.push(_.escape(v));\n        }\n      }\n      return '{' + data.join() + '}';\n    }\n  }\n\n  function NumbersFormatter(row, cell, value, columnDef, dataContext) {\n    // If column has default value, set placeholder\n    var data = NullAndDefaultNumberFormatter(row, cell, value, columnDef, dataContext);\n    if (data) {\n      return data;\n    } else {\n      return \"<span style='float:right'>\" + _.escape(value) + \"</span>\";\n    }\n  }\n\n  function NumbersArrayFormatter(row, cell, value, columnDef, dataContext) {\n    // If column has default value, set placeholder\n    var data = NullAndDefaultNumberFormatter(row, cell, value, columnDef, dataContext);\n    if (data) {\n      return data;\n    } else {\n      data = [];\n      for(var k in value) {\n        if (value[k] == null) {\n          data.push(\"<span class='disabled_cell'>[null]</span>\");\n        } else {\n          data.push(_.escape(value[k]));\n        }\n      }\n      return \"<span style='float:right'>{\" + data.join() + \"}</span>\";\n    }\n  }\n\n  function CheckmarkFormatter(row, cell, value, columnDef, dataContext) {\n    /* Checkbox has 3 states\n     * 1) checked=true\n     * 2) unchecked=false\n     * 3) indeterminate=null\n     */\n    var data = NullAndDefaultFormatter(row, cell, value, columnDef, dataContext);\n    if (data) {\n      return data;\n    } else {\n      return value ? \"true\" : \"false\";\n    }\n  }\n\n  function TextFormatter(row, cell, value, columnDef, dataContext) {\n    // If column has default value, set placeholder\n    var data = NullAndDefaultFormatter(row, cell, value, columnDef, dataContext);\n    if (data) {\n      return data;\n    } else {\n      return _.escape(value);\n    }\n  }\n\n  function TextArrayFormatter(row, cell, value, columnDef, dataContext) {\n    // If column has default value, set placeholder\n    var data = NullAndDefaultFormatter(row, cell, value, columnDef, dataContext);\n    if (data) {\n      return data;\n    } else {\n      data = [];\n      for(var k in value) {\n        if (value[k] === null) {\n          data.push(\"<span class='disabled_cell'>[null]</span>\");\n        } else {\n          data.push(_.escape(value[k]));\n        }\n      }\n      return \"{\" + data.join() + \"}\";\n    }\n  }\n\n  function BinaryFormatter(row, cell, value, columnDef, dataContext) {\n    // If column has default value, set placeholder\n    var data = NullAndDefaultFormatter(row, cell, value, columnDef, dataContext);\n    if (data) {\n      return data;\n    } else {\n      return \"<span class='pull-left disabled_cell'>[\" + _.escape(value) + \"]</span>\";\n    }\n  }\n})(jQuery);\n\n\n\n// WEBPACK FOOTER //\n// pgadmin/static/js/slickgrid/formatters.js","/***\n * Contains JSON SlickGrid editors.\n * @module Editors\n * @namespace Slick\n */\n\n(function ($) {\n  // register namespace\n  $.extend(true, window, {\n    \"Slick\": {\n      \"Editors\": {\n        \"pgText\": pgTextEditor,\n        \"JsonText\": JsonTextEditor,\n        \"CustomNumber\": CustomNumberEditor,\n        // Below editor will read only editors, Just to display data\n        \"ReadOnlyText\": ReadOnlyTextEditor,\n        \"ReadOnlyCheckbox\": ReadOnlyCheckboxEditor,\n        \"Checkbox\": CheckboxEditor, // Override editor to implement checkbox with three states\n        \"ReadOnlypgText\": ReadOnlypgTextEditor,\n        \"ReadOnlyJsonText\": ReadOnlyJsonTextEditor\n      }\n    }\n  });\n\n  // return wrapper element\n  function getWrapper() {\n    return $(\"<div class='pg_text_editor' />\");\n  }\n\n  // return textarea element\n  function getTextArea() {\n    return $(\"<textarea class='pg_textarea text-12' hidefocus rows=5'>\");\n  }\n\n  // Generate and return editor buttons\n  function getButtons(editable) {\n    var $buttons = $(\"<div class='pg_buttons' />\"),\n      label = editable ? 'Cancel': 'OK',\n      button_type = editable ? 'btn-danger' : 'btn-primary';\n\n    if (editable) {\n      var $save_button = $(\"<button class='btn btn-primary fa fa-lg fa-save long_text_editor pg-alertify-button'>Save</button>\")\n          .appendTo($buttons);\n    }\n\n    var $cancel_button = $(\"<button class='btn \" + button_type + \" fa fa-lg fa-times long_text_editor pg-alertify-button'>\"+ label +\"</button>\")\n        .appendTo($buttons);\n    return $buttons;\n  }\n\n  function is_valid_array(val) {\n    val = $.trim(val)\n    return !(val != \"\" && (val.charAt(0) != '{' || val.charAt(val.length - 1) != '}'));\n  }\n  /*\n   * This function handles the [default] and [null] values for cells\n   * if row is copied, otherwise returns the editor value.\n   * @param {args} editor object\n   * @param {item} row cell values\n   * @param {state} entered value\n   * @param {column_type} type of column\n   */\n  function setValue(args, item, state, column_type) {\n    // declare a 2-d array which tracks the status of each updated cell\n    // If a cell is edited for the 1st time and state is null,\n    // set cell value to [default] and update its status [row][cell] to 1.\n    // If same cell is edited again, and kept blank, set cell value to [null]\n\n    // If a row is copied\n    var grid = args.grid;\n    if (item.is_row_copied) {\n      if (!grid.copied_rows) {\n        grid.copied_rows = [[]];\n      }\n\n      var active_cell = grid.getActiveCell(),\n          row = active_cell['row'],\n          cell = active_cell['cell'],\n          last_value = item[args.column.pos],\n          last_value = (column_type === 'number') ?\n                        (_.isEmpty(last_value) || last_value) : last_value;\n\n      item[args.column.field] = state;\n      if (last_value && _.isNull(state) &&\n          (_.isUndefined(grid.copied_rows[row]) ||\n          _.isUndefined(grid.copied_rows[row][cell]))\n      ) {\n        item[args.column.field] = undefined;\n        if (grid.copied_rows[row] == undefined) grid.copied_rows[row] = [];\n        grid.copied_rows[row][cell] = 1;\n      }\n    }\n    else {\n      item[args.column.field] = state;\n    }\n  }\n\n  function calculateEditorPosition(position, $wrapper) {\n    var $edit_grid = $wrapper.parent().find('#datagrid');\n    var _elem_height = $edit_grid.height(),\n      is_hidden, _position;\n    // We cannot display editor partially visible so we will lift it above select column\n    if(position.top > _elem_height) {\n      is_hidden = position.bottom - _elem_height;\n    }\n\n    if(is_hidden) {\n      _position = position.top - is_hidden;\n    } else {\n      _position = position.top-7;\n    }\n    position.top = _position;\n\n    var grid_width = $edit_grid.width(),\n      popup_width = $wrapper.width() + 32;\n    popup_width += position.left;\n\n    if(popup_width > grid_width) {\n      position.left -= (popup_width - grid_width);\n    }\n    return position;\n  }\n\n  // Text data type editor\n  function pgTextEditor(args) {\n    var $input, $wrapper, $buttons;\n    var defaultValue;\n    var scope = this;\n\n    this.init = function () {\n      var $container = $(\"body\");\n\n      $wrapper = getWrapper().appendTo($container);\n      $input = getTextArea().appendTo($wrapper);\n      $buttons = getButtons(true).appendTo($wrapper);\n\n      $buttons.find(\"button:first\").on(\"click\", this.save);\n      $buttons.find(\"button:last\").on(\"click\", this.cancel);\n      $input.bind(\"keydown\", this.handleKeyDown);\n\n      scope.position(args.position);\n      $input.focus().select();\n    };\n\n    this.handleKeyDown = function (e) {\n      if (e.which == $.ui.keyCode.ENTER && e.ctrlKey) {\n        scope.save();\n      } else if (e.which == $.ui.keyCode.ESCAPE) {\n        e.preventDefault();\n        scope.cancel();\n      } else if (e.which == $.ui.keyCode.TAB && e.shiftKey) {\n        e.preventDefault();\n        args.grid.navigatePrev();\n      } else if (e.which == $.ui.keyCode.TAB) {\n        e.preventDefault();\n        args.grid.navigateNext();\n      }\n    };\n\n    this.save = function () {\n      args.commitChanges();\n    };\n\n    this.cancel = function () {\n      $input.val(defaultValue);\n      args.cancelChanges();\n    };\n\n    this.hide = function () {\n      $wrapper.hide();\n    };\n\n    this.show = function () {\n      $wrapper.show();\n    };\n\n    this.position = function (position) {\n      calculateEditorPosition(position, $wrapper);\n      $wrapper\n        .css(\"top\", position.top)\n        .css(\"left\", position.left)\n    }\n\n    this.destroy = function () {\n      $wrapper.remove();\n    };\n\n    this.focus = function () {\n      $input.focus();\n    };\n\n    // When text editor opens\n    this.loadValue = function (item) {\n      var col = args.column;\n\n      if (_.isUndefined(item[args.column.field]) || _.isNull(item[args.column.field])) {\n          $input.val(defaultValue = \"\");\n          return;\n      }\n\n      if (!args.column.is_array) {\n        if (item[args.column.field] === \"\") {\n          $input.val(defaultValue = \"''\");\n        } else if (item[args.column.field] === \"''\") {\n          $input.val(defaultValue = \"\\\\'\\\\'\");\n        } else if (item[args.column.field] === '\"\"') {\n          $input.val(defaultValue = '\\\\\"\\\\\"');\n        } else {\n          $input.val(defaultValue = item[args.column.field]);\n          $input.select();\n        }\n      } else {\n        var data = [];\n        for (var k in item[args.column.field]) {\n          if (_.isUndefined(item[args.column.field][k]) || _.isNull(item[args.column.field][k])) {\n            data.push('');\n          } else if (item[args.column.field][k] === \"\") {\n            data.push(\"''\");\n          } else if (item[args.column.field][k] === \"''\") {\n            data.push(\"\\\\'\\\\'\");\n          } else if (item[args.column.field][k] === '\"\"') {\n            data.push('\\\\\"\\\\\"');\n          } else {\n            data.push(item[args.column.field][k]);\n            $input.select();\n          }\n        }\n        defaultValue = data;\n        $input.val('{' + data.join() +'}');\n\n      }\n    };\n\n    this.serializeValue = function () {\n      var value = $input.val();\n      // If empty return null\n      if (value === \"\") {\n        return null;\n      }\n\n      if (!args.column.is_array) {\n        if (value === \"''\" || value === '\"\"') {\n          return '';\n        } else if (value === \"\\\\'\\\\'\") {\n          return \"''\";\n        } else if (value === '\\\\\"\\\\\"') {\n          return '\"\"';\n        } else {\n          return value;\n        }\n      } else {\n\n        // Remove leading { and trailing }.\n        // Also remove leading and trailing whitespaces.\n        var value = $.trim(value.slice(1, -1));\n\n        if(value == '') {\n          return [];\n        }\n\n        var data = [];\n        value = value.split(',');\n        for (var k in value) {\n          if (value[k] == \"\") {\n            data.push(null);  //empty string from editor is null value.\n          } else if (value[k] === \"''\" || value[k] === '\"\"') {\n            data.push('');    // double quote from editor is blank string;\n          } else if (value[k] === \"\\\\'\\\\'\") {\n            data.push(\"''\");\n          } else if (value[k] === '\\\\\"\\\\\"') {\n            data.push('\"\"');\n          } else {\n            data.push(value[k]);\n          }\n        }\n        return data;\n      }\n    };\n\n    this.applyValue = function (item, state) {\n      setValue(args, item, state, 'text');\n    };\n\n    this.isValueChanged = function () {\n      // Use _.isNull(value) for comparison for null instead of\n      // defaultValue == null, because it returns true for undefined value.\n      if ($input.val() == \"\" && _.isUndefined(defaultValue)) {\n        return false;\n      } else {\n        return (!($input.val() == \"\" && _.isNull(defaultValue))) &&\n               ($input.val() !== defaultValue);\n      }\n    };\n\n    this.validate = function () {\n      if (args.column.validator) {\n        var validationResults = args.column.validator($input.val());\n        if (!validationResults.valid) {\n          return validationResults;\n        }\n      }\n\n      if (args.column.is_array && !is_valid_array($input.val())) {\n        return {\n          valid: false,\n          msg: \"Array must start with '{' and end with '}'\"\n        };\n      }\n\n      return {\n        valid: true,\n        msg: null\n      };\n    };\n\n    this.init();\n  }\n\n  // JSON data type editor\n  function JsonTextEditor(args) {\n    var $input, $wrapper, $buttons;\n    var defaultValue;\n    var scope = this;\n\n    this.init = function () {\n      var $container = $(\"body\");\n\n      $wrapper = getWrapper().appendTo($container);\n      $input = getTextArea().appendTo($wrapper);\n      $buttons = getButtons(true).appendTo($wrapper);\n\n      $buttons.find(\"button:first\").on(\"click\", this.save);\n      $buttons.find(\"button:last\").on(\"click\", this.cancel);\n      $input.bind(\"keydown\", this.handleKeyDown);\n\n      scope.position(args.position);\n      $input.focus().select();\n    };\n\n    this.handleKeyDown = function (e) {\n      if (e.which == $.ui.keyCode.ENTER && e.ctrlKey) {\n        scope.save();\n      } else if (e.which == $.ui.keyCode.ESCAPE) {\n        e.preventDefault();\n        scope.cancel();\n      } else if (e.which == $.ui.keyCode.TAB && e.shiftKey) {\n        e.preventDefault();\n        args.grid.navigatePrev();\n      } else if (e.which == $.ui.keyCode.TAB) {\n        e.preventDefault();\n        args.grid.navigateNext();\n      }\n    };\n\n    this.save = function () {\n      args.commitChanges();\n    };\n\n    this.cancel = function () {\n      $input.val(defaultValue);\n      args.cancelChanges();\n    };\n\n    this.hide = function () {\n      $wrapper.hide();\n    };\n\n    this.show = function () {\n      $wrapper.show();\n    };\n\n    this.position = function (position) {\n      calculateEditorPosition(position, $wrapper);\n      $wrapper\n        .css(\"top\", position.top)\n        .css(\"left\", position.left)\n    }\n\n    this.destroy = function () {\n      $wrapper.remove();\n    };\n\n    this.focus = function () {\n      $input.focus();\n    };\n\n    this.loadValue = function (item) {\n      var data = defaultValue = item[args.column.field];\n      if (data && typeof data === \"object\" && !Array.isArray(data)) {\n        data = JSON.stringify(data);\n      } else if (Array.isArray(data)) {\n        var temp = [];\n        $.each(data, function(i, val) {\n          if (typeof val === \"object\") {\n            temp.push(JSON.stringify(val));\n          } else {\n            temp.push(val)\n          }\n        });\n        data = \"[\" + temp.join() + \"]\";\n      }\n      $input.val(data);\n      $input.select();\n    };\n\n    this.serializeValue = function () {\n      if ($input.val() === \"\") {\n        return null;\n      }\n      return $input.val();\n    };\n\n    this.applyValue = function (item, state) {\n      setValue(args, item, state, 'text');\n    };\n\n    this.isValueChanged = function () {\n      if ($input.val() == \"\" && _.isUndefined(defaultValue)) {\n        return false;\n      } else {\n        return (!($input.val() == \"\" && _.isNull(defaultValue))) && ($input.val() != defaultValue);\n      }\n    };\n\n    this.validate = function () {\n      if (args.column.validator) {\n        var validationResults = args.column.validator($input.val());\n        if (!validationResults.valid) {\n          return validationResults;\n        }\n      }\n\n      return {\n        valid: true,\n        msg: null\n      };\n    };\n\n    this.init();\n  }\n\n  // Text data type editor\n  function ReadOnlypgTextEditor(args) {\n    var $input, $wrapper, $buttons;\n    var defaultValue;\n    var scope = this;\n\n    this.init = function () {\n      var $container = $(\"body\");\n\n      $wrapper = getWrapper().appendTo($container);\n      $input = getTextArea().appendTo($wrapper);\n      $buttons = getButtons(false).appendTo($wrapper);\n\n      $buttons.find(\"button:first\").on(\"click\", this.cancel);\n      $input.bind(\"keydown\", this.handleKeyDown);\n\n      scope.position(args.position);\n      $input.focus().select();\n    };\n\n    this.handleKeyDown = function (e) {\n      if (e.which == $.ui.keyCode.ENTER && e.ctrlKey) {\n        scope.cancel();\n      } else if (e.which == $.ui.keyCode.ESCAPE) {\n        e.preventDefault();\n        scope.cancel();\n      } else if (e.which == $.ui.keyCode.TAB && e.shiftKey) {\n        scope.cancel();\n        e.preventDefault();\n        args.grid.navigatePrev();\n      } else if (e.which == $.ui.keyCode.TAB) {\n        scope.cancel();\n        e.preventDefault();\n        args.grid.navigateNext();\n      }\n    };\n\n    this.cancel = function () {\n      $input.val(defaultValue);\n      args.cancelChanges();\n    };\n\n    this.hide = function () {\n      $wrapper.hide();\n    };\n\n    this.show = function () {\n      $wrapper.show();\n    };\n\n    this.position = function (position) {\n      calculateEditorPosition(position, $wrapper);\n      $wrapper\n        .css(\"top\", position.top)\n        .css(\"left\", position.left)\n    }\n\n    this.destroy = function () {\n      $wrapper.remove();\n    };\n\n    this.focus = function () {\n      $input.focus();\n    };\n\n    this.loadValue = function (item) {\n      $input.val(defaultValue = item[args.column.field]);\n      $input.select();\n    };\n\n    this.serializeValue = function () {\n      return $input.val();\n    };\n\n    this.applyValue = function (item, state) {\n      item[args.column.field] = state;\n    };\n\n    this.isValueChanged = function () {\n      return (!($input.val() == \"\" && defaultValue == null)) && ($input.val() != defaultValue);\n    };\n\n    this.validate = function () {\n      if (args.column.validator) {\n        var validationResults = args.column.validator($input.val());\n        if (!validationResults.valid) {\n          return validationResults;\n        }\n      }\n\n      return {\n        valid: true,\n        msg: null\n      };\n    };\n\n    this.init();\n  }\n\n  /* Override CheckboxEditor to implement checkbox with three states.\n   * 1) checked=true\n   * 2) unchecked=false\n   * 3) indeterminate=null\n   */\n  function CheckboxEditor(args) {\n    var $select, el;\n    var defaultValue;\n    var scope = this;\n\n    this.init = function () {\n      $select = $(\"<input type=checkbox class='editor-checkbox' hideFocus>\");\n      $select.appendTo(args.container);\n      $select.focus();\n\n      // The following code is taken from https://css-tricks.com/indeterminate-checkboxes/\n      $select.bind(\"click\", function (e) {\n        el = $(this);\n        el.prop('indeterminate', false);\n\n        var checkbox_status = el.data('checked');\n        // add new row > checkbox clicked\n        if (el.data('checked') == undefined) {\n          checkbox_status = 1;\n        }\n        switch(checkbox_status) {\n          // unchecked, going indeterminate\n          case 0:\n            el.prop('indeterminate', true);\n            el.data('checked', 2); // determines next checkbox status\n            break;\n\n          // indeterminate, going checked\n          case 1:\n            el.prop('checked', true);\n            el.data('checked', 0);\n            break;\n\n          // checked, going unchecked\n          default:\n            el.prop('checked', false);\n            el.data('checked', 1);\n        }\n      });\n    };\n\n    this.destroy = function () {\n      $select.remove();\n    };\n\n    this.focus = function () {\n      $select.focus();\n    };\n\n    this.loadValue = function (item) {\n      defaultValue = item[args.column.field];\n      if (_.isNull(defaultValue)||_.isUndefined(defaultValue)) {\n        $select.prop('indeterminate', true);\n        $select.data('checked', 2);\n      }\n      else {\n        defaultValue = !!item[args.column.field];\n        if (defaultValue) {\n          $select.prop('checked', true);\n          $select.data('checked', 0);\n        } else {\n          $select.prop('checked', false);\n          $select.data('checked', 1);\n        }\n      }\n    };\n\n    this.serializeValue = function () {\n      if ($select.prop('indeterminate')) {\n        return null;\n      }\n      return $select.prop('checked');\n    };\n\n    this.applyValue = function (item, state) {\n      item[args.column.field] = state;\n    };\n\n    this.isValueChanged = function () {\n      // var select_value = this.serializeValue();\n      var select_value = $select.data('checked');\n      return (!(select_value === 2 && (defaultValue == null || defaultValue == undefined))) &&\n            (select_value !== defaultValue);\n    };\n\n    this.validate = function () {\n      if (args.column.validator) {\n        var validationResults = args.column.validator(this.serializeValue());\n        if (!validationResults.valid) {\n          return validationResults;\n        }\n      }\n      return {\n        valid: true,\n        msg: null\n      };\n    };\n\n    this.init();\n  }\n\n  // JSON data type editor\n  function ReadOnlyJsonTextEditor(args) {\n    var $input, $wrapper, $buttons;\n    var defaultValue;\n    var scope = this;\n\n    this.init = function () {\n      var $container = $(\"body\");\n\n      $wrapper = getWrapper().appendTo($container);\n      $input = getTextArea().appendTo($wrapper);\n      $buttons = getButtons(false).appendTo($wrapper);\n\n      $buttons.find(\"button:first\").on(\"click\", this.cancel);\n      $input.bind(\"keydown\", this.handleKeyDown);\n\n      scope.position(args.position);\n      $input.focus().select();\n    };\n\n    this.handleKeyDown = function (e) {\n      if (e.which == $.ui.keyCode.ENTER && e.ctrlKey) {\n        scope.cancel();\n      } else if (e.which == $.ui.keyCode.ESCAPE) {\n        e.preventDefault();\n        scope.cancel();\n      } else if (e.which == $.ui.keyCode.TAB && e.shiftKey) {\n        scope.cancel();\n        e.preventDefault();\n        args.grid.navigatePrev();\n      } else if (e.which == $.ui.keyCode.TAB) {\n        scope.cancel();\n        e.preventDefault();\n        args.grid.navigateNext();\n      }\n    };\n\n    this.cancel = function () {\n      $input.val(defaultValue);\n      args.cancelChanges();\n    };\n\n    this.hide = function () {\n      $wrapper.hide();\n    };\n\n    this.show = function () {\n      $wrapper.show();\n    };\n\n    this.position = function (position) {\n      calculateEditorPosition(position, $wrapper);\n      $wrapper\n        .css(\"top\", position.top)\n        .css(\"left\", position.left)\n    }\n\n    this.destroy = function () {\n      $wrapper.remove();\n    };\n\n    this.focus = function () {\n      $input.focus();\n    };\n\n    this.loadValue = function (item) {\n      var data = defaultValue = item[args.column.field];\n      if (typeof data === \"object\" && !Array.isArray(data)) {\n        data = JSON.stringify(data);\n      } else if (Array.isArray(data)) {\n        var temp = [];\n        $.each(data, function(i, val) {\n          if (typeof val === \"object\") {\n            temp.push(JSON.stringify(val));\n          } else {\n            temp.push(val)\n          }\n        });\n        data = \"[\" + temp.join() + \"]\";\n      }\n      $input.val(data);\n      $input.select();\n    };\n\n    this.serializeValue = function () {\n      return $input.val();\n    };\n\n    this.applyValue = function (item, state) {\n      item[args.column.field] = state;\n    };\n\n    this.isValueChanged = function () {\n      return (!($input.val() == \"\" && defaultValue == null)) && ($input.val() != defaultValue);\n    };\n\n    this.validate = function () {\n      if (args.column.validator) {\n        var validationResults = args.column.validator($input.val());\n        if (!validationResults.valid) {\n          return validationResults;\n        }\n      }\n\n      return {\n        valid: true,\n        msg: null\n      };\n    };\n\n    this.init();\n  }\n\n  function ReadOnlyTextEditor(args) {\n    var $input;\n    var defaultValue;\n    var scope = this;\n\n    this.init = function () {\n      $input = $(\"<INPUT type=text class='editor-text' readonly/>\")\n          .appendTo(args.container)\n          .bind(\"keydown.nav\", function (e) {\n            if (e.keyCode === $.ui.keyCode.LEFT || e.keyCode === $.ui.keyCode.RIGHT) {\n              e.stopImmediatePropagation();\n            }\n          })\n          .focus()\n          .select();\n    };\n\n    this.destroy = function () {\n      $input.remove();\n    };\n\n    this.focus = function () {\n      $input.focus();\n    };\n\n    this.getValue = function () {\n      return $input.val();\n    };\n\n    this.loadValue = function (item) {\n      var value = item[args.column.field];\n\n      // Check if value is null or undefined\n      if (value === undefined && typeof value === \"undefined\") {\n        value = \"\"\n      }\n      defaultValue = value;\n      $input.val(defaultValue);\n      $input[0].defaultValue = defaultValue;\n      $input.select();\n    };\n\n    this.serializeValue = function () {\n      return $input.val();\n    };\n\n    this.applyValue = function (item, state) {\n      item[args.column.field] = state;\n    };\n\n    this.isValueChanged = function () {\n      return (!($input.val() == \"\" && defaultValue == null)) && ($input.val() != defaultValue);\n    };\n\n    this.validate = function () {\n      if (args.column.validator) {\n        var validationResults = args.column.validator($input.val());\n        if (!validationResults.valid) {\n          return validationResults;\n        }\n      }\n\n      return {\n        valid: true,\n        msg: null\n      };\n    };\n\n    this.init();\n  }\n\n  function ReadOnlyCheckboxEditor(args) {\n    var $select, el;\n    var defaultValue;\n    var scope = this;\n\n    this.init = function () {\n      $select = $(\"<INPUT type=checkbox value='true' class='editor-checkbox' hideFocus disabled>\");\n      $select.appendTo(args.container);\n      $select.focus();\n    };\n\n    this.destroy = function () {\n      $select.remove();\n    };\n\n    this.focus = function () {\n      $select.focus();\n    };\n\n    this.loadValue = function (item) {\n      defaultValue = item[args.column.pos];\n      if (_.isNull(defaultValue)|| _.isUndefined(defaultValue)) {\n        $select.prop('indeterminate', true);\n        $select.data('checked', 2);\n      }\n      else {\n        defaultValue = !!item[args.column.pos];\n        if (defaultValue) {\n          $select.prop('checked', true);\n          $select.data('checked', 0);\n        } else {\n          $select.prop('checked', false);\n          $select.data('checked', 1);\n        }\n      }\n    };\n\n    this.serializeValue = function () {\n      if ($select.prop('indeterminate')) {\n        return null;\n      }\n      return $select.prop('checked');\n    };\n\n    this.applyValue = function (item, state) {\n      item[args.column.pos] = state;\n    };\n\n    this.isValueChanged = function () {\n      // var select_value = this.serializeValue();\n      var select_value = $select.data('checked');\n      return (!(select_value === 2 && (defaultValue == null || defaultValue == undefined))) &&\n            (select_value !== defaultValue);\n    };\n\n    this.validate = function () {\n      return {\n        valid: true,\n        msg: null\n      };\n    };\n\n    this.init();\n  }\n\n  function CustomNumberEditor(args) {\n    var $input;\n    var defaultValue;\n    var scope = this;\n\n    this.init = function () {\n      $input = $(\"<INPUT type=text class='editor-text' />\");\n\n      $input.bind(\"keydown.nav\", function (e) {\n        if (e.keyCode === $.ui.keyCode.LEFT || e.keyCode === $.ui.keyCode.RIGHT) {\n          e.stopImmediatePropagation();\n        }\n      });\n\n      $input.appendTo(args.container);\n      $input.focus().select();\n    };\n\n    this.destroy = function () {\n      $input.remove();\n    };\n\n    this.focus = function () {\n      $input.focus();\n    };\n\n    this.loadValue = function (item) {\n      defaultValue = item[args.column.field];\n\n      if(args.column.is_array && !_.isNull(defaultValue) && !_.isUndefined(defaultValue)) {\n        $input.val('{' + defaultValue.join() +'}');\n      } else {\n        $input.val(defaultValue);\n      }\n\n      $input[0].defaultValue = defaultValue;\n      $input.select();\n    };\n\n    this.serializeValue = function () {\n      if ($input.val() === \"\") {\n        return null;\n      }\n\n      if(args.column.is_array) {\n        // Remove leading { and trailing }.\n        // Also remove leading and trailing whitespaces.\n        var val = $.trim($input.val().slice(1, -1));\n\n        if(val == '') {\n          return [];\n        }\n        val = val.split(',');\n        for (var k in val) {\n          if (val[k] == \"\") {\n            val[k] = null;  //empty string from editor is null value.\n          }\n        }\n        return val;\n      }\n\n      return $input.val();\n    };\n\n    this.applyValue = function (item, state) {\n      setValue(args, item, state, 'number');\n    };\n\n    this.isValueChanged = function () {\n      if ($input.val() == \"\" && _.isUndefined(defaultValue)) {\n        return false;\n      } else if ($input.val() == \"\" && defaultValue == \"\") {\n        return true;\n      } else {\n        return (!($input.val() == \"\" && _.isNull(defaultValue ))) &&\n        ($input.val() != defaultValue);\n      }\n    };\n\n    this.validate = function () {\n      var value = $input.val();\n      if (!args.column.is_array && isNaN(value)) {\n        return {\n          valid: false,\n          msg: \"Please enter a valid number\"\n        };\n      }\n      if (args.column.validator) {\n        var validationResults = args.column.validator(value);\n        if (!validationResults.valid) {\n          return validationResults;\n        }\n      }\n\n      if (args.column.is_array) {\n        if (!is_valid_array(value)) {\n          return {\n            valid: false,\n            msg: \"Array must start with '{' and end with '}'\"\n          };\n        }\n\n        var val = $.trim(value.slice(1, -1)),\n            arr;\n\n        if(val == '') {\n          arr = [];\n        } else {\n          var arr = val.split(',');\n        }\n\n        for (var k in arr) {\n          if (isNaN(arr[k])) {\n            return {\n              valid: false,\n              msg: \"Please enter a valid numbers\"\n            };\n          }\n        }\n      }\n\n      return {\n        valid: true,\n        msg: null\n      };\n    };\n\n    this.init();\n  }\n\n})(jQuery);\n\n\n\n// WEBPACK FOOTER //\n// pgadmin/static/js/slickgrid/editors.js","define([\n  'sources/gettext', 'jquery', 'underscore', 'sources/pgadmin', 'backbone', 'backform',\n   'alertify', 'backgrid', 'select2', 'pgadmin.browser.node'\n],\nfunction(gettext, $, _, pgAdmin, Backbone, Backform, Alertify, Backgrid) {\n\n  var pgBrowser = pgAdmin.Browser;\n\n  /*\n   * Define the selectAll adapter for select2.\n   *\n   * Reference:\n   * https://github.com/select2/select2/issues/195#issuecomment-240130634\n   */\n  $.fn.select2.amd.define('select2/selectAllAdapter', [\n    'select2/utils',\n    'select2/dropdown',\n    'select2/dropdown/attachBody'\n  ], function (Utils, Dropdown, AttachBody) {\n\n    function SelectAll() { }\n    SelectAll.prototype.render = function (decorated) {\n      var self = this,\n        $rendered = decorated.call(this),\n        $selectAll = $([\n          '<button class=\"btn btn-xs btn-default\" type=\"button\"',\n          ' style=\"width: 49%;margin: 0 0.5%;\">',\n          '<i class=\"fa fa-check-square-o\"></i>',\n          '<span style=\"padding: 0px 5px;\">',\n          gettext(\"Select All\"),\n          '</span></button>'\n        ].join('')),\n        $unselectAll = $([\n          '<button class=\"btn btn-xs btn-default\" type=\"button\"',\n          ' style=\"width: 49%;margin: 0 0.5%;\">',\n          '<i class=\"fa fa-square-o\"></i><span style=\"padding: 0px 5px;\">',\n          gettext(\"Unselect All\"),\n          '</span></button>'\n        ].join('')),\n        $btnContainer = $(\n          '<div style=\"padding: 3px 0px; background-color: #2C76B4; margin-bottom: 3px;\">'\n        ).append($selectAll).append($unselectAll);\n\n      if (!this.$element.prop(\"multiple\")) {\n        // this isn't a multi-select -> don't add the buttons!\n        return $rendered;\n      }\n      $rendered.find('.select2-dropdown').prepend($btnContainer);\n      $selectAll.on('click', function (e) {\n        var $results = $rendered.find('.select2-results__option[aria-selected=false]');\n        $results.each(function () {\n          self.trigger('select', {\n            data: $(this).data('data')\n          });\n        });\n        self.trigger('close');\n      });\n      $unselectAll.on('click', function (e) {\n        var $results = $rendered.find('.select2-results__option[aria-selected=true]');\n        $results.each(function () {\n          self.trigger('unselect', {\n            data: $(this).data('data')\n          });\n        });\n        self.trigger('close');\n      });\n      return $rendered;\n    };\n\n    return Utils.Decorate(\n      Utils.Decorate(\n        Dropdown,\n        AttachBody\n      ),\n      SelectAll\n    );\n  });\n\n  /*\n   * NodeAjaxOptionsControl\n   *   This control will fetch the options required to render the select\n   *   control, from the url specific to the pgAdmin.Browser node object.\n   *\n   *   In order to use this properly, schema require to set the 'url' property,\n   *   which exposes the data for this node.\n   *\n   *   In case the url is not providing the data in proper format, we can\n   *   specify the 'transform' function too, which will convert the fetched\n   *   data to proper 'label', 'value' format.\n   */\n  var NodeAjaxOptionsControl = Backform.NodeAjaxOptionsControl =\n      Backform.Select2Control.extend({\n    defaults: _.extend(Backform.Select2Control.prototype.defaults, {\n      url: undefined,\n      transform: undefined,\n      url_with_id: false,\n      select2: {\n        allowClear: true,\n        placeholder: 'Select from the list',\n        width: 'style'\n      }\n    }),\n    initialize: function() {\n      /*\n       * Initialization from the original control.\n       */\n      Backform.Select2Control.prototype.initialize.apply(this, arguments);\n\n      /*\n       * We're about to fetch the options required for this control.\n       */\n      var self = this,\n          url = self.field.get('url') || self.defaults.url,\n          m = self.model.top || self.model;\n\n      // Hmm - we found the url option.\n      // That means - we needs to fetch the options from that node.\n      if (url) {\n        var node = this.field.get('schema_node'),\n            node_info = this.field.get('node_info'),\n            with_id = this.field.get('url_with_id') || false,\n            full_url = node.generate_url.apply(\n              node, [\n                null, url, this.field.get('node_data'), with_id, node_info\n              ]),\n            cache_level,\n            cache_node = this.field.get('cache_node');\n\n        cache_node = (cache_node && pgAdmin.Browser.Nodes[cache_node]) || node;\n\n        if (this.field.has('cache_level')) {\n          cache_level = this.field.get('cache_level');\n        } else {\n          cache_level = cache_node.cache_level(node_info, with_id);\n        }\n\n        /*\n         * We needs to check, if we have already cached data for this url.\n         * If yes - use that, and do not bother about fetching it again,\n         * and use it.\n         */\n        var data = cache_node.cache(node.type + '#' + url, node_info, cache_level);\n\n        if (this.field.get('version_compatible') &&\n            (_.isUndefined(data) || _.isNull(data))) {\n          m.trigger('pgadmin:view:fetching', m, self.field);\n          $.ajax({\n            async: false,\n            url: full_url,\n            success: function(res) {\n              /*\n               * We will cache this data for short period of time for avoiding\n               * same calls.\n               */\n              data = cache_node.cache(node.type + '#' + url, node_info, cache_level, res.data);\n            },\n            error: function() {\n              m.trigger('pgadmin:view:fetch:error', m, self.field);\n            }\n          });\n          m.trigger('pgadmin:view:fetched', m, self.field);\n        }\n        // To fetch only options from cache, we do not need time from 'at'\n        // attribute but only options.\n        //\n        // It is feasible that the data may not have been fetched.\n        data = (data && data.data) || [];\n\n        /*\n         * Transform the data\n         */\n        var transform = this.field.get('transform') || self.defaults.transform;\n        if (transform && _.isFunction(transform)) {\n          // We will transform the data later, when rendering.\n          // It will allow us to generate different data based on the\n          // dependencies.\n          self.field.set('options', transform.bind(self, data));\n        } else {\n          self.field.set('options', data);\n        }\n      }\n    }\n  });\n\n  var formatNode = function(opt) {\n    if (!opt.id) {\n      return opt.text;\n    }\n\n    var optimage = $(opt.element).data('image');\n\n    if(!optimage){\n      return opt.text;\n    } else {\n      return $('<span></span>').append(\n        $('<span></span>', {class: \"wcTabIcon \" + optimage})\n      ).append(\n        $('<span></span>').text(opt.text)\n      );\n    }\n  };\n\n  var NodeListByIdControl = Backform.NodeListByIdControl = NodeAjaxOptionsControl.extend({\n    controlClassName: 'pgadmin-node-select form-control',\n    defaults: _.extend({}, NodeAjaxOptionsControl.prototype.defaults, {\n      url: 'nodes',\n      filter: undefined,\n      transform: function(rows) {\n        var self = this,\n            node = self.field.get('schema_node'),\n            res = [],\n            filter = self.field.get('filter') || function() { return true; };\n\n        filter = filter.bind(self);\n\n        _.each(rows, function(r) {\n          if (filter(r)) {\n            var l = (_.isFunction(node['node_label']) ?\n                  (node['node_label']).apply(node, [r, self.model, self]) :\n                  r.label),\n                image= (_.isFunction(node['node_image']) ?\n                  (node['node_image']).apply(\n                    node, [r, self.model, self]\n                    ) :\n                  (node['node_image'] || ('icon-' + node.type)));\n\n            res.push({\n              'value': r._id,\n              'image': image,\n              'label': l\n            });\n          }\n        });\n\n        return res;\n      },\n      select2: {\n        allowClear: true,\n        placeholder: 'Select from the list',\n        width: 'style',\n        templateResult: formatNode,\n        templateSelection: formatNode\n      }\n    })\n  });\n\n\n  var NodeListByNameControl = Backform.NodeListByNameControl = NodeListByIdControl.extend({\n    defaults: _.extend({}, NodeListByIdControl.prototype.defaults, {\n      transform: function(rows) {\n        var self = this,\n            node = self.field.get('schema_node'),\n            res = [],\n            filter = self.field.get('filter') || function() { return true; };\n\n        filter = filter.bind(self);\n\n        _.each(rows, function(r) {\n          if (filter(r)) {\n            var l = (_.isFunction(node['node_label']) ?\n                  (node['node_label']).apply(node, [r, self.model, self]) :\n                  r.label),\n                image = (_.isFunction(node['node_image']) ?\n                  (node['node_image']).apply(\n                    node, [r, self.model, self]\n                    ) :\n                  (node['node_image'] || ('icon-' + node.type)));\n            res.push({\n              'value': r.label,\n              'image': image,\n              'label': l\n            });\n          }\n        });\n\n        return res;\n      }\n    })\n  });\n\n  /*\n   * Global function to make visible  particular dom element in it's parent\n   * with given class.\n   */\n  $.fn.pgMakeVisible = function( cls ) {\n    return this.each(function() {\n      if (!this || !$(this.length))\n        return;\n      var top, p = $(this), hasScrollbar = function(j) {\n        if (j && j.length > 0) {\n          return j.get(0).scrollHeight > j.height();\n        }\n        return false;\n      };\n\n      // check if p is not empty\n      while(p && p.length > 0) {\n        top = p.get(0).offsetTop + p.height();\n        p = p.parent();\n        if (hasScrollbar(p)) {\n          p.scrollTop(top);\n        }\n        if (p.hasClass(cls)) //'backform-tab'\n          return;\n      }\n    });\n  };\n\n\n  /*\n   * NodeAjaxOptionsCell\n   *   This cell will fetch the options required to render the select\n   *   cell, from the url specific to the pgAdmin.Browser node object.\n   *\n   *   In order to use this properly, schema require to set the 'url' property,\n   *   which exposes the data for this node.\n   *\n   *   In case the url is not providing the data in proper format, we can\n   *   specify the 'transform' function too, which will convert the fetched\n   *   data to proper 'label', 'value' format.\n   */\n  var NodeAjaxOptionsCell = Backgrid.Extension.NodeAjaxOptionsCell = Backgrid.Extension.Select2Cell.extend({\n    defaults: _.extend({}, Backgrid.Extension.Select2Cell.prototype.defaults, {\n      url: undefined,\n      transform: undefined,\n      url_with_id: false,\n      select2: {\n        allowClear: true,\n        placeholder: 'Select from the list',\n        width: 'style'\n      },\n      opt: {\n        label: null,\n        value: null,\n        image: null,\n        selected: false\n       }\n    }),\n    template: _.template(\n      '<option <% if (image) { %> data-image=<%= image %> <% } %> value=\"<%- value %>\" <%= selected ? \\'selected=\"selected\"\\' : \"\" %>><%- label %></option>'\n    ),\n    initialize: function () {\n      Backgrid.Extension.Select2Cell.prototype.initialize.apply(this, arguments);\n\n      var url = this.column.get('url') || this.defaults.url,\n          options_cached = this.column.get('options_cached');\n\n      // Hmm - we found the url option.\n      // That means - we needs to fetch the options from that node.\n      if (url && !options_cached) {\n\n        var self = this,\n            m = this.model, column = this.column,\n            eventHandler = m.top || m,\n            node = column.get('schema_node'),\n            node_info = column.get('node_info'),\n            with_id = column.get('url_with_id') || false,\n            full_url = node.generate_url.apply(\n              node, [\n                null, url, column.get('node_data'), with_id, node_info\n              ]),\n            cache_level,\n            cache_node = column.get('cache_node');\n\n        cache_node = (cache_node && pgAdmin.Browser.Nodes['cache_node']) || node;\n\n        if (column.has('cache_level')) {\n          cache_level = column.get('cache_level');\n        } else {\n          cache_level = cache_node.cache_level(node_info, with_id);\n        }\n\n        /*\n         * We needs to check, if we have already cached data for this url.\n         * If yes - use that, and do not bother about fetching it again,\n         * and use it.\n         */\n        var data = cache_node.cache(node.type + '#' + url, node_info, cache_level);\n\n        if (column.get('version_compatible') &&\n            (_.isUndefined(data) || _.isNull(data))) {\n          eventHandler.trigger('pgadmin:view:fetching', m, column);\n          $.ajax({\n            async: false,\n            url: full_url,\n            success: function(res) {\n              /*\n               * We will cache this data for short period of time for avoiding\n               * same calls.\n               */\n              data = cache_node.cache(node.type + '#' + url, node_info, cache_level, res.data);\n            },\n            error: function() {\n              eventHandler.trigger('pgadmin:view:fetch:error', m, column);\n            }\n          });\n          eventHandler.trigger('pgadmin:view:fetched', m, column);\n        }\n        // To fetch only options from cache, we do not need time from 'at'\n        // attribute but only options.\n        //\n        // It is feasible that the data may not have been fetched.\n        data = (data && data.data) || [];\n\n        /*\n         * Transform the data\n         */\n        var transform = column.get('transform') || self.defaults.transform;\n        if (transform && _.isFunction(transform)) {\n          // We will transform the data later, when rendering.\n          // It will allow us to generate different data based on the\n          // dependencies.\n          column.set('options', transform.bind(column, data));\n        } else {\n          column.set('options', data);\n        }\n        column.set('options_cached', true);\n      }\n    }\n  });\n\n  var NodeListByIdCell =  Backgrid.Extension.NodeListByIdCell = NodeAjaxOptionsCell.extend({\n    controlClassName: 'pgadmin-node-select backgrid-cell',\n    defaults: _.extend({}, NodeAjaxOptionsCell.prototype.defaults, {\n      url: 'nodes',\n      filter: undefined,\n      transform: function(rows, control) {\n        var self = control || this,\n            node = self.column.get('schema_node'),\n            res = [],\n            filter = self.column.get('filter') || function() { return true; };\n\n        filter = filter.bind(self);\n\n        _.each(rows, function(r) {\n          if (filter(r)) {\n            var l = (_.isFunction(node['node_label']) ?\n                  (node['node_label']).apply(node, [r, self.model, self]) :\n                  r.label),\n                image= (_.isFunction(node['node_image']) ?\n                  (node['node_image']).apply(\n                    node, [r, self.model, self]\n                    ) :\n                  (node['node_image'] || ('icon-' + node.type)));\n\n            res.push({\n              'value': r._id,\n              'image': image,\n              'label': l\n            });\n          }\n        });\n\n        return res;\n      },\n      select2: {\n        placeholder: 'Select from the list',\n        width: 'style',\n        templateResult: formatNode,\n        templateSelection: formatNode\n      }\n    })\n  });\n\n\n  var NodeListByNameCell =  Backgrid.Extension.NodeListByNameCell = NodeAjaxOptionsCell.extend({\n    controlClassName: 'pgadmin-node-select backgrid-cell',\n    defaults: _.extend({}, NodeAjaxOptionsCell.prototype.defaults, {\n      url: 'nodes',\n      filter: undefined,\n      transform: function(rows, control) {\n        var self = control || this,\n            node = self.column.get('schema_node'),\n            res = [],\n            filter = self.column.get('filter') || function() { return true; };\n\n        filter = filter.bind(self);\n\n        _.each(rows, function(r) {\n          if (filter(r)) {\n            var l = (_.isFunction(node['node_label']) ?\n                  (node['node_label']).apply(node, [r, self.model, self]) :\n                  r.label),\n                image= (_.isFunction(node['node_image']) ?\n                  (node['node_image']).apply(\n                    node, [r, self.model, self]\n                    ) :\n                  (node['node_image'] || ('icon-' + node.type)));\n\n            res.push({\n              'value': r.label,\n              'image': image,\n              'label': l\n            });\n          }\n        });\n\n        return res;\n      },\n      select2: {\n        placeholder: 'Select from the list',\n        width: 'style',\n        templateResult: formatNode,\n        templateSelection: formatNode\n      }\n    })\n  });\n\n    // Extend the browser's node model class to create a option/value pair\n  var MultiSelectAjaxCell = Backgrid.Extension.MultiSelectAjaxCell = Backgrid.Extension.NodeAjaxOptionsCell.extend({\n    defaults: _.extend({}, NodeAjaxOptionsCell.prototype.defaults, {\n      transform: undefined,\n      url_with_id: false,\n      select2: {\n        allowClear: true,\n        placeholder: 'Select from the list',\n        width: 'style',\n        multiple: true\n      },\n      opt: {\n        label: null,\n        value: null,\n        image: null,\n        selected: false\n       }\n    }),\n    getValueFromDOM: function() {\n      var res = [];\n\n      this.$el.find(\"select\").find(':selected').each(function() {\n        res.push($(this).attr('value'));\n      });\n\n      return res;\n    },\n  });\n\n  /*\n   * Control to select multiple columns.\n   */\n  var MultiSelectAjaxControl = Backform.MultiSelectAjaxControl = NodeAjaxOptionsControl.extend({\n    defaults: _.extend({}, NodeAjaxOptionsControl.prototype.defaults, {\n      select2: {\n        multiple: true,\n        allowClear: true,\n        width: 'style'\n      }\n    })\n  });\n\n  return Backform;\n});\n\n\n\n// WEBPACK FOOTER //\n// pgadmin/browser/static/js/node.ui.js","define(\n  'pgadmin.browser', [\n    'sources/gettext', 'sources/url_for', 'require', 'jquery', 'underscore', 'underscore.string',\n    'bootstrap', 'sources/pgadmin', 'pgadmin.alertifyjs', 'bundled_codemirror',\n    'sources/check_node_visibility', 'pgadmin.browser.utils', 'wcdocker',\n    'jquery.contextmenu', 'jquery.aciplugin', 'jquery.acitree',\n    'pgadmin.browser.messages',\n    'pgadmin.browser.menu', 'pgadmin.browser.panel',\n    'pgadmin.browser.error', 'pgadmin.browser.frame',\n    'pgadmin.browser.node', 'pgadmin.browser.collection',\n    'sources/codemirror/addon/fold/pgadmin-sqlfoldcode'\n  ], function(\n    gettext, url_for, require, $, _, S, Bootstrap, pgAdmin, Alertify,\n    codemirror, checkNodeVisibility\n) {\n  window.jQuery = window.$ = $;\n  // Some scripts do export their object in the window only.\n  // Generally the one, which do no have AMD support.\n  var wcDocker = window.wcDocker;\n  $ = $ || window.jQuery || window.$;\n  Bootstrap = Bootstrap || window.Bootstrap;\n  var CodeMirror = codemirror.default;\n\n  var pgBrowser = pgAdmin.Browser = pgAdmin.Browser || {};\n  var select_object_msg = gettext('Please select an object in the tree view.');\n\n  var panelEvents = {};\n  panelEvents[wcDocker.EVENT.VISIBILITY_CHANGED] = function() {\n    if (this.isVisible()) {\n      var obj = pgAdmin.Browser,\n          i   = obj.tree ? obj.tree.selected() : undefined,\n          d   = i && i.length == 1 ? obj.tree.itemData(i) : undefined;\n\n      if (d && obj.Nodes[d._type].callbacks['selected'] &&\n          _.isFunction(obj.Nodes[d._type].callbacks['selected'])) {\n        return obj.Nodes[d._type].callbacks['selected'].apply(\n            obj.Nodes[d._type], [i, d, obj]);\n      }\n    }\n  };\n\n  var processTreeData = function(payload) {\n    var data = JSON.parse(payload).data;\n    if (data.length && data[0]._type !== 'column' &&\n        data[0]._type !== 'catalog_object_column') {\n      data = data.sort(function(a, b) {\n          return pgAdmin.natural_sort(a.label, b.label);\n      });\n    }\n    _.each(data, function(d){\n      d._label = d.label;\n      d.label = _.escape(d.label);\n    })\n    return data;\n  };\n\n  var initializeBrowserTree = pgAdmin.Browser.initializeBrowserTree =\n    function(b) {\n      $('#tree').aciTree({\n        ajax: {\n          url: url_for('browser.nodes'),\n          converters: {\n            'text json': processTreeData,\n          }\n        },\n        ajaxHook: function(item, settings) {\n          if (item != null) {\n            var d = this.itemData(item);\n            var n = b.Nodes[d._type];\n            if (n)\n              settings.url = n.generate_url(item, 'children', d, true);\n          }\n        },\n        loaderDelay: 100,\n        show: {\n          duration: 75\n        },\n        hide: {\n          duration: 75\n        },\n        view: {\n          duration: 75\n        }\n      });\n\n      b.tree = $('#tree').aciTree('api');\n    };\n\n  // Extend the browser class attributes\n  _.extend(pgAdmin.Browser, {\n    // The base url for browser\n    URL: url_for('browser.index'),\n    // We do have docker of type wcDocker to take care of different\n    // containers. (i.e. panels, tabs, frames, etc.)\n    docker:null,\n    // Reversed Engineer query for the selected database node object goes\n    // here\n    editor:null,\n    // Left hand browser tree\n    tree:null,\n    // list of script to be loaded, when a certain type of node is loaded\n    // It will be used to register extensions, tools, child node scripts,\n    // etc.\n    scripts: {},\n    // Default panels\n    panels: {\n      // Panel to keep the left hand browser tree\n      'browser': new pgAdmin.Browser.Panel({\n        name: 'browser',\n        title: gettext('Browser'),\n        showTitle: true,\n        isCloseable: false,\n        isPrivate: true,\n        icon: 'fa fa-binoculars',\n        content: '<div id=\"tree\" class=\"aciTree\"></div>'\n      }),\n      // Properties of the object node\n      'properties': new pgAdmin.Browser.Panel({\n        name: 'properties',\n        title: gettext('Properties'),\n        icon: 'fa fa-cogs',\n        width: 500,\n        isCloseable: false,\n        isPrivate: true,\n        elContainer: true,\n        content: '<div class=\"obj_properties\"><div class=\"alert alert-info pg-panel-message\">' + select_object_msg + '</div></div>',\n        events: panelEvents,\n        onCreate: function(myPanel, $container) {\n          $container.addClass('pg-no-overflow');\n        }\n      }),\n      // Statistics of the object\n      'statistics': new pgAdmin.Browser.Panel({\n        name: 'statistics',\n        title: gettext('Statistics'),\n        icon: 'fa fa-line-chart',\n        width: 500,\n        isCloseable: false,\n        isPrivate: true,\n        content: '<div><div class=\"alert alert-info pg-panel-message pg-panel-statistics-message\">' + select_object_msg + '</div><div class=\"pg-panel-statistics-container hidden\"></div></div>',\n        events: panelEvents\n      }),\n      // Reversed engineered SQL for the object\n      'sql': new pgAdmin.Browser.Panel({\n        name: 'sql',\n        title: gettext('SQL'),\n        icon: 'fa fa-file-text-o',\n        width: 500,\n        isCloseable: false,\n        isPrivate: true,\n        content: '<textarea id=\"sql-textarea\" name=\"sql-textarea\"></textarea>'\n      }),\n      // Dependencies of the object\n      'dependencies': new pgAdmin.Browser.Panel({\n        name: 'dependencies',\n        title: gettext('Dependencies'),\n        icon: 'fa fa-hand-o-up',\n        width: 500,\n        isCloseable: false,\n        isPrivate: true,\n        content: '<div><div class=\"alert alert-info pg-panel-message pg-panel-depends-message\">' + select_object_msg + '</div><div class=\"pg-panel-depends-container hidden\"></div></div>',\n        events: panelEvents\n      }),\n      // Dependents of the object\n      'dependents': new pgAdmin.Browser.Panel({\n        name: 'dependents',\n        title: gettext('Dependents'),\n        icon: 'fa fa-hand-o-down',\n        width: 500,\n        isCloseable: false,\n        isPrivate: true,\n        content: '<div><div class=\"alert alert-info pg-panel-message pg-panel-depends-message\">' + select_object_msg + '</div><div class=\"pg-panel-depends-container hidden\"></div></div>',\n        events: panelEvents\n      })\n    },\n    // We also support showing dashboards, HTML file, external URL\n    frames: {},\n      /* Menus */\n      // pgAdmin.Browser.MenuItem.add_menus(...) will register all the menus\n      // in this container\n    menus: {\n      // All context menu goes here under certain menu types.\n      // i.e. context: {'server': [...], 'server-group': [...]}\n      context: {},\n      // File menus\n      file: {},\n      // Edit menus\n      edit: {},\n      // Object menus\n      object: {},\n      // Management menus\n      management: {},\n      // Tools menus\n      tools: {},\n      // Help menus\n      help: {}\n    },\n    add_panels: function() {\n      /* Add hooked-in panels by extensions */\n      var panels = JSON.parse(pgBrowser.panels_items);\n      _.each(panels, function(panel) {\n        if (panel.isIframe) {\n          pgBrowser.frames[panel.name] = new pgBrowser.Frame({\n            name: panel.name,\n            title: panel.title,\n            icon: panel.icon,\n            width: panel.width,\n            height: panel.height,\n            showTitle: panel.showTitle,\n            isCloseable: panel.isCloseable,\n            isPrivate: panel.isPrivate,\n            url: panel.content\n          })\n        } else {\n          pgBrowser.panels[panel.name] = new pgBrowser.Panel({\n            name: panel.name,\n            title: panel.title,\n            icon: panel.icon,\n            width: panel.width,\n            height: panel.height,\n            showTitle: panel.showTitle,\n            isCloseable: panel.isCloseable,\n            isPrivate: panel.isPrivate,\n            content: (panel.content) ? panel.content : '',\n            events: (panel.events) ? panel.events : '',\n            canHide: (panel.canHide) ? panel.canHide : ''\n          })\n        }\n      });\n\n    },\n    menu_categories: {\n      /* name, label (pair) */\n      'create': {\n        label: gettext('Create'),\n        priority: 1,\n        /* separator above this menu */\n        above: false,\n        below: true,\n        /* icon: 'fa fa-magic', */\n        single: true\n      }\n    },\n    // A callback to load/fetch a script when a certain node is loaded\n    register_script: function(n, m, p) {\n      var scripts = this.scripts;\n      scripts[n] = _.isArray(scripts[n]) ? scripts[n] : [];\n      scripts[n].push({'name': m, 'path': p, loaded: false});\n    },\n    // Build the default layout\n    buildDefaultLayout: function() {\n      var browserPanel = this.docker.addPanel('browser', wcDocker.DOCK.LEFT);\n      var dashboardPanel = this.docker.addPanel(\n              'dashboard', wcDocker.DOCK.RIGHT, browserPanel);\n      this.docker.addPanel('properties', wcDocker.DOCK.STACKED, dashboardPanel, {\n          tabOrientation: wcDocker.TAB.TOP\n      });\n      this.docker.addPanel('sql', wcDocker.DOCK.STACKED, dashboardPanel);\n      this.docker.addPanel(\n              'statistics', wcDocker.DOCK.STACKED, dashboardPanel);\n      this.docker.addPanel(\n              'dependencies', wcDocker.DOCK.STACKED, dashboardPanel);\n      this.docker.addPanel(\n              'dependents', wcDocker.DOCK.STACKED, dashboardPanel);\n    },\n    // Enable/disable menu options\n    enable_disable_menus: function(item) {\n      // Mechanism to enable/disable menus depending on the condition.\n      var obj = this, j, e,\n          // menu navigation bar\n          navbar = $('#navbar-menu > ul').first(),\n          // Drop down menu for objects\n          $obj_mnu = navbar.find('li#mnu_obj > ul.dropdown-menu').first(),\n          // data for current selected object\n          d = obj.tree.itemData(item),\n          update_menuitem = function(m) {\n            if (m instanceof pgAdmin.Browser.MenuItem) {\n              m.update(d, item);\n            } else {\n              for (var key in m) {\n                update_menuitem(m[key]);\n              }\n            }\n          };\n\n      // All menus from the object menus (except the create drop-down\n      // menu) needs to be removed.\n      $obj_mnu.empty();\n\n      // All menus (except for the object menus) are already present.\n      // They will just require to check, wheather they are\n      // enabled/disabled.\n      _.each([\n        {m: 'file', id: '#mnu_file'},\n        {m: 'edit', id: '#mnu_edit'},\n        {m: 'management', id: '#mnu_management'},\n        {m: 'tools', id: '#mnu_tools'},\n        {m: 'help', id:'#mnu_help'}], function(o) {\n          _.each(\n            obj.menus[o.m],\n            function(m, k) {\n              update_menuitem(m);\n            });\n        });\n\n      // Create the object menu dynamically\n      if (item && obj.menus['object'] && obj.menus['object'][d._type]) {\n        pgAdmin.Browser.MenuCreator(\n          $obj_mnu, obj.menus['object'][d._type], obj.menu_categories, d, item\n        )\n      } else {\n        // Create a dummy 'no object seleted' menu\n        var create_submenu = pgAdmin.Browser.MenuGroup(\n          obj.menu_categories['create'], [{\n            $el: $('<li class=\"menu-item disabled\"><a href=\"#\">' + gettext(\"No object selected\") + '</a></li>'),\n            priority: 1,\n            category: 'create',\n            update: function() {}\n          }], false);\n        $obj_mnu.append(create_submenu.$el);\n      }\n    },\n    save_current_layout: function(obj) {\n      if(obj.docker) {\n        var state = obj.docker.save();\n        var settings = { setting: \"Browser/Layout\", value: state };\n        $.ajax({\n          type: 'POST',\n          url: url_for('settings.store_bulk'),\n          data: settings\n        });\n      }\n    },\n    init: function() {\n      var obj=this;\n      if (obj.initialized) {\n        return;\n      }\n      obj.initialized = true;\n\n      // Cache preferences\n      obj.cache_preferences();\n      this.add_panels();\n      // Initialize the Docker\n      obj.docker = new wcDocker(\n        '#dockerContainer', {\n        allowContextMenu: true,\n        allowCollapse: false,\n        themePath: '../static/css/',\n        theme: 'webcabin.overrides.css'\n      });\n      if (obj.docker) {\n        // Initialize all the panels\n        _.each(obj.panels, function(panel, name) {\n          obj.panels[name].load(obj.docker);\n        });\n        // Initialize all the frames\n        _.each(obj.frames, function(frame, name) {\n          obj.frames[name].load(obj.docker);\n        });\n\n        // Stored layout in database from the previous session\n        var layout = pgBrowser.utils.layout;\n\n        // Try to restore the layout if there is one\n        if (layout != '') {\n          try {\n            obj.docker.restore(layout)\n          }\n          catch(err) {\n            obj.docker.clear();\n            obj.buildDefaultLayout()\n          }\n        } else {\n          obj.buildDefaultLayout()\n        }\n\n        // Listen to panel attach/detach event so that last layout will be remembered\n        _.each(obj.panels, function(panel, name) {\n          if (panel.panel) {\n            panel.panel.on(wcDocker.EVENT.ATTACHED, function() {\n              obj.save_current_layout(obj);\n            });\n            panel.panel.on(wcDocker.EVENT.DETACHED, function() {\n              obj.save_current_layout(obj);\n            });\n            panel.panel.on(wcDocker.EVENT.MOVE_ENDED, function() {\n              obj.save_current_layout(obj);\n            });\n          }\n        });\n      }\n\n      // Syntax highlight the SQL Pane\n      obj.editor = CodeMirror.fromTextArea(\n          document.getElementById(\"sql-textarea\"), {\n            lineNumbers: true,\n            mode: \"text/x-pgsql\",\n            readOnly: true,\n            extraKeys: pgAdmin.Browser.editor_shortcut_keys,\n            tabSize: pgAdmin.Browser.editor_options.tabSize,\n            lineWrapping: pgAdmin.Browser.editor_options.wrapCode,\n            autoCloseBrackets: pgAdmin.Browser.editor_options.insert_pair_brackets,\n            matchBrackets: pgAdmin.Browser.editor_options.brace_matching\n          });\n\n      setTimeout(function() {\n        obj.editor.refresh();\n      }, 10);\n\n      // Initialise the treeview\n      initializeBrowserTree(obj);\n\n      // Build the treeview context menu\n      $('#tree').contextMenu({\n        selector: '.aciTreeLine',\n        autoHide: false,\n        build: function(element) {\n          var item = obj.tree.itemFrom(element),\n              d = obj.tree.itemData(item),\n              menus = obj.menus['context'][d._type],\n              $div = $('<div></div>'),\n              context_menu = {};\n\n          pgAdmin.Browser.MenuCreator(\n            $div, menus, obj.menu_categories, d, item, context_menu\n          );\n\n          return {\n            autoHide: false,\n            items: context_menu\n          };\n        }\n      });\n\n      // Treeview event handler\n      $('#tree').on('acitree', function(event, api, item, eventName, options) {\n        var d = item ? obj.tree.itemData(item) : null;\n\n        switch (eventName) {\n          // When a node is added in the browser tree, we need to\n          // load the registered scripts\n          case \"added\":\n            if (d) {\n              /* Loading all the scripts registered to be loaded on this node */\n              if (obj.scripts && obj.scripts[d._type]) {\n                var scripts = _.extend({}, obj.scripts[d._type]);\n\n                /*\n                 * We can remove it from the Browser.scripts object as\n                 * these're about to be loaded.\n                 *\n                 * This will make sure that we check for the script to be\n                 * loaded only once.\n                 *\n                 */\n                delete obj.scripts[d._type];\n              }\n            }\n            break;\n        }\n\n        var node;\n\n        if (d && obj.Nodes[d._type]) {\n          node = obj.Nodes[d._type];\n\n          /* If the node specific callback returns false, we will also return\n           * false for further processing.\n           */\n          if (_.isObject(node.callbacks) &&\n              eventName in node.callbacks &&\n              typeof node.callbacks[eventName] == 'function' &&\n              !node.callbacks[eventName].apply(\n                  node, [item, d, obj, options, eventName])) {\n            return false;\n          }\n          /* Raise tree events for the nodes */\n          try {\n            node.trigger(\n                'browser-node.' + eventName, node, item, d\n                );\n          } catch (e) {\n            console.log(e);\n          }\n        }\n\n        try {\n          obj.Events.trigger(\n              'pgadmin-browser:tree', eventName, item, d\n              );\n          obj.Events.trigger(\n              'pgadmin-browser:tree:' + eventName, item, d, node\n              );\n        } catch (e) {\n          console.log(e);\n        }\n        return true;\n      });\n\n      // Register scripts and add menus\n      pgBrowser.utils.registerScripts(this);\n      pgBrowser.utils.addMenus(obj);\n\n      // Ping the server every 5 minutes\n      setInterval(function() {\n        $.ajax({\n          url: url_for('misc.ping'),\n          type:'POST',\n          success: function() {},\n          error: function() {}\n          });\n        }, 300000);\n      obj.Events.on('pgadmin:browser:tree:add', obj.onAddTreeNode, obj);\n      obj.Events.on('pgadmin:browser:tree:update', obj.onUpdateTreeNode, obj);\n      obj.Events.on('pgadmin:browser:tree:refresh', obj.onRefreshTreeNode, obj);\n    },\n\n    add_menu_category: function(\n      id, label, priority, icon, above_separator, below_separator, single\n    ) {\n      this.menu_categories[id] = {\n        label: label,\n        priority: priority,\n        icon: icon,\n        above: (above_separator === true),\n        below: (below_separator === true),\n        single: single\n      }\n    },\n\n    // This will hold preference data (Works as a cache object)\n    // Here node will be a key and it's preference data will be value\n    preferences_cache: {},\n\n    // Add menus of module/extension at appropriate menu\n    add_menus: function(menus) {\n      var self = this,\n        pgMenu = this.menus,\n        MenuItem = pgAdmin.Browser.MenuItem;\n      _.each(menus, function(m) {\n        _.each(m.applies, function(a) {\n          /* We do support menu type only from this list */\n          if ($.inArray(a, [\n              'context', 'file', 'edit', 'object',\n              'management', 'tools', 'help']) >= 0) {\n            var menus;\n\n            // If current node is not visible in browser tree\n            // then return from here\n            if(!checkNodeVisibility(self, m.node)) {\n                return;\n            } else if(_.has(m, 'module') && !_.isUndefined(m.module)) {\n              // If module to which this menu applies is not visible in\n              // browser tree then also we do not display menu\n              if(!checkNodeVisibility(self, m.module.type)) {\n                return;\n              }\n            }\n\n            pgMenu[a] = pgMenu[a] || {};\n            if (_.isString(m.node)) {\n              menus = pgMenu[a][m.node] = pgMenu[a][m.node] || {};\n            } else if (_.isString(m.category)) {\n              menus = pgMenu[a][m.category] = pgMenu[a][m.category] || {};\n            }\n            else {\n              menus = pgMenu[a];\n            }\n\n            if (!_.has(menus, m.name)) {\n              menus[m.name] = new MenuItem({\n                name: m.name, label: m.label, module: m.module,\n                category: m.category, callback: m.callback,\n                priority: m.priority, data: m.data, url: m.url,\n                target: m.target, icon: m.icon,\n                enable: (m.enable == '' ? true : (_.isString(m.enable) &&\n                   m.enable.toLowerCase() == 'false') ?\n                  false : m.enable),\n                node: m.node\n              });\n            }\n          } else  {\n            console && console.log &&\n              console.log(\n                  \"Developer warning: Category '\" +\n                  a +\n                  \"' is not supported!\\nSupported categories are: context, file, edit, object, tools, management, help\");\n          }\n        });\n      });\n    },\n    // Create the menus\n    create_menus: function() {\n\n      /* Create menus */\n      var navbar = $('#navbar-menu > ul').first();\n      var obj = this;\n\n      _.each([\n        {menu: 'file', id: '#mnu_file'},\n        {menu: 'edit', id: '#mnu_edit'},\n        {menu: 'management', id: '#mnu_management'},\n        {menu: 'tools', id: '#mnu_tools'},\n        {menu: 'help', id:'#mnu_help'}],\n        function(o) {\n          var $mnu = navbar.children(o.id).first(),\n              $dropdown = $mnu.children('.dropdown-menu').first();\n          $dropdown.empty();\n          var menus = {};\n\n          if (pgAdmin.Browser.MenuCreator(\n            $dropdown, obj.menus[o.menu], obj.menu_categories\n            )) {\n            $mnu.removeClass('hide');\n          }\n        });\n\n      navbar.children('#mnu_obj').removeClass('hide');\n       obj.enable_disable_menus();\n    },\n    // General function to handle callbacks for object or dialog help.\n    showHelp: function(type, url, node, item, label) {\n      if (type == \"object_help\") {\n        // See if we can find an existing panel, if not, create one\n        var pnlSqlHelp = this.docker.findPanels('pnl_sql_help')[0];\n\n        if (pnlSqlHelp == null) {\n          var pnlProperties = this.docker.findPanels('properties')[0];\n          this.docker.addPanel('pnl_sql_help', wcDocker.DOCK.STACKED, pnlProperties);\n          pnlSqlHelp = this.docker.findPanels('pnl_sql_help')[0];\n        }\n\n        // Construct the URL\n        var server = node.getTreeNodeHierarchy(item).server;\n        var baseUrl = pgBrowser.utils.pg_help_path;\n        if (server.server_type == 'ppas') {\n          baseUrl = pgBrowser.utils.edbas_help_path;\n        }\n\n        var major = Math.floor(server.version / 10000),\n          minor = Math.floor(server.version / 100) - (major * 100);\n\n        baseUrl = baseUrl.replace('$VERSION$', major + '.' + minor)\n        if (!S(baseUrl).endsWith('/')) {\n          baseUrl = baseUrl + '/'\n        }\n        var fullUrl = baseUrl+ url;\n        // Update the panel\n        var iframe = $(pnlSqlHelp).data('embeddedFrame');\n        pnlSqlHelp.title('Help: '+ label);\n\n        pnlSqlHelp.focus();\n        iframe.openURL(fullUrl);\n      } else if(type == \"dialog_help\") {\n        if(this.docker) {\n          // See if we can find an existing panel, if not, create one\n          var pnlDialogHelp = this.docker.findPanels('pnl_online_help')[0];\n\n          if (pnlDialogHelp == null) {\n            var pnlProperties = this.docker.findPanels('properties')[0];\n            this.docker.addPanel('pnl_online_help', wcDocker.DOCK.STACKED, pnlProperties);\n            pnlDialogHelp = this.docker.findPanels('pnl_online_help')[0];\n          }\n\n          // Update the panel\n          var iframe = $(pnlDialogHelp).data('embeddedFrame');\n\n          pnlDialogHelp.focus();\n          iframe.openURL(url);\n        } else {\n          // We have added new functionality of opening Query tool & debugger in new\n          // browser tab, In that case we will not have docker object available\n          // so we will open dialog help in new browser tab\n          window.open(url, '_blank');\n        }\n      }\n    },\n\n    // Get preference value from cache\n    get_preference: function(module, preference) {\n      var self = this;\n      // If cache is not yet loaded then keep checking\n      if(_.size(self.preferences_cache) == 0) {\n        var preference_data = setInterval(check_preference, 1000);\n\n        function check_preference() {\n          if(_.size(self.preferences_cache) > 0) {\n            clearInterval(preference_data);\n            return _.findWhere(self.preferences_cache, {'module': module, 'name': preference});\n          }\n        }\n      }\n      else {\n        return _.findWhere(self.preferences_cache, {'module': module, 'name': preference});\n      }\n    },\n\n    // Get and cache the preferences\n    cache_preferences: function () {\n      var self = this;\n      $.ajax({\n        url: url_for('preferences.get_all'),\n        success: function(res) {\n          self.preferences_cache = res;\n        },\n        error: function(xhr, status, error) {\n          try {\n            var err = $.parseJSON(xhr.responseText);\n            Alertify.alert(gettext('Preference loading failed.'),\n              err.errormsg\n            );\n          } catch (e) {}\n        }\n      });\n    },\n\n    _findTreeChildNode: function(_i, _d, _o) {\n      var loaded = _o.t.wasLoad(_i),\n          done = true,\n          onLoad = function() {\n            var items = _o.t.children(_i),\n                i, d, n, idx = 0, size = items.length;\n            for (; idx < size; idx++) {\n              i = items.eq(idx);\n              d = _o.t.itemData(i);\n              if (d._type === _d._type) {\n                if (!_o.hasId || d._id == _d._id) {\n                  _o.i = i;\n                  _o.d = _d;\n                  _o.pI.push({coll: false, item: i, d: _d});\n\n                  _o.success();\n                  return;\n                }\n              } else {\n                n = _o.b.Nodes[d._type];\n                // Are we looking at the collection node for the given node?\n                if (\n                  n && n.collection_node && d.nodes &&\n                  _.indexOf(d.nodes, _d._type) != -1\n                ) {\n                  _o.i = i;\n                  _o.d = null;\n                  _o.pI.push({coll: true, item: i, d: d});\n\n                  // Set load to false when the current collection node's inode is false\n                  if (!_o.t.isInode(i)) {\n                    _o.load = false;\n                  }\n                  _o.b._findTreeChildNode(i, _d, _o);\n                  return;\n                }\n              }\n            }\n            _o.notFound && typeof(_o.notFound) == 'function' &&\n              _o.notFound(_d);\n          };\n\n      if (!loaded && _o.load) {\n        _o.t.open(_i, {\n          success: onLoad,\n          unanimated: true,\n          fail: function() {\n            var fail = _o && _o.o && _o.o.fail;\n\n            if (\n              fail && typeof(fail) == 'function'\n            ) {\n              fail.apply(_o.t, []);\n            }\n          }\n        });\n      } else if (loaded) {\n        onLoad();\n      } else {\n        _o.notFound && typeof(_o.notFound) == 'function' &&\n          _o.notFound(_d);\n      }\n\n      return;\n    },\n\n    onAddTreeNode: function(_data, _hierarchy, _opts) {\n      var ctx = {\n            b: this, // Browser\n            d: null, // current parent\n            hasId: true,\n            i: null, // current item\n            p: _.toArray(_hierarchy || {}).sort(\n              function(a, b) {\n                return (a.priority === b.priority) ? 0 : (\n                  a.priority < b.priority ? -1 : 1\n                );\n              }\n            ), // path of the parent\n            pI: [], // path Item\n            t: this.tree, // Tree Api\n            o: _opts\n          },\n          traversePath = function() {\n            var ctx = this, i, d;\n\n            ctx.success = traversePath;\n            if (ctx.p.length) {\n              d = ctx.p.shift();\n              // This is the parent node.\n              // Replace the parent-id of the data, which could be different\n              // from the given hierarchy.\n              if (!ctx.p.length) {\n                d._id = _data._pid;\n                ctx.success = addItemNode;\n              }\n              ctx.b._findTreeChildNode(\n                ctx.i, d, ctx\n              );\n              // if parent node is null\n              if (!_data._pid) {\n                addItemNode.apply(ctx, arguments);\n              }\n            }\n            return true;\n          }.bind(ctx),\n          addItemNode = function() {\n            // Append the new data in the tree under the current item.\n            // We may need to pass it to proper collection node.\n            var ctx = this,\n                first = (ctx.i || this.t.wasLoad(ctx.i)) &&\n                  this.t.first(ctx.i),\n                findChildNode = function(success, notFound) {\n                  var ctx = this;\n                  ctx.success = success;\n                  ctx.notFound = notFound;\n\n                  ctx.b._findTreeChildNode(ctx.i, _data, ctx);\n                }.bind(ctx),\n                selectNode = function() {\n                  this.t.openPath(this.i);\n                  this.t.select(this.i);\n                  if (\n                    ctx.o && ctx.o.success && typeof(ctx.o.success) == 'function'\n                  ) {\n                    ctx.o.success.apply(ctx.t, [ctx.i, _data]);\n                  }\n                }.bind(ctx),\n                addNode = function() {\n                  var ctx = this,\n                      items = ctx.t.children(ctx.i),\n                      s = 0, e = items.length - 1, i,\n                      linearSearch = function() {\n                        while (e >= s) {\n                          i = items.eq(s);\n                          var d = ctx.t.itemData(i);\n                          if (\n                            pgAdmin.natural_sort(\n                              d._label, _data._label\n                            ) == 1\n                          )\n                            return true;\n                          s++;\n                        }\n                        if (e != items.length - 1) {\n                          i = items.eq(e);\n                          return true;\n                        }\n                        i = null;\n                        return false;\n                      },\n                      binarySearch = function() {\n                        var d, m;\n                        // Binary search only outperforms Linear search for n > 44.\n                        // Reference:\n                        // https://en.wikipedia.org/wiki/Binary_search_algorithm#cite_note-30\n                        //\n                        // We will try until it's half.\n                        while (e - s > 22) {\n                          i = items.eq(s);\n                          var d = ctx.t.itemData(i);\n                          if (\n                            pgAdmin.natural_sort(\n                              d._label, _data._label\n                            ) != -1\n                          )\n                            return true;\n                          i = items.eq(e);\n                          d = ctx.t.itemData(i);\n                          if (\n                            pgAdmin.natural_sort(\n                              d._label, _data._label\n                            ) != 1\n                          )\n                            return true;\n                          var m = s + Math.round((e - s) / 2);\n                          i = items.eq(m);\n                          d = ctx.t.itemData(i);\n                          var res = pgAdmin.natural_sort(d._label, _data._label);\n                          if (res == 0)\n                            return true;\n\n                          if (res == -1) {\n                            s = m + 1;\n                            e--;\n                          } else {\n                            s++;\n                            e = m - 1;\n                          }\n                        }\n                        return linearSearch();\n                      };\n\n                  if (binarySearch()) {\n                    ctx.t.before(i, {\n                      itemData: _data,\n                      success: function() {\n                        if (\n                          ctx.o && ctx.o.success && typeof(ctx.o.success) == 'function'\n                        ) {\n                          ctx.o.success.apply(ctx.t, [i, _data]);\n                        }\n                      },\n                      fail: function() {\n                        console.log('Failed to add before..');\n                        if (\n                          ctx.o && ctx.o.fail && typeof(ctx.o.fail) == 'function'\n                        ) {\n                          ctx.o.fail.apply(ctx.t, [i, _data]);\n                        }\n                      }\n                    });\n                  } else {\n                    var _append = function() {\n                          var ctx = this,\n                            is_parent_loaded_before = ctx.t.wasLoad(ctx.i),\n                            _parent_data = ctx.t.itemData(ctx.i);\n\n                          ctx.t.append(ctx.i, {\n                            itemData: _data,\n                            success: function(item, options) {\n                              var i = $(options.items[0]);\n                              // Open the item path only if its parent is loaded\n                              // or parent type is same as nodes\n                              if(\n                                is_parent_loaded_before &&\n                                _parent_data &&  _parent_data._type.search(\n                                  _data._type\n                                ) > -1\n                              ) {\n                                ctx.t.openPath(i);\n                                ctx.t.select(i);\n                              } else {\n                                if (_parent_data) {\n                                  // Unload the parent node so that we'll get\n                                  // latest data when we try to expand it\n                                  ctx.t.unload(ctx.i, {\n                                    success: function (item, options) {\n                                      // Lets try to load it now\n                                      ctx.t.open(item);\n                                    }\n                                  });\n                                }\n                              }\n                              if (\n                                ctx.o && ctx.o.success &&\n                                typeof(ctx.o.success) == 'function'\n                              ) {\n                                ctx.o.success.apply(ctx.t, [i, _data]);\n                              }\n                            },\n                            fail: function() {\n                              console.log('Failed to append');\n                              if (\n                                ctx.o && ctx.o.fail &&\n                                typeof(ctx.o.fail) == 'function'\n                              ) {\n                                ctx.o.fail.apply(ctx.t, [ctx.i, _data]);\n                              }\n                            }\n                          });\n                        }.bind(ctx);\n\n                    if (ctx.i && !ctx.t.isInode(ctx.i)) {\n                        ctx.t.setInode(ctx.i, {success: _append});\n                    } else {\n                        // Handle case for node without parent i.e. server-group\n                        // or if parent node's inode is true.\n                        _append();\n                    }\n                  }\n                }.bind(ctx);\n\n            // Parent node do not have any children, let me unload it.\n            if (!first && ctx.t.wasLoad(ctx.i)) {\n              ctx.t.unload(ctx.i, {\n                success: function() {\n                  findChildNode(\n                    selectNode,\n                    function() {\n                      var o = this && this.o;\n                      if (\n                        o && o.fail && typeof(o.fail) == 'function'\n                      ) {\n                        o.fail.apply(this.t, [this.i, _data]);\n                      }\n                    }.bind(this)\n                  );\n                }.bind(this),\n                fail: function() {\n                  var o = this && this.o;\n                  if (\n                    o && o.fail && typeof(o.fail) == 'function'\n                  ) {\n                    o.fail.apply(this.t, [this.i, _data]);\n                  }\n                }.bind(this)\n              });\n              return;\n            }\n\n            // We can find the collection node using _findTreeChildNode\n            // indirectly.\n            findChildNode(selectNode, addNode);\n          }.bind(ctx);\n\n      if (!ctx.t.wasInit() || !_data) {\n        return;\n      }\n      _data._label = _data.label;\n      _data.label = _.escape(_data.label);\n\n      traversePath();\n    },\n\n    onUpdateTreeNode: function(_old, _new, _hierarchy, _opts) {\n      var ctx = {\n            b: this, // Browser\n            d: null, // current parent\n            i: null, // current item\n            hasId: true,\n            p: _.toArray(_hierarchy || {}).sort(\n              function(a, b) {\n                return (a.priority === b.priority) ? 0 : (\n                  a.priority < b.priority ? -1 : 1\n                );\n              }\n            ), // path of the old object\n            pI: [], // path items\n            t: this.tree, // Tree Api\n            o: _opts,\n            load: true,\n            old: _old,\n            new: _new,\n            op: null\n          },\n          errorOut = function() {\n            var fail = this.o && this.o.fail;\n            if (fail && typeof(fail) == 'function') {\n              fail.apply(this.t, [this.i, _new, _old]);\n            }\n          }.bind(ctx),\n          deleteNode = function() {\n            var self = this,\n                pI = this.pI,\n                findParent = function() {\n                  if (pI.length) {\n                    pI.pop();\n                    var length = pI.length;\n                    this.i = (length && pI[length - 1].item) || null;\n                    this.d = (length && pI[length - 1].d) || null;\n\n                    // It is a collection item, let's find the node item\n                    if (length && pI[length - 1].coll) {\n                      pI.pop();\n                      length = pI.length;\n                      this.i = (length && pI[length - 1].item) || null;\n                      this.d = (length && pI[length - 1].d) || null;\n                    }\n                  } else {\n                    this.i = null;\n                    this.d = null;\n                  }\n                }.bind(this);\n\n            var _item_parent = (this.i\n                                    && this.t.hasParent(this.i)\n                                    && this.t.parent(this.i)) || null,\n                _item_grand_parent = _item_parent ?\n                                        (this.t.hasParent(_item_parent)\n                                          && this.t.parent(_item_parent))\n                                        : null;\n\n            // Remove the current node first.\n            if (\n              this.i && this.d && this.old._id == this.d._id &&\n              this.old._type == this.d._type\n            ) {\n              var _parent = this.t.parent(this.i) || null;\n\n              // If there is no parent then just update the node\n              if(_parent.length == 0 && ctx.op == 'UPDATE') {\n                updateNode();\n              } else {\n                var postRemove = function() {\n                  // If item has parent but no grand parent\n                  if (_item_parent && !_item_grand_parent) {\n                    var parent = null;\n                    // We need to search in all parent siblings (eg: server groups)\n                    var parents = this.t.siblings(this.i) || [];\n                    parents.push(this.i[0])\n                    _.each(parents, function (p) {\n                      var d = self.t.itemData($(p));\n                      // If new server group found then assign it parent\n                      if(d._id == self.new._pid) {\n                        parent = p;\n                        self.pI.push({coll: true, item: parent, d: d});\n                      }\n                    });\n\n                    if (parent) {\n                      this.load = true;\n\n                      this.success = function() {\n                        addItemNode();\n                      }.bind(this);\n                      // We can refresh the collection node, but - let's not bother about\n                      // it right now.\n                      this.notFound = errorOut;\n\n                      var _d = {_id: this.new._pid, _type: self.d._type}\n                        parent = $(parent);\n                        var loaded = this.t.wasLoad(parent),\n                        onLoad = function() {\n                          self.i = parent;\n                          self.d = self.d;\n                          self.pI.push({coll: false, item: parent, d: self.d});\n                          self.success();\n                          return;\n                        };\n\n                      if (!loaded && self.load) {\n                        self.t.open(parent, {\n                          success: onLoad,\n                            unanimated: true,\n                            fail: function() {\n                              var fail = self && self.o && self.o.fail;\n\n                              if (\n                                fail && typeof(fail) == 'function'\n                              ) {\n                                fail.apply(self.t, []);\n                              }\n                            }\n                          });\n                        } else {\n                          onLoad();\n                        }\n                      }\n                    return;\n                  } else {\n                    // This is for rest of the nodes\n                    var _parentData = this.d;\n                    // Find the grand-parent, or the collection node of parent.\n                    findParent();\n\n                    if (this.i) {\n                      this.load = true;\n\n                      this.success = function() {\n                        addItemNode();\n                      }.bind(this);\n                      // We can refresh the collection node, but - let's not bother about\n                      // it right now.\n                      this.notFound = errorOut;\n\n                      // Find the new parent\n                      this.b._findTreeChildNode(\n                        this.i, {_id: this.new._pid, _type: _parentData._type}, this\n                      );\n                    } else {\n                      addItemNode();\n                    }\n                    return;\n                  }\n                }.bind(this);\n\n                // If there is a parent then we can remove the node\n                this.t.remove(this.i, {\n                  success: function() {\n                    // Find the parent\n                    findParent();\n                    // If server group have no children then close it and set inode\n                    // and unload it so it can fetch new data on next expand\n                    if (_item_parent && !_item_grand_parent && _parent\n                          && self.t.children(_parent).length == 0) {\n                          self.t.setInode(_parent, {\n                            success: function() {\n                              self.t.unload(_parent, {success: function() {\n                                setTimeout(postRemove);\n                              }}\n                              );\n                            }\n                          });\n                    } else {\n                      setTimeout(postRemove);\n                    }\n                    return true;\n                  }\n                }\n              );\n            }\n\n            }\n            errorOut();\n\n          }.bind(ctx),\n          findNewParent = function(_d) {\n            var findParent = function() {\n              if (pI.length) {\n                pI.pop();\n                var length = pI.length;\n                this.i = (length && pI[length - 1].item) || null;\n                this.d = (length && pI[length - 1].d) || null;\n\n                // It is a collection item, let's find the node item\n                if (length && pI[length - 1].coll) {\n                  pI.pop();\n                  length = pI.length;\n                  this.i = (length && pI[length - 1].item) || null;\n                  this.d = (length && pI[length - 1].d) || null;\n                }\n              } else {\n                this.i = null;\n                this.d = null;\n              }\n            }.bind(this);\n\n            // old parent was not found, can we find the new parent?\n            if (this.i) {\n              this.load = true;\n              this.success = function() {\n                addItemNode();\n              }.bind(this);\n\n              if (_d._type == old._type) {\n                // We were already searching the old object under the parent.\n                findParent();\n                _d = this.d;\n                // Find the grand parent\n                findParent();\n              }\n              console.log(_d);\n              _d = this.new._pid;\n\n              // We can refresh the collection node, but - let's not bother about\n              // it right now.\n              this.notFound = errorOut;\n\n              // Find the new parent\n              this.b._findTreeChildNode(this.i, _d, this);\n            } else {\n              addItemNode();\n            }\n          }.bind(ctx),\n          updateNode = function() {\n            if (\n              this.i && this.d && this.new._type == this.d._type\n            ) {\n              var self = this,\n              _id = this.d._id;\n              if (this.new._id != this.d._id) {\n                // Found the new oid, update its node_id\n                var node_data = this.t.itemData(ctx.i);\n                node_data._id = _id = this.new._id;\n              }\n              if (this.new._id == _id) {\n                // Found the current\n                _.extend(this.d, {\n                  '_id': this.new._id,\n                  '_label': this.new._label,\n                  'label': this.new.label\n                });\n                this.t.setLabel(ctx.i, {label: this.new.label});\n                this.t.addIcon(ctx.i, {icon: this.new.icon});\n                this.t.setId(ctx.i, {id: this.new.id});\n                this.t.openPath(this.i);\n                this.t.deselect(this.i);\n\n                // select tree item after few milliseconds\n                setTimeout(function() {\n                  self.t.select(self.i);\n                }, 10);\n              }\n            }\n            var success = this.o && this.o.success;\n            if (success && typeof(success) == 'function') {\n              success.apply(this.t, [this.i, _old, _new]);\n            }\n          }.bind(ctx),\n          traversePath = function() {\n            var ctx = this, i, d;\n\n            ctx.success = traversePath;\n            if (ctx.p.length) {\n              d = ctx.p.shift();\n              // This is the node, we can now do the required operations.\n              // We should first delete the existing node, if the parent-id is\n              // different.\n              if (!ctx.p.length) {\n                if (ctx.op == 'RECREATE') {\n                  ctx.load = false;\n                  ctx.success = deleteNode;\n                  ctx.notFound = findNewParent;\n                } else {\n                  ctx.success = updateNode;\n                  ctx.notFound = errorOut;\n                }\n              }\n              ctx.b._findTreeChildNode(\n                ctx.i, d, ctx\n              );\n            } else if (ctx.p.length == 1) {\n              ctx.notFound = findNewParent;\n            }\n            return true;\n          }.bind(ctx),\n          addItemNode = function() {\n            var ctx = this,\n                first = (ctx.i || this.t.wasLoad(ctx.i)) &&\n                  this.t.first(ctx.i),\n                findChildNode = function(success, notFound) {\n                  var ctx = this;\n                  ctx.success = success;\n                  ctx.notFound = notFound;\n\n                  ctx.b._findTreeChildNode(ctx.i, _new, ctx);\n                }.bind(ctx),\n                selectNode = function() {\n                  this.t.openPath(this.i);\n                  this.t.select(this.i);\n                  if (\n                    ctx.o && ctx.o.success && typeof(ctx.o.success) == 'function'\n                  ) {\n                    ctx.o.success.apply(ctx.t, [ctx.i, _new]);\n                  }\n                }.bind(ctx),\n                addNode = function() {\n                  var ctx = this,\n                      items = ctx.t.children(ctx.i),\n                      s = 0, e = items.length - 1, i,\n                      linearSearch = function() {\n                        while (e >= s) {\n                          i = items.eq(s);\n                          var d = ctx.t.itemData(i);\n                          if (\n                            pgAdmin.natural_sort(\n                              d._label, _new._label\n                            ) == 1\n                          )\n                            return true;\n                          s++;\n                        }\n                        if (e != items.length - 1) {\n                          i = items.eq(e);\n                          return true;\n                        }\n                        i = null;\n                        return false;\n                      },\n                      binarySearch = function() {\n                        while (e - s > 22) {\n                          i = items.eq(s);\n                          var d = ctx.t.itemData(i);\n                          if (\n                            pgAdmin.natural_sort(\n                              d._label, _new._label\n                            ) != -1\n                          )\n                            return true;\n                          i = items.eq(e);\n                          d = ctx.t.itemData(i);\n                          if (\n                            pgAdmin.natural_sort(\n                              d._label, _new._label\n                            ) != 1\n                          )\n                            return true;\n                          var m = s + Math.round((e - s) / 2);\n                          i = items.eq(m);\n                          d = ctx.t.itemData(i);\n                          var res = pgAdmin.natural_sort(d._label, _new._label);\n                          if (res == 0)\n                            return true;\n\n                          if (res == -1) {\n                            s = m + 1;\n                            e--;\n                          } else {\n                            s++;\n                            e = m - 1;\n                          }\n                        }\n                        return linearSearch();\n                      };\n\n                  if (binarySearch()) {\n                    ctx.t.before(i, {\n                      itemData: _new,\n                      success: function() {\n                        var new_item = $(arguments[1].items[0]);\n                        ctx.t.openPath(new_item);\n                        ctx.t.select(new_item);\n                        if (\n                          ctx.o && ctx.o.success && typeof(ctx.o.success) == 'function'\n                        ) {\n                          ctx.o.success.apply(ctx.t, [i, _old, _new]);\n                        }\n                      },\n                      fail: function() {\n                        console.log('Failed to add before..');\n                        if (\n                          ctx.o && ctx.o.fail && typeof(ctx.o.fail) == 'function'\n                        ) {\n                          ctx.o.fail.apply(ctx.t, [i, _old, _new]);\n                        }\n                      }\n                    });\n                  } else {\n                    var _appendNode = function() {\n                      ctx.t.append(ctx.i, {\n                        itemData: _new,\n                        success: function() {\n                          var new_item = $(arguments[1].items[0]);\n                          ctx.t.openPath(new_item);\n                          ctx.t.select(new_item);\n                          if (\n                            ctx.o && ctx.o.success && typeof(ctx.o.success) == 'function'\n                          ) {\n                            ctx.o.success.apply(ctx.t, [ctx.i, _old, _new]);\n                          }\n                        },\n                        fail: function() {\n                          console.log('Failed to append');\n                          if (\n                            ctx.o && ctx.o.fail && typeof(ctx.o.fail) == 'function'\n                          ) {\n                            ctx.o.fail.apply(ctx.t, [ctx.i, _old, _new]);\n                          }\n                        }\n                      })\n                    };\n\n                    // If the current node's inode is false\n                    if (ctx.i && !ctx.t.isInode(ctx.i)) {\n                      ctx.t.setInode(ctx.i, {success: _appendNode});\n                    } else {\n                      // Handle case for node without parent i.e. server-group\n                      // or if parent node's inode is true.\n                      _appendNode();\n                    }\n\n                  }\n                }.bind(ctx);\n\n            // Parent node do not have any children, let me unload it.\n            if (!first && ctx.t.wasLoad(ctx.i)) {\n              ctx.t.unload(ctx.i, {\n                success: function() {\n                  findChildNode(\n                    selectNode,\n                    function() {\n                      var o = this && this.o;\n                      if (\n                        o && o.fail && typeof(o.fail) == 'function'\n                      ) {\n                        o.fail.apply(this.t, [this.i, _old, _new]);\n                      }\n                    }.bind(this)\n                  );\n                }.bind(this),\n                fail: function() {\n                  var o = this && this.o;\n                  if (\n                    o && o.fail && typeof(o.fail) == 'function'\n                  ) {\n                    o.fail.apply(this.t, [this.i, _old, _new]);\n                  }\n                }.bind(this)\n              });\n              return;\n            }\n\n            // We can find the collection node using _findTreeChildNode\n            // indirectly.\n            findChildNode(selectNode, addNode);\n          }.bind(ctx);\n\n      if (!ctx.t.wasInit() || !_new || !_old) {\n        return;\n      }\n      ctx.pI.push(_old);\n      _new._label = _new.label;\n      _new.label = _.escape(_new.label);\n\n      // We need to check if this is collection node and have\n      // children count, if yes then add count with label too\n      if(ctx.b.Nodes[_new._type].is_collection) {\n          if ('collection_count' in _old && _old['collection_count'] > 0) {\n            _new.label = _.escape(_new._label) +\n                ' <span>(' + _old['collection_count'] + ')</span>'\n          }\n      }\n\n      if (_old._pid != _new._pid || _old._label != _new._label) {\n        ctx.op = 'RECREATE';\n        traversePath();\n      } else {\n        ctx.op = 'UPDATE';\n        traversePath();\n      }\n    },\n\n    onRefreshTreeNode: function(_i, _opts) {\n      var d = _i && this.tree.itemData(_i),\n          n = d && d._type && this.Nodes[d._type],\n          ctx = {\n            b: this, // Browser\n            d: d, // current parent\n            i: _i, // current item\n            p: null, // path of the old object\n            pI: [], // path items\n            t: this.tree, // Tree Api\n            o: _opts\n          },\n          isOpen,\n          idx = -1;\n\n      if (!n) {\n        _i = null;\n        ctx.i = null;\n        ctx.d = null;\n      } else {\n        isOpen = (this.tree.isInode(_i) && this.tree.isOpen(_i));\n      }\n\n      ctx.branch = ctx.t.serialize(\n        _i, {}, function(i, el, d) {\n          idx++;\n          if (!idx || (d.inode && d.open)) {\n            return {\n              _id: d._id, _type: d._type, branch: d.branch, open: d.open\n            };\n          }\n        });\n\n      if (!n) {\n        ctx.t.destroy({\n          success: function() {\n            initializeBrowserTree(ctx.b);\n            ctx.t = ctx.b.tree;\n            ctx.i = null;\n            ctx.b._refreshNode(ctx, ctx.branch);\n          },\n          error: function() {\n            var fail = (_opts.o && _opts.o.fail) || _opts.fail;\n\n            if (typeof(fail) == 'function') {\n              fail();\n            }\n          }\n        });\n        return;\n      }\n      var fetchNodeInfo = function(_i, _d, _n) {\n            var info = _n.getTreeNodeHierarchy(_i),\n                url = _n.generate_url(_i, 'nodes', _d, true);\n\n            $.ajax({\n              url: url,\n              type: 'GET',\n              cache: false,\n              dataType: 'json',\n              success: function(res) {\n                // Node information can come as result/data\n                var data = res.result || res.data;\n\n                data._label = data.label;\n                data.label = _.escape(data.label);\n                var d = ctx.t.itemData(ctx.i);\n                _.extend(d, data);\n                ctx.t.setLabel(ctx.i, {label: _d.label});\n                ctx.t.addIcon(ctx.i, {icon: _d.icon});\n                ctx.t.setId(ctx.i, {id: _d.id});\n                ctx.t.setInode(ctx.i, {inode: data.inode});\n\n                if (\n                  _n.can_expand && typeof(_n.can_expand) == 'function'\n                ) {\n                  if (!_n.can_expand(d)) {\n                    ctx.t.unload(ctx.i);\n                    return;\n                  }\n                }\n                ctx.b._refreshNode(ctx, ctx.branch);\n                var success = (ctx.o && ctx.o.success) || ctx.success;\n                if (success && typeof(success) == 'function') {\n                  success();\n                }\n              },\n              error: function(xhr, error, status) {\n                if (\n                  !Alertify.pgHandleItemError(\n                    xhr, error, status, {item: _i, info: info}\n                  )\n                ) {\n                  var msg = xhr.responseText,\n                      contentType = xhr.getResponseHeader('Content-Type'),\n                      msg = xhr.responseText,\n                      jsonResp = (\n                        contentType &&\n                        contentType.indexOf('application/json') == 0 &&\n                        $.parseJSON(xhr.responseText)\n                        ) || {};\n\n                  if (xhr.status == 410 && jsonResp.success == 0) {\n                    var p = ctx.t.parent(ctx.i);\n\n                    ctx.t.remove(ctx.i, {\n                      success: function() {\n                        if (p) {\n                          // Try to refresh the parent on error\n                          try {\n                            pgBrowser.Events.trigger(\n                              'pgadmin:browser:tree:refresh', p\n                            );\n                          } catch(e) {}\n                        }\n                      }\n                    });\n                  }\n\n                  Alertify.pgNotifier(\n                    error, xhr, gettext(\"Error retrieving details for the node.\"),\n                    function() {\n                       console.log(arguments);\n                    }\n                  );\n                }\n              }\n            });\n          }.bind(this);\n\n      if (n && n.collection_node) {\n        var p = ctx.i = this.tree.parent(_i),\n            unloadNode = function() {\n              this.tree.unload(_i, {\n                success: function() {\n                  _i = p;\n                  d = ctx.d = ctx.t.itemData(ctx.i);\n                  n = ctx.b.Nodes[d._type];\n                  _i = p;\n                  fetchNodeInfo(_i, d, n);\n                },\n                fail: function() {\n                  console.log(arguments);\n                }\n              });\n            }.bind(this);\n        if (!this.tree.isInode(_i)) {\n          this.tree.setInode(_i, {\n            success: unloadNode\n          });\n        } else {\n          unloadNode();\n        }\n      } else if (isOpen) {\n        this.tree.unload(_i, {\n          success: fetchNodeInfo.bind(this, _i, d, n),\n          fail: function() {\n            console.log(arguments);\n          }\n        });\n      } else if (!this.tree.isInode(_i) && d.inode) {\n        this.tree.setInode(_i, {\n          success: fetchNodeInfo.bind(this, _i, d, n),\n          fail: function() {\n            console.log(arguments);\n          }\n        });\n      } else {\n        fetchNodeInfo(_i, d, n);\n      }\n    },\n\n    removeChildTreeNodesById: function(_parentNode, _collType, _childIds) {\n      var tree = pgBrowser.tree;\n      if(_parentNode && _collType) {\n        var children = tree.children(_parentNode),\n            idx = 0, size = children.length,\n            childNode, childNodeData;\n\n        _parentNode = null;\n\n        for (; idx < size; idx++) {\n          childNode = children.eq(idx);\n          childNodeData = tree.itemData(childNode);\n\n          if (childNodeData._type == _collType) {\n            _parentNode = childNode;\n            break;\n          }\n        }\n      }\n\n      if (_parentNode) {\n        var children = tree.children(_parentNode),\n            idx = 0, size = children.length,\n            childNode, childNodeData,\n            prevChildNode;\n\n        for (; idx < size; idx++) {\n          childNode = children.eq(idx);\n          childNodeData = tree.itemData(childNode);\n\n          if (_childIds.indexOf(childNodeData._id) != -1) {\n            pgBrowser.removeTreeNode(childNode, false, _parentNode);\n          }\n        }\n        return true;\n      }\n      return false;\n    },\n\n    removeTreeNode: function(_node, _selectNext, _parentNode) {\n      var tree = pgBrowser.tree,\n          nodeToSelect = null;\n\n      if (!_node)\n        return false;\n\n      if (_selectNext) {\n        nodeToSelect = tree.next(_node);\n        if (!nodeToSelect || !nodeToSelect.length) {\n          nodeToSelect = tree.prev(_node);\n\n          if (!nodeToSelect || !nodeToSelect.length) {\n            if (!_parentNode) {\n              nodeToSelect = tree.parent(_node);\n            } else {\n              nodeToSelect = _parentNode;\n            }\n          }\n        }\n        if (nodeToSelect)\n          tree.select(nodeToSelect);\n      }\n      tree.remove(_node);\n      return true;\n    },\n\n    findSiblingTreeNode: function(_node, _id) {\n      var tree = pgBrowser.tree,\n          parentNode = tree.parent(_node),\n          siblings = tree.children(parentNode),\n          idx = 0, nodeData, node;\n\n      for(; idx < siblings.length; idx++) {\n        node = siblings.eq(idx);\n        nodeData = tree.itemData(node);\n\n        if (nodeData && nodeData._id == _id)\n          return node;\n      }\n      return null;\n    },\n\n    findParentTreeNodeByType: function(_node, _parentType) {\n      var tree = pgBrowser.tree,\n          nodeData,\n          node = _node;\n\n      do {\n        nodeData = tree.itemData(node);\n        if (nodeData && nodeData._type == _parentType)\n          return node;\n        node = tree.hasParent(node) ? tree.parent(node) : null;\n      } while (node);\n\n      return null;\n    },\n\n    findChildCollectionTreeNode: function(_node, _collType) {\n      var tree = pgBrowser.tree,\n          nodeData, idx = 0,\n          node = _node,\n          children = _node && tree.children(_node);\n\n      if (!children || !children.length)\n        return null;\n\n      for(; idx < children.length; idx++) {\n        node = children.eq(idx);\n        nodeData = tree.itemData(node);\n\n        if (nodeData && nodeData._type == _collType)\n          return node;\n      }\n      return null;\n    },\n\n    addChildTreeNodes: function(_treeHierarchy, _node, _type, _arrayIds, _callback) {\n      var module = _type in pgBrowser.Nodes && pgBrowser.Nodes[_type],\n          childTreeInfo = _arrayIds.length && _.extend(\n            {}, _.mapObject(\n              _treeHierarchy, function(_val, _key) {\n                _val.priority -= 1; return _val;\n              })\n          ),\n          arrayChildNodeData = [],\n          fetchNodeInfo = function(_callback) {\n            if (!_arrayIds.length) {\n              if (_callback) {\n                _callback();\n              }\n              return;\n            }\n\n            var childDummyInfo = {\n                  '_id': _arrayIds.pop(), '_type': _type, 'priority': 0\n                },\n                childNodeUrl;\n            childTreeInfo[_type] = childDummyInfo;\n\n            childNodeUrl = module.generate_url(\n              null, 'nodes', childDummyInfo, true, childTreeInfo\n            );\n            console.debug(\"Fetching node information using: \", childNodeUrl);\n\n            $.ajax({\n              url: childNodeUrl,\n              dataType: \"json\",\n              success: function(res) {\n                if (res.success) {\n                  arrayChildNodeData.push(res.data);\n                }\n                fetchNodeInfo(_callback);\n              },\n              error: function(xhr, status, error) {\n                try {\n                  var err = $.parseJSON(xhr.responseText);\n                  if (err.success == 0) {\n                    Alertify.error(err.errormsg);\n                  }\n                } catch (e) {}\n                fetchNodeInfo(_callback);\n              }\n            });\n          };\n\n\n      if (!module) {\n        console.warning(\n          \"Developer: Couldn't find the module for the given child: \",\n          _.clone(arguments)\n        );\n        return;\n      }\n\n      if (pgBrowser.tree.wasLoad(_node) || pgBrowser.tree.isLeaf(_node)) {\n        fetchNodeInfo(function() {\n          console.log('Append this nodes:', arrayChildNodeData);\n          _.each(arrayChildNodeData, function(_nodData) {\n            pgBrowser.Events.trigger(\n              'pgadmin:browser:tree:add', _nodData, _treeHierarchy\n            );\n          });\n\n          if (_callback) {\n            _callback();\n          }\n        });\n      } else {\n        if (_callback) {\n          _callback();\n        }\n      }\n    },\n\n    _refreshNode: function(_ctx, _d) {\n      var traverseNodes = function(_d) {\n            var _ctx = this, idx = 0, ctx, d,\n                size = (_d.branch && _d.branch.length) || 0,\n                findNode = function(_i, __d, __ctx) {\n                  setTimeout(\n                    function() {\n                      __ctx.b._findTreeChildNode(_i, __d, __ctx);\n                    }, 0\n                  );\n                };\n\n            for (; idx < size; idx++) {\n              d = _d.branch[idx];\n              var n = _ctx.b.Nodes[d._type];\n              ctx = {\n                b: _ctx.b,\n                t: _ctx.t,\n                pI: [],\n                i: _ctx.i,\n                d: d,\n                select: _ctx.select,\n                hasId: n && !n.collection_node,\n                o: _ctx.o,\n                load: true\n              };\n              ctx.success = function() {\n                this.b._refreshNode.call(this.b, this, this.d);\n              }.bind(ctx)\n              findNode(_ctx.i, d, ctx);\n            }\n          }.bind(_ctx, _d);\n\n       if (!_d || !_d.open)\n         return;\n\n       if (!_ctx.t.isOpen(_ctx.i)) {\n         _ctx.t.open(_ctx.i, {\n           unanimated: true,\n           success: traverseNodes,\n           fail: function() { /* Do nothing */ }\n         });\n       } else {\n         traverseNodes();\n       }\n\n    },\n\n    editor_shortcut_keys: {\n      // Autocomplete sql command\n      \"Ctrl-Space\": \"autocomplete\",\n      \"Cmd-Space\": \"autocomplete\",\n\n      // Select All text\n      \"Ctrl-A\": \"selectAll\",\n      \"Cmd-A\": \"selectAll\",\n\n      // Redo text\n      \"Ctrl-Y\": \"redo\",\n      \"Cmd-Y\": \"redo\",\n\n      // Undo text\n      \"Ctrl-Z\": \"undo\",\n      \"Cmd-Z\": \"undo\",\n\n      // Delete Line\n      \"Ctrl-D\": \"deleteLine\",\n      \"Cmd-D\": \"deleteLine\",\n\n      // Go to start/end of Line\n      \"Alt-Left\": \"goLineStart\",\n      \"Alt-Right\": \"goLineEnd\",\n\n      // Move word by word left/right\n      \"Ctrl-Alt-Left\": \"goGroupLeft\",\n      \"Cmd-Alt-Left\": \"goGroupLeft\",\n      \"Ctrl-Alt-Right\": \"goGroupRight\",\n      \"Cmd-Alt-Right\": \"goGroupRight\",\n\n      // Allow user to delete Tab(s)\n      \"Shift-Tab\": \"indentLess\"\n    },\n    editor_options: {\n      tabSize: pgBrowser.utils.tabSize,\n      wrapCode: pgBrowser.utils.wrapCode,\n      insert_pair_brackets: pgBrowser.utils.insertPairBrackets,\n      brace_matching: pgBrowser.utils.braceMatching\n    }\n\n  });\n\n  /* Remove paste event mapping from CodeMirror's emacsy KeyMap binding\n   * specific to Mac LineNumber:5797 - lib/Codemirror.js\n   * It is preventing default paste event(Cmd-V) from triggering\n   * in runtime.\n   */\n  delete CodeMirror.keyMap.emacsy[\"Ctrl-V\"];\n\n  // Use spaces instead of tab\n  if (pgBrowser.utils.useSpaces == 'True') {\n    pgAdmin.Browser.editor_shortcut_keys.Tab = \"insertSoftTab\";\n  }\n\n  /*window.onbeforeunload = function(ev) {\n    var e = ev || window.event,\n        msg = S(gettext('Are you sure you wish to close the %s browser?')).sprintf(pgBrowser.utils.app_name).value();\n\n    // For IE and Firefox prior to version 4\n    if (e) {\n      e.returnValue = msg;\n    }\n\n    // For Safari\n    return msg;\n  };*/\n\n  return pgAdmin.Browser;\n});\n\n\n\n// WEBPACK FOOTER //\n// pgadmin/browser/static/js/browser.js","define([\n  'sources/gettext', 'jquery', 'underscore', 'underscore.string', 'sources/pgadmin',\n  'backbone', 'alertify', 'backform', 'backgrid', 'sources/browser/generate_url', 'pgadmin.backform', 'pgadmin.backgrid',\n  'pgadmin.browser.node'\n], function(gettext, $, _, S, pgAdmin, Backbone, Alertify, Backform, Backgrid, generateUrl) {\n\n  var pgBrowser = pgAdmin.Browser = pgAdmin.Browser || {};\n\n  // It has already been defined.\n  // Avoid running this script again.\n  if (pgBrowser.Collection)\n    return pgBrowser.Collection;\n\n  pgBrowser.Collection = function() {};\n\n   _.extend(\n     pgBrowser.Collection,\n     _.clone(pgBrowser.Node), {\n    ///////\n    // Initialization function\n    // Generally - used to register the menus for this type of node.\n    //\n    // Also, look at pgAdmin.Browser.add_menus(...) function.\n    //\n    // Collection will not have 'Properties' menu.\n    //\n    // NOTE: Override this for each node for initialization purpose\n    Init: function() {\n      if (this.node_initialized)\n        return;\n      this.node_initialized = true;\n      pgAdmin.Browser.add_menus([{\n        name: 'refresh', node: this.type, module: this,\n        applies: ['object', 'context'], callback: 'refresh',\n        priority: 1, label: gettext('Refresh...'),\n        icon: 'fa fa-refresh'\n      }]);\n\n      // show query tool only in context menu of supported nodes.\n      if (pgAdmin.DataGrid && pgAdmin.unsupported_nodes) {\n        if (_.indexOf(pgAdmin.unsupported_nodes, this.type) == -1) {\n          pgAdmin.Browser.add_menus([{\n            name: 'show_query_tool', node: this.type, module: this,\n            applies: ['context'], callback: 'show_query_tool',\n            priority: 998, label: gettext('Query Tool...'),\n            icon: 'fa fa-bolt'\n          }]);\n        }\n      }\n    },\n    hasId: false,\n    is_collection: true,\n    collection_node: true,\n    // A collection will always have a collection of statistics, when the node\n    // it represent will have some statistics.\n    hasCollectiveStatistics: true,\n    showProperties: function(item, data, panel) {\n      var that = this,\n        j = panel.$container.find('.obj_properties').first(),\n        view = j.data('obj-view'),\n        content = $('<div></div>')\n          .addClass('pg-prop-content col-xs-12'),\n        node = pgBrowser.Nodes[that.node],\n        // This will be the URL, used for object manipulation.\n        urlBase = this.generate_url(item, 'properties', data),\n        collection = new (node.Collection.extend({\n          url: urlBase,\n          model: node.model\n        }))(),\n        info = this.getTreeNodeHierarchy.apply(this, [item]),\n        gridSchema = Backform.generateGridColumnsFromModel(\n            info, node.model, 'properties', that.columns\n          ),\n        // Initialize a new Grid instance\n        grid = new Backgrid.Grid({\n          columns: gridSchema.columns,\n          collection: collection,\n          className: \"backgrid table-bordered\"\n        }),\n        gridView = {\n          'remove': function() {\n            if (this.grid) {\n              if (this.grid.collection) {\n                this.grid.collection.reset(null, {silent: true});\n                delete (this.grid.collection);\n              }\n              delete (this.grid);\n              this.grid = null;\n            }\n          },\n          grid: grid\n        };\n\n      if (view) {\n        // Avoid unnecessary reloads\n        if (_.isEqual($(panel).data('node-prop'), urlBase)) {\n          return;\n        }\n\n        // Cache the current IDs for next time\n        $(panel).data('node-prop', urlBase);\n\n        // Reset the data object\n        j.data('obj-view', null);\n      }\n\n      // Make sure the HTML element is empty.\n      j.empty();\n      j.data('obj-view', gridView);\n\n      // Render subNode grid\n      content.append(grid.render().$el);\n      j.append(content);\n\n      // Fetch Data\n      collection.fetch({\n        reset: true,\n        error: function(xhr, error, message) {\n          pgBrowser.Events.trigger(\n            'pgadmin:collection:retrieval:error', 'properties', xhr, error, message, item, that\n          );\n          if (\n            !Alertify.pgHandleItemError(xhr, error, message, {item: item, info: info})\n          ) {\n            Alertify.pgNotifier(\n              error, xhr,\n              S(\n                gettext(\"Error retrieving properties - %s.\")\n              ).sprintf(message || that.label).value(),\n              function() {\n                console.log(arguments);\n              }\n            );\n          }\n        }\n      })\n    },\n    generate_url: function(item, type) {\n      /*\n     * Using list, and collection functions of a node to get the nodes\n     * under the collection, and properties of the collection respectively.\n     */\n      var opURL = {\n          'properties': 'obj', 'children': 'nodes',\n        },\n        self = this;\n      var collectionPickFunction = function (treeInfoValue, treeInfoKey) {\n        return (treeInfoKey != self.type);\n      };\n      var treeInfo = this.getTreeNodeHierarchy(item);\n      var actionType = type in opURL ? opURL[type] : type;\n      return generateUrl.generate_url(pgAdmin.Browser.URL, treeInfo, actionType, self.node, collectionPickFunction);\n    },\n  });\n\n  return pgBrowser.Collection;\n});\n\n\n\n// WEBPACK FOOTER //\n// pgadmin/browser/static/js/collection.js"],"mappings":";;;;;;;;AAAA;AACA;AAGA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAEA;AACA;AACA;AACA;AADA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAlEA;AAoEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AA7JA;AACA;AA+JA;AACA;AACA;;;;;;;;;;;ACjLA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AADA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAWA;AAfA;AAzDA;AA2EA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAAA;AAAA;;AAAA;AAOA;AACA;AACA;AAEA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAMA;AAaA;AAIA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AAHA;AADA;AAOA;AAAA;AAEA;AACA;AACA;AAGA;AACA;AAGA;AACA;AAIA;AACA;AACA;AAIA;AACA;AACA;AAxBA;AA0BA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvBA;AAyBA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;;;;AAIA;AACA;AADA;AACA;AAGA;AACA;AACA;;;;;;AAAA;;AAAA;AASA;AACA;AACA;AACA;;;;;;AAAA;;AAAA;AASA;AACA;AACA;AACA;;;;;;AAAA;;AAAA;AASA;AACA;AACA;AArCA;AACA;AAuCA;AACA;AACA;;;;;;;;;;;;;ACnXA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAKA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AACA;AAMA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AAHA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;;;AAGA;AACA;AAAA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlKA;AACA;AAoKA;;;;;;;;;;;;;;;;AAgBA;AACA;AAAA;AAYA;AACA;AACA;AACA;AAJA;AAXA;AAAA;AAAA;AAAA;AAAA;AACA;AAqBA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAPA;AAcA;AACA;AACA;;;;;;;;;;;;;;;;;AAiBA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAlBA;AACA;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAKA;AAGA;AACA;AACA;AACA;AACA;;;;;;;;;;ACvbA;AACA;AAGA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AA/DA;AAiEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjGA;AACA;AAmGA;AACA;AACA;;;;;;;;;;;ACnHA;AAIA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AAAA;AACA;AACA;AAFA;AACA;AAIA;;;;;;AAMA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AAYA;AACA;AACA;AACA;AAEA;AADA;AAIA;AADA;AAIA;AACA;AACA;AACA;AAFA;AAVA;AAeA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAjFA;AAuFA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AAMA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AAYA;AACA;AACA;AACA;AAEA;AADA;AAIA;AADA;AAIA;AACA;AACA;AACA;AACA;AACA;AAJA;AAVA;AAiBA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AApFA;AA0FA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAFA;AACA;AAIA;AACA;;;;;;AAMA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AAYA;AACA;AACA;AACA;AAEA;AADA;AAIA;AADA;AAIA;AACA;AACA;AACA;AACA;AACA;AAJA;AAVA;AAiBA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAlFA;AAwFA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAFA;AACA;AAIA;;;;;;AAMA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AAYA;AACA;AACA;AACA;AAEA;AADA;AAIA;AADA;AAIA;AACA;AACA;AACA;AACA;AACA;AAJA;AAVA;AAiBA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AACA;AAHA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA;AAgBA;AACA;AACA;AACA;AAAA;AAEA;AACA;AAFA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnBA;AAqBA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAtLA;AA4LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAnpBA;AACA;AAqpBA;AACA;AACA;;;;;;;;;;;ACtqBA;AACA;AAKA;;;;AAIA;AACA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AACA;AAEA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5CA;AA8CA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAGA;AACA;AAFA;AAFA;AAOA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtCA;AAwCA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AAZA;AAcA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AArCA;AAwCA;AACA;AAFA;AAKA;AADA;AAIA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjGA;AACA;AAmGA;;;;AAIA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAIA;AADA;AAGA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AAAA;AAAA;AACA;AAGA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAUA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAZA;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAGA;AACA;AAFA;AAFA;AACA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtQA;AACA;AAwQA;AACA;AACA;;;;;;;;;;AC/eA;AAIA;;;;;;;;;;AAUA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AATA;AACA;AAWA;;;;;;;;;;AAUA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA;AARA;AACA;AAaA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1EA;AAtBA;AAmGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAXA;AAaA;AACA;AAFA;AACA;AAIA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AAKA;AACA;AACA;;;AAGA;AAAA;AAAA;AACA;AAGA;AACA;AAEA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhQA;AACA;AAkQA;;;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAZA;AACA;AAcA;AACA;AAeA;AACA;AACA;AAFA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAQA;AACA;;;;AAIA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAQA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;;;;;;AAOA;AACA;AAEA;AACA;AACA;AACA;AACA;;;;;;;;AAQA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AAIA;AACA;AACA;;;;AAIA;AAAA;AAAA;AAAA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAEA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AAGA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AAAA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;;;;;AAKA;AACA;AAEA;AAEA;AACA;AACA;AAAA;AACA;AACA;AAhUA;AACA;AAkUA;;;;AAIA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAZA;AAcA;;;;AAIA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlCA;AACA;AAoCA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AApBA;AACA;AAsBA;AAEA;AAAA;;;;;;;;;;;;ACrrBA;AACA;AACA;AACA;AACA;AAMA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AACA;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA;AACA;AAgBA;AACA;AACA;AACA;AACA;AAEA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AACA;AAJA;AANA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AACA;AAKA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AA/HA;AACA;AAiIA;;;;AAIA;AAEA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AACA;AAiBA;;;;;;;;AAQA;AAEA;AAGA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhCA;AACA;AAkCA;;;;;AAKA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AACA;AAJA;AANA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAcA;AACA;AACA;AACA;AAlBA;AACA;AAoBA;;;;;AAKA;AAEA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AAAA;AAAA;AAAA;AACA;AAMA;AACA;AACA;AAMA;AACA;AA7BA;AACA;AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AAVA;AAYA;AAaA;AACA;AAIA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AARA;AAUA;AADA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAzDA;AACA;AA2DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;AAGA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AACA;AACA;AAIA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjIA;AACA;AAmIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAOA;AAGA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AACA;AACA;AALA;AAJA;AAAA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxEA;AACA;AA0EA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AACA;AAJA;AANA;AAaA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAGA;AACA;AACA;AAXA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AAGA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAnWA;AACA;AAqWA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AACA;AAJA;AANA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAMA;AAAA;AAAA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AACA;AACA;AACA;AACA;AADA;AAAA;AACA;AAKA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/MA;AACA;AAiNA;;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AAQA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAPA;AACA;AAYA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAMA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1IA;AA4IA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AAVA;AACA;AAoBA;AACA;AACA;AACA;AACA;AACA;AAGA;AAAA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AAAA;AACA;AAQA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAUA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzBA;AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAUA;AACA;AACA;AACA;AACA;AACA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA;AACA;AAgBA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AAHA;AADA;AAOA;AACA;AAwBA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AACA;AAJA;AANA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AACA;AAKA;AACA;AACA;AACA;AACA;AAHA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AADA;AAGA;AADA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AA5JA;AACA;AA8JA;AACA;AACA;AAGA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzDA;AACA;AA4DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAbA;AACA;AAgBA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAOA;AAGA;AACA;AAlBA;AACA;AAoBA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AACA;AAOA;AACA;AACA;AAaA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AACA;AAJA;AANA;AAaA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AACA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApJA;AACA;AAsJA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AAPA;AACA;AAaA;;;;;;;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AAYA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AACA;AAJA;AACA;AAMA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArEA;AACA;AAuEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AALA;AAUA;AACA;AACA;AAfA;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AACA;AACA;AACA;AACA;AAcA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AACA;AAJA;AANA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5BA;AADA;AAkCA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAnIA;AACA;AAqIA;AACA;;;;;;;;;;AChzEA;AAIA;AACA;AACA;AACA;;;;AAIA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AADA;AAEA;AACA;AACA;AACA;AAEA;;;;;;AAMA;AACA;AACA;AACA;AACA;AAFA;AAFA;AACA;AAOA;;;;;;AAMA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AACA;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AAMA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AAAA;AAIA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;;;;;;AAMA;AACA;AACA;AACA;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AApDA;AAsDA;AACA;AAAA;;;;;;;;;;;;;;;;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAjDA;AAmDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAHA;AACA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAHA;AAWA;AADA;AAGA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAjBA;AA0BA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AA3EA;AAiFA;AAEA;AACA;AACA;AACA;AA5YA;AACA;AA8YA;AACA;AACA;;;;;;;;;;;AC/ZA;AAGA;AACA;AACA;AACA;AACA;;;;;AAAA;;;;AAAA;;AAAA;AACA;AAYA;AACA;;;;AAAA;;;;AAAA;;;AAAA;AAYA;AACA;AACA;AACA;AAIA;AAnCA;AACA;AAqCA;AACA;AACA;;;;;;;;;;;;AC7CA;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AARA;AACA;AAUA;;;;;;AAMA;AACA;AACA;;;;;AAKA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAFA;AAKA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtEA;AAwEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AACA;AAHA;AAZA;AACA;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AADA;AAIA;AACA;AAEA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3DA;AA6DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AAMA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AAQA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AAGA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AAMA;AAEA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxvBA;AACA;AA0vBA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;AACA;;;;;;;;;;;;;;AAcA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AA5fA;AACA;AA8fA;AACA;AACA;AACA;AACA;;;;;;;;;;ACnwCA,qQAMA;AACA;AACA;AACA;;;;AAIA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAgBA;AAEA;AACA;AAEA;AAtCA;AACA;AAwCA;AACA;AACA;;;;;;;;;;AC3DA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvBA;AADA;AACA;AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA;AAgBA;AAsEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AADA;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3PA;AACA;AA6PA;AAEA;AAAA;;;;;;;;;;;ACnSA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AARA;AACA;AAUA;;;;;;;;;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAAA;AAKA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAnGA;AACA;AAqGA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/BA;AACA;AAiCA;AACA;AAKA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnFA;AACA;AAqFA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAVA;AACA;AAYA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAGA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAGA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AA5EA;AACA;AAyFA;AACA;AACA;AACA;AAFA;AACA;AAIA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AAIA;AACA;AAEA;AAEA;AAIA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlDA;AACA;AAoDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AACA;AAUA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AADA;AACA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AAGA;AACA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAUA;AACA;AACA;AACA;AACA;AAEA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAnGA;AACA;AAqGA;;;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAFA;AACA;AAQA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AAKA;AADA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;AAIA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAUA;AACA;AADA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAHA;AAMA;AACA;AACA;AADA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3KA;AACA;AA6KA;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAJA;AACA;AASA;;;;;AAMA;AACA;AACA;AACA;AACA;AAJA;AACA;AAOA;;;AAGA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlBA;AACA;AAqBA;AACA;AACA;AADA;AADA;AACA;AAKA;;;AAGA;AAEA;AACA;AACA;AACA;AADA;AACA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AACA;AAMA;AACA;AACA;AACA;AAFA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AAAA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAAA;AACA;AACA;AApFA;AACA;AAsFA;;;;AAIA;AAEA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AApBA;AACA;AAsBA;;;;AAIA;AAEA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxBA;AACA;AA0BA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjBA;AACA;AAmBA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAlBA;AACA;AAoBA;;;;;;;;AAQA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AA3BA;AACA;AA6BA;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AACA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AAGA;AACA;AACA;AACA;AACA;AATA;AAJA;AACA;AAgBA;;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AACA;AAaA;;;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjBA;AACA;AAmBA;;;AAGA;AAEA;AACA;AAFA;AACA;AAIA;AACA;AADA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AARA;AAUA;AAhBA;AACA;AAkBA;AACA;AACA;;;;;;;;;;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AACA;AAaA;;;;;;AAMA;AACA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AAMA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArGA;AACA;AAuGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AAJA;AAMA;AAtCA;AACA;AAwCA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AAYA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AApBA;AADA;AAwBA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAKA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtEA;AACA;AAwEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAzBA;AACA;AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AApBA;AACA;AAsBA;AAEA;;;;;;;;;;;ACn6CA;AACA;AAMA;AAAA;AAEA;AACA;AACA;AAHA;AACA;AAKA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AARA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AANA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAMA;AAZA;AAcA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAEA;AACA;AAEA;AACA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AAAA;;AAAA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AAIA;AAKA;AAMA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAxCA;AA0CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAAA;AACA;AAEA;AACA;AAEA;AADA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AAYA;AACA;AACA;;;;;;;AAOA;AACA;;;;;AAKA;AACA;;;;;AAKA;AACA;;;;;;AAMA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AAaA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAGA;AACA;AACA;AACA;AANA;AAQA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAMA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAKA;AACA;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAKA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAKA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AAxBA;AA0BA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAKA;AACA;AAEA;;;AAGA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAKA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AAEA;AADA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAKA;AACA;AAGA;AACA;AAEA;AADA;AAMA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAGA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AA3ZA;AA6ZA;;;;;;;AAOA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AACA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AACA;AAYA;AACA;AACA;AACA;AA5IA;AA8IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzLA;AA4LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3MA;AA8MA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAKA;AAEA;AAEA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AAMA;AACA;AACA;AACA;AAxCA;AA0CA;AACA;AAlQA;AAqQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAGA;AACA;AACA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAZA;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAVA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxYA;AA0YA;AACA;AACA;AA5YA;AA8YA;AAAA;AAAA;AACA;AAGA;AACA;AAAA;AAAA;AACA;AACA;AAGA;AACA;AAIA;AAIA;AAVA;AAaA;AACA;AAraA;AAuaA;AAAA;AAAA;AACA;AAGA;AACA;AAAA;AAAA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AAtbA;AAwbA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AA/bA;AAAA;AAAA;AACA;AAmcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AAWA;AACA;AACA;AACA;AACA;AAFA;AAAA;AAAA;AACA;AAKA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAKA;AACA;AAMA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/8CA;AACA;AAi9CA;AACA;AACA;;;;;;;;;;;;ACjhDA;;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AADA;AADA;AACA;AAcA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACxLA;;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AADA;AADA;AACA;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAGA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAMA;AACA;AAIA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhBA;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAEA;;;;;;;;;;;ACjgCA;AACA;AAKA;AACA;AACA;;;;;;AAMA;AACA;AAKA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAOA;AACA;AACA;;;;;;;;;;;;AAYA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAJA;AAUA;AACA;;;AAGA;AACA;AACA;;;AAGA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AAZA;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1FA;AACA;AA4FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAGA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAQA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAhCA;AAFA;AACA;AA4CA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAGA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAQA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AA5BA;AADA;AACA;AAgCA;;;;AAIA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AAJA;AATA;AAgBA;AAGA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AAZA;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjGA;AACA;AAmGA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAGA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAQA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAhCA;AAFA;AACA;AA2CA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAGA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAQA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAhCA;AAFA;AACA;AA0CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AAJA;AATA;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzBA;AACA;AA2BA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AAHA;AADA;AADA;AACA;AASA;AACA;AACA;;;;;;;;;;ACxiBA;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAGA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AADA;AAFA;AAMA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AADA;AAGA;AACA;AADA;AAtBA;AACA;AA0BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAZA;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AA3DA;AAsEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAaA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAFA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AADA;AAGA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AANA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAMA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAEA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AACA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAKA;AACA;AAGA;AACA;AACA;AAFA;AAIA;AAlBA;AACA;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AAQA;AACA;AACA;AACA;AApBA;AACA;AAsBA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AAKA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AARA;AAUA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAOA;AAAA;AAEA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAIA;AACA;AACA;AACA;AACA;AACA;AARA;AAQA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAZA;AAcA;AACA;AACA;AACA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAXA;AAaA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AAEA;AACA;AACA;AAdA;AAAA;AAiBA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAtCA;AAwCA;AACA;AACA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AACA;AACA;AATA;AAWA;AACA;AACA;AAGA;AACA;AACA;AAlBA;AAoBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArBA;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAMA;AACA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAhBA;AAkBA;AACA;AACA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AAzCA;AA2CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAGA;AACA;AACA;AAEA;AACA;AACA;AACA;AAGA;AACA;AACA;AArBA;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAlBA;AAAA;AAqBA;AACA;AACA;AACA;AACA;AAzBA;AA2BA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAOA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAXA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AANA;AAQA;AACA;AACA;AACA;AACA;AApBA;AAuBA;AAEA;AACA;AAEA;AApLA;AAsLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApOA;AAsOA;AAGA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvQA;AAyQA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AAlSA;AAoSA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AACA;AACA;AATA;AAWA;AACA;AACA;AAGA;AACA;AACA;AAlBA;AAoBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArBA;AAuBA;AACA;AACA;AACA;AAMA;AACA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAnBA;AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAnBA;AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAGA;AACA;AACA;AAEA;AACA;AACA;AACA;AAGA;AACA;AACA;AArBA;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAFA;AAAA;AACA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAeA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;AAAA;AAAA;AAAA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAVA;AAYA;AACA;AACA;AAGA;AACA;AAEA;AACA;AAvEA;AAyEA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AAYA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAIA;AACA;AALA;AAAA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAAA;AAIA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjBA;AAmBA;AACA;AAEA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhCA;AAkCA;AACA;AACA;AACA;AACA;AAJA;AACA;AAx1DA;AACA;AA+1DA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AAaA;AACA;AACA;;;;;;;;;;;ACp9DA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAJA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAKA;AACA;AAPA;AASA;AACA;AAFA;AARA;AAAA;AACA;AAeA;AACA;AACA;AACA;AACA;AAHA;AAjBA;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AACA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAGA;AAMA;AACA;AAEA;AACA;AAnBA;AAqBA;AACA;AACA;;;;AAIA;AACA;AADA;AAAA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAvIA;AACA;AAyIA;AACA;AACA;;;;A","sourceRoot":""}